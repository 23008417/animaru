/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/provider/vidsrc/episodes/route";
exports.ids = ["app/api/provider/vidsrc/episodes/route"];
exports.modules = {

/***/ "(rsc)/./app/api/provider/vidsrc/episodes/route.js":
/*!***************************************************!*\
  !*** ./app/api/provider/vidsrc/episodes/route.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst runtime = 'nodejs';\nconst clamp = (value, min, max)=>Math.max(min, Math.min(max, value));\nconst sleep = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst OVERRIDES_FILE = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'config', 'vidsrc-overrides.json');\nconst ANILIST_API = 'https://graphql.anilist.co';\nconst ANILIST_QUERY = `\n  query ($id: Int) {\n    Media(id: $id, type: ANIME) {\n      episodes\n      externalLinks {\n        id\n        site\n        url\n      }\n    }\n  }\n`;\nconst extractTmdbId = (text)=>{\n    if (!text) return null;\n    const value = String(text);\n    const fromUrl = value.match(/themoviedb\\.org\\/(?:tv|movie)\\/(\\d+)/i)?.[1];\n    if (fromUrl) return fromUrl;\n    const numeric = value.match(/\\b(\\d{2,})\\b/)?.[1];\n    return numeric || null;\n};\nconst extractImdbId = (text)=>{\n    if (!text) return null;\n    const value = String(text);\n    const fromUrl = value.match(/imdb\\.com\\/title\\/(tt\\d+)/i)?.[1];\n    if (fromUrl) return fromUrl;\n    const match = value.match(/\\btt\\d+\\b/i)?.[0];\n    return match || null;\n};\nconst readEnvOverrides = ()=>{\n    const raw = \"{\\\"172463\\\":{\\\"tmdb\\\":\\\"95479\\\",\\\"season\\\":3,\\\"episodes\\\":7}}\";\n    if (!raw) return {};\n    try {\n        const parsed = JSON.parse(raw);\n        return parsed && typeof parsed === 'object' ? parsed : {};\n    } catch  {\n        return {};\n    }\n};\nconst readFileOverrides = async ()=>{\n    try {\n        const raw = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(OVERRIDES_FILE, 'utf8');\n        const parsed = JSON.parse(raw);\n        return parsed && typeof parsed === 'object' ? parsed : {};\n    } catch  {\n        return {};\n    }\n};\nconst readOverrides = async ()=>{\n    const [fileOverrides, envOverrides] = await Promise.all([\n        readFileOverrides(),\n        Promise.resolve(readEnvOverrides())\n    ]);\n    return {\n        ...fileOverrides,\n        ...envOverrides\n    };\n};\nconst resolveExternalIds = async (anilistId)=>{\n    let response = null;\n    for(let attempt = 1; attempt <= 3; attempt += 1){\n        response = await fetch(ANILIST_API, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json'\n            },\n            cache: 'no-store',\n            body: JSON.stringify({\n                query: ANILIST_QUERY,\n                variables: {\n                    id: Number(anilistId)\n                }\n            })\n        });\n        if (response.ok) {\n            break;\n        }\n        if (response.status !== 429 || attempt === 3) {\n            throw new Error(`AniList metadata request failed: ${response.status}`);\n        }\n        await sleep(500 * attempt);\n    }\n    if (!response || !response.ok) {\n        throw new Error('AniList metadata request failed');\n    }\n    const payload = await response.json();\n    const media = payload?.data?.Media;\n    const links = Array.isArray(media?.externalLinks) ? media.externalLinks : [];\n    let tmdb = null;\n    let imdb = null;\n    for (const link of links){\n        const site = String(link?.site || '').toLowerCase();\n        const url = String(link?.url || '');\n        const id = String(link?.id || '');\n        if (!tmdb && (site.includes('tmdb') || site.includes('themoviedb'))) {\n            tmdb = extractTmdbId(url) || extractTmdbId(id);\n        }\n        if (!imdb && site.includes('imdb')) {\n            imdb = extractImdbId(url) || extractImdbId(id);\n        }\n    }\n    return {\n        tmdb,\n        imdb,\n        totalEpisodes: Number(media?.episodes) > 0 ? Number(media.episodes) : null\n    };\n};\nconst buildVidSrcUrl = ({ template, anilistId, episodeNumber })=>{\n    const safeAnilist = String(anilistId || '').trim();\n    const safeEpisode = String(episodeNumber || '').trim();\n    return template.replaceAll('{id}', encodeURIComponent(`vidsrc-${safeAnilist}`)).replaceAll('{episodeId}', encodeURIComponent(safeEpisode)).replaceAll('{ep}', encodeURIComponent(safeEpisode)).replaceAll('{server}', encodeURIComponent('')).replaceAll('{category}', encodeURIComponent('')).replaceAll('{anilist}', encodeURIComponent(safeAnilist)).replaceAll('{tmdb}', encodeURIComponent('')).replaceAll('{imdb}', encodeURIComponent('')).replaceAll('{season}', encodeURIComponent('1'));\n};\nconst buildDefaultVidSrcUrl = ({ tmdb, imdb, season, episodeNumber })=>{\n    if (tmdb) {\n        return `https://vidsrc-embed.ru/embed/tv?tmdb=${encodeURIComponent(tmdb)}&season=${encodeURIComponent(String(season))}&episode=${encodeURIComponent(String(episodeNumber))}`;\n    }\n    if (imdb) {\n        return `https://vidsrc-embed.ru/embed/tv?imdb=${encodeURIComponent(imdb)}&season=${encodeURIComponent(String(season))}&episode=${encodeURIComponent(String(episodeNumber))}`;\n    }\n    return null;\n};\nconst checkEpisodeUrl = async (url)=>{\n    try {\n        const response = await fetch(url, {\n            method: 'GET',\n            redirect: 'follow',\n            cache: 'no-store',\n            signal: AbortSignal.timeout(8000),\n            headers: {\n                Accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'\n            }\n        });\n        return response.ok;\n    } catch  {\n        return false;\n    }\n};\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const anilistId = searchParams.get('anilistId');\n    const totalEpisodesRaw = Number(searchParams.get('totalEpisodes') || 0);\n    const seasonRaw = Number(searchParams.get('season') || 1);\n    const template = \"https://vidsrc-embed.ru/embed/tv?tmdb={tmdb}&season={season}&episode={ep}\";\n    if (!anilistId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Missing anilistId parameter'\n        }, {\n            status: 400\n        });\n    }\n    const season = clamp(Number.isFinite(seasonRaw) && seasonRaw > 0 ? seasonRaw : 1, 1, 99);\n    const overrides = await readOverrides();\n    const entry = overrides?.[String(anilistId)] || null;\n    const overrideTmdb = typeof entry?.tmdb === 'string' || typeof entry?.tmdb === 'number' ? String(entry.tmdb) : null;\n    const overrideImdb = typeof entry?.imdb === 'string' || typeof entry?.imdb === 'number' ? String(entry.imdb) : null;\n    const overrideSeason = Number(entry?.season) > 0 ? Number(entry.season) : null;\n    const overrideEpisodes = Number(entry?.episodes) > 0 ? Number(entry.episodes) : null;\n    const overrideEpisodeMap = entry?.episodeMap && typeof entry.episodeMap === 'object' ? entry.episodeMap : null;\n    let ids = {\n        tmdb: null,\n        imdb: null,\n        totalEpisodes: null\n    };\n    const hasOverrideId = Boolean(overrideTmdb || overrideImdb);\n    if (!hasOverrideId) {\n        try {\n            ids = await resolveExternalIds(anilistId);\n        } catch (error) {\n            const message = error instanceof Error ? error.message : 'Failed to resolve external IDs';\n            if (String(message).includes('429')) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    episodes: [],\n                    tmdb: null,\n                    imdb: null,\n                    season: overrideSeason || season,\n                    warning: 'AniList is rate-limited right now (429). Please retry in a minute, or set NEXT_PUBLIC_VIDSRC_ID_OVERRIDES for this AniList ID.'\n                }, {\n                    status: 200\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                episodes: [],\n                tmdb: null,\n                imdb: null,\n                season: overrideSeason || season,\n                warning: message\n            }, {\n                status: 200\n            });\n        }\n    }\n    const tmdb = overrideTmdb || ids.tmdb || null;\n    const imdb = overrideImdb || ids.imdb || null;\n    const effectiveSeason = overrideSeason || season;\n    if (!tmdb && !imdb) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            episodes: [],\n            tmdb: null,\n            imdb: null,\n            season: effectiveSeason,\n            warning: 'No TMDB/IMDb mapping found. Add NEXT_PUBLIC_VIDSRC_ID_OVERRIDES for this AniList ID.'\n        }, {\n            status: 200\n        });\n    }\n    const resolvedTotalEpisodes = Number.isFinite(totalEpisodesRaw) && totalEpisodesRaw > 0 ? totalEpisodesRaw : ids?.totalEpisodes || 24;\n    const maxEpisodes = clamp(overrideEpisodes || resolvedTotalEpisodes, 1, 60);\n    const episodes = [];\n    let missesAfterFirstHit = 0;\n    const mapProviderEpisode = (episodeNumber)=>{\n        if (!overrideEpisodeMap) return episodeNumber;\n        const mapped = Number(overrideEpisodeMap[String(episodeNumber)]);\n        return Number.isFinite(mapped) && mapped > 0 ? mapped : episodeNumber;\n    };\n    for(let episodeNumber = 1; episodeNumber <= maxEpisodes; episodeNumber += 1){\n        const providerEpisode = mapProviderEpisode(episodeNumber);\n        const url = template ? template.replaceAll('{id}', encodeURIComponent(`vidsrc-${anilistId}`)).replaceAll('{episodeId}', encodeURIComponent(String(providerEpisode))).replaceAll('{ep}', encodeURIComponent(String(providerEpisode))).replaceAll('{server}', encodeURIComponent('')).replaceAll('{category}', encodeURIComponent('')).replaceAll('{anilist}', encodeURIComponent(String(anilistId))).replaceAll('{tmdb}', encodeURIComponent(tmdb || '')).replaceAll('{imdb}', encodeURIComponent(imdb || '')).replaceAll('{season}', encodeURIComponent(String(effectiveSeason))) : buildDefaultVidSrcUrl({\n            tmdb,\n            imdb,\n            season: effectiveSeason,\n            episodeNumber: providerEpisode\n        });\n        if (!url) continue;\n        const available = await checkEpisodeUrl(url);\n        if (!available) {\n            if (episodes.length > 0) {\n                missesAfterFirstHit += 1;\n                if (missesAfterFirstHit >= 6) break;\n            }\n            continue;\n        }\n        missesAfterFirstHit = 0;\n        episodes.push({\n            id: `vidsrc-${anilistId}-${episodeNumber}`,\n            number: episodeNumber,\n            providerEpisode,\n            title: `Episode ${episodeNumber}`,\n            image: null\n        });\n    }\n    if (episodes.length === 0 && hasOverrideId) {\n        for(let episodeNumber = 1; episodeNumber <= maxEpisodes; episodeNumber += 1){\n            const providerEpisode = mapProviderEpisode(episodeNumber);\n            episodes.push({\n                id: `vidsrc-${anilistId}-${episodeNumber}`,\n                number: episodeNumber,\n                providerEpisode,\n                title: `Episode ${episodeNumber}`,\n                image: null\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            episodes,\n            tmdb,\n            imdb,\n            season: effectiveSeason,\n            warning: 'VidSrc availability could not be pre-verified from server, showing episode list from override mapping.'\n        }, {\n            status: 200\n        });\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        episodes,\n        tmdb,\n        imdb,\n        season: effectiveSeason\n    }, {\n        status: 200\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb3ZpZGVyL3ZpZHNyYy9lcGlzb2Rlcy9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ2Q7QUFDTDtBQUVqQixNQUFNRyxVQUFVLFNBQVM7QUFFaEMsTUFBTUMsUUFBUSxDQUFDQyxPQUFPQyxLQUFLQyxNQUFRQyxLQUFLRCxHQUFHLENBQUNELEtBQUtFLEtBQUtGLEdBQUcsQ0FBQ0MsS0FBS0Y7QUFDL0QsTUFBTUksUUFBUSxDQUFDQyxLQUFPLElBQUlDLFFBQVEsQ0FBQ0MsVUFBWUMsV0FBV0QsU0FBU0Y7QUFDbkUsTUFBTUksaUJBQWlCWixnREFBUyxDQUFDYyxRQUFRQyxHQUFHLElBQUksVUFBVTtBQUUxRCxNQUFNQyxjQUFjO0FBRXBCLE1BQU1DLGdCQUFnQixDQUFDOzs7Ozs7Ozs7OztBQVd2QixDQUFDO0FBRUQsTUFBTUMsZ0JBQWdCLENBQUNDO0lBQ3JCLElBQUksQ0FBQ0EsTUFBTSxPQUFPO0lBQ2xCLE1BQU1oQixRQUFRaUIsT0FBT0Q7SUFDckIsTUFBTUUsVUFBVWxCLE1BQU1tQixLQUFLLENBQUMsMENBQTBDLENBQUMsRUFBRTtJQUN6RSxJQUFJRCxTQUFTLE9BQU9BO0lBQ3BCLE1BQU1FLFVBQVVwQixNQUFNbUIsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEVBQUU7SUFDaEQsT0FBT0MsV0FBVztBQUNwQjtBQUVBLE1BQU1DLGdCQUFnQixDQUFDTDtJQUNyQixJQUFJLENBQUNBLE1BQU0sT0FBTztJQUNsQixNQUFNaEIsUUFBUWlCLE9BQU9EO0lBQ3JCLE1BQU1FLFVBQVVsQixNQUFNbUIsS0FBSyxDQUFDLCtCQUErQixDQUFDLEVBQUU7SUFDOUQsSUFBSUQsU0FBUyxPQUFPQTtJQUNwQixNQUFNQyxRQUFRbkIsTUFBTW1CLEtBQUssQ0FBQyxlQUFlLENBQUMsRUFBRTtJQUM1QyxPQUFPQSxTQUFTO0FBQ2xCO0FBRUEsTUFBTUcsbUJBQW1CO0lBQ3ZCLE1BQU1DLE1BQU1aLCtEQUEyQztJQUN2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QVc7WUFDZCxJQUFJOUMsU0FBUytDLE1BQU0sR0FBRyxHQUFHO2dCQUN2QkwsdUJBQXVCO2dCQUN2QixJQUFJQSx1QkFBdUIsR0FBRztZQUNoQztZQUNBO1FBQ0Y7UUFFQUEsc0JBQXNCO1FBRXRCMUMsU0FBU2dELElBQUksQ0FBQztZQUNadEUsSUFBSSxDQUFDLE9BQU8sRUFBRVosVUFBVSxDQUFDLEVBQUVxQyxlQUFlO1lBQzFDOEMsUUFBUTlDO1lBQ1IwQztZQUNBSyxPQUFPLENBQUMsUUFBUSxFQUFFL0MsZUFBZTtZQUNqQ2dELE9BQU87UUFDVDtJQUNGO0lBRUEsSUFBSW5ELFNBQVMrQyxNQUFNLEtBQUssS0FBS1osZUFBZTtRQUMxQyxJQUFLLElBQUloQyxnQkFBZ0IsR0FBR0EsaUJBQWlCc0MsYUFBYXRDLGlCQUFpQixFQUFHO1lBQzVFLE1BQU0wQyxrQkFBa0JGLG1CQUFtQnhDO1lBQzNDSCxTQUFTZ0QsSUFBSSxDQUFDO2dCQUNadEUsSUFBSSxDQUFDLE9BQU8sRUFBRVosVUFBVSxDQUFDLEVBQUVxQyxlQUFlO2dCQUMxQzhDLFFBQVE5QztnQkFDUjBDO2dCQUNBSyxPQUFPLENBQUMsUUFBUSxFQUFFL0MsZUFBZTtnQkFDakNnRCxPQUFPO1lBQ1Q7UUFDRjtRQUVBLE9BQU85SCxxREFBWUEsQ0FBQzJELElBQUksQ0FDdEI7WUFDRWdCO1lBQ0FSO1lBQ0FDO1lBQ0FpQixRQUFRNkI7WUFDUkQsU0FBUztRQUNYLEdBQ0E7WUFBRXpELFFBQVE7UUFBSTtJQUVsQjtJQUVBLE9BQU94RCxxREFBWUEsQ0FBQzJELElBQUksQ0FBQztRQUFFZ0I7UUFBVVI7UUFBTUM7UUFBTWlCLFFBQVE2QjtJQUFnQixHQUFHO1FBQUUxRCxRQUFRO0lBQUk7QUFDNUYiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcMjMwMDg0MTdcXERvY3VtZW50c1xcR2l0SHViXFxBbmlUZWFtc1xcYXBwXFxhcGlcXHByb3ZpZGVyXFx2aWRzcmNcXGVwaXNvZGVzXFxyb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcclxuXHJcbmNvbnN0IGNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XHJcbmNvbnN0IHNsZWVwID0gKG1zKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG5jb25zdCBPVkVSUklERVNfRklMRSA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnY29uZmlnJywgJ3ZpZHNyYy1vdmVycmlkZXMuanNvbicpO1xyXG5cclxuY29uc3QgQU5JTElTVF9BUEkgPSAnaHR0cHM6Ly9ncmFwaHFsLmFuaWxpc3QuY28nO1xyXG5cclxuY29uc3QgQU5JTElTVF9RVUVSWSA9IGBcclxuICBxdWVyeSAoJGlkOiBJbnQpIHtcclxuICAgIE1lZGlhKGlkOiAkaWQsIHR5cGU6IEFOSU1FKSB7XHJcbiAgICAgIGVwaXNvZGVzXHJcbiAgICAgIGV4dGVybmFsTGlua3Mge1xyXG4gICAgICAgIGlkXHJcbiAgICAgICAgc2l0ZVxyXG4gICAgICAgIHVybFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5gO1xyXG5cclxuY29uc3QgZXh0cmFjdFRtZGJJZCA9ICh0ZXh0KSA9PiB7XHJcbiAgaWYgKCF0ZXh0KSByZXR1cm4gbnVsbDtcclxuICBjb25zdCB2YWx1ZSA9IFN0cmluZyh0ZXh0KTtcclxuICBjb25zdCBmcm9tVXJsID0gdmFsdWUubWF0Y2goL3RoZW1vdmllZGJcXC5vcmdcXC8oPzp0dnxtb3ZpZSlcXC8oXFxkKykvaSk/LlsxXTtcclxuICBpZiAoZnJvbVVybCkgcmV0dXJuIGZyb21Vcmw7XHJcbiAgY29uc3QgbnVtZXJpYyA9IHZhbHVlLm1hdGNoKC9cXGIoXFxkezIsfSlcXGIvKT8uWzFdO1xyXG4gIHJldHVybiBudW1lcmljIHx8IG51bGw7XHJcbn07XHJcblxyXG5jb25zdCBleHRyYWN0SW1kYklkID0gKHRleHQpID0+IHtcclxuICBpZiAoIXRleHQpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHZhbHVlID0gU3RyaW5nKHRleHQpO1xyXG4gIGNvbnN0IGZyb21VcmwgPSB2YWx1ZS5tYXRjaCgvaW1kYlxcLmNvbVxcL3RpdGxlXFwvKHR0XFxkKykvaSk/LlsxXTtcclxuICBpZiAoZnJvbVVybCkgcmV0dXJuIGZyb21Vcmw7XHJcbiAgY29uc3QgbWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXFxidHRcXGQrXFxiL2kpPy5bMF07XHJcbiAgcmV0dXJuIG1hdGNoIHx8IG51bGw7XHJcbn07XHJcblxyXG5jb25zdCByZWFkRW52T3ZlcnJpZGVzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHJhdyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1ZJRFNSQ19JRF9PVkVSUklERVM7XHJcbiAgaWYgKCFyYXcpIHJldHVybiB7fTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KTtcclxuICAgIHJldHVybiBwYXJzZWQgJiYgdHlwZW9mIHBhcnNlZCA9PT0gJ29iamVjdCcgPyBwYXJzZWQgOiB7fTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZWFkRmlsZU92ZXJyaWRlcyA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoT1ZFUlJJREVTX0ZJTEUsICd1dGY4Jyk7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdyk7XHJcbiAgICByZXR1cm4gcGFyc2VkICYmIHR5cGVvZiBwYXJzZWQgPT09ICdvYmplY3QnID8gcGFyc2VkIDoge307XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4ge307XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVhZE92ZXJyaWRlcyA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBbZmlsZU92ZXJyaWRlcywgZW52T3ZlcnJpZGVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIHJlYWRGaWxlT3ZlcnJpZGVzKCksXHJcbiAgICBQcm9taXNlLnJlc29sdmUocmVhZEVudk92ZXJyaWRlcygpKSxcclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLmZpbGVPdmVycmlkZXMsXHJcbiAgICAuLi5lbnZPdmVycmlkZXMsXHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IHJlc29sdmVFeHRlcm5hbElkcyA9IGFzeW5jIChhbmlsaXN0SWQpID0+IHtcclxuICBsZXQgcmVzcG9uc2UgPSBudWxsO1xyXG5cclxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSAzOyBhdHRlbXB0ICs9IDEpIHtcclxuICAgIHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goQU5JTElTVF9BUEksIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgY2FjaGU6ICduby1zdG9yZScsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBxdWVyeTogQU5JTElTVF9RVUVSWSxcclxuICAgICAgICB2YXJpYWJsZXM6IHsgaWQ6IE51bWJlcihhbmlsaXN0SWQpIH0sXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDQyOSB8fCBhdHRlbXB0ID09PSAzKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQW5pTGlzdCBtZXRhZGF0YSByZXF1ZXN0IGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgc2xlZXAoNTAwICogYXR0ZW1wdCk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5vaykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdBbmlMaXN0IG1ldGFkYXRhIHJlcXVlc3QgZmFpbGVkJyk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gIGNvbnN0IG1lZGlhID0gcGF5bG9hZD8uZGF0YT8uTWVkaWE7XHJcbiAgY29uc3QgbGlua3MgPSBBcnJheS5pc0FycmF5KG1lZGlhPy5leHRlcm5hbExpbmtzKSA/IG1lZGlhLmV4dGVybmFsTGlua3MgOiBbXTtcclxuXHJcbiAgbGV0IHRtZGIgPSBudWxsO1xyXG4gIGxldCBpbWRiID0gbnVsbDtcclxuXHJcbiAgZm9yIChjb25zdCBsaW5rIG9mIGxpbmtzKSB7XHJcbiAgICBjb25zdCBzaXRlID0gU3RyaW5nKGxpbms/LnNpdGUgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCB1cmwgPSBTdHJpbmcobGluaz8udXJsIHx8ICcnKTtcclxuICAgIGNvbnN0IGlkID0gU3RyaW5nKGxpbms/LmlkIHx8ICcnKTtcclxuXHJcbiAgICBpZiAoIXRtZGIgJiYgKHNpdGUuaW5jbHVkZXMoJ3RtZGInKSB8fCBzaXRlLmluY2x1ZGVzKCd0aGVtb3ZpZWRiJykpKSB7XHJcbiAgICAgIHRtZGIgPSBleHRyYWN0VG1kYklkKHVybCkgfHwgZXh0cmFjdFRtZGJJZChpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFpbWRiICYmIHNpdGUuaW5jbHVkZXMoJ2ltZGInKSkge1xyXG4gICAgICBpbWRiID0gZXh0cmFjdEltZGJJZCh1cmwpIHx8IGV4dHJhY3RJbWRiSWQoaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHRtZGIsXHJcbiAgICBpbWRiLFxyXG4gICAgdG90YWxFcGlzb2RlczogTnVtYmVyKG1lZGlhPy5lcGlzb2RlcykgPiAwID8gTnVtYmVyKG1lZGlhLmVwaXNvZGVzKSA6IG51bGwsXHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IGJ1aWxkVmlkU3JjVXJsID0gKHsgdGVtcGxhdGUsIGFuaWxpc3RJZCwgZXBpc29kZU51bWJlciB9KSA9PiB7XHJcbiAgY29uc3Qgc2FmZUFuaWxpc3QgPSBTdHJpbmcoYW5pbGlzdElkIHx8ICcnKS50cmltKCk7XHJcbiAgY29uc3Qgc2FmZUVwaXNvZGUgPSBTdHJpbmcoZXBpc29kZU51bWJlciB8fCAnJykudHJpbSgpO1xyXG5cclxuICByZXR1cm4gdGVtcGxhdGVcclxuICAgIC5yZXBsYWNlQWxsKCd7aWR9JywgZW5jb2RlVVJJQ29tcG9uZW50KGB2aWRzcmMtJHtzYWZlQW5pbGlzdH1gKSlcclxuICAgIC5yZXBsYWNlQWxsKCd7ZXBpc29kZUlkfScsIGVuY29kZVVSSUNvbXBvbmVudChzYWZlRXBpc29kZSkpXHJcbiAgICAucmVwbGFjZUFsbCgne2VwfScsIGVuY29kZVVSSUNvbXBvbmVudChzYWZlRXBpc29kZSkpXHJcbiAgICAucmVwbGFjZUFsbCgne3NlcnZlcn0nLCBlbmNvZGVVUklDb21wb25lbnQoJycpKVxyXG4gICAgLnJlcGxhY2VBbGwoJ3tjYXRlZ29yeX0nLCBlbmNvZGVVUklDb21wb25lbnQoJycpKVxyXG4gICAgLnJlcGxhY2VBbGwoJ3thbmlsaXN0fScsIGVuY29kZVVSSUNvbXBvbmVudChzYWZlQW5pbGlzdCkpXHJcbiAgICAucmVwbGFjZUFsbCgne3RtZGJ9JywgZW5jb2RlVVJJQ29tcG9uZW50KCcnKSlcclxuICAgIC5yZXBsYWNlQWxsKCd7aW1kYn0nLCBlbmNvZGVVUklDb21wb25lbnQoJycpKVxyXG4gICAgLnJlcGxhY2VBbGwoJ3tzZWFzb259JywgZW5jb2RlVVJJQ29tcG9uZW50KCcxJykpO1xyXG59O1xyXG5cclxuY29uc3QgYnVpbGREZWZhdWx0VmlkU3JjVXJsID0gKHsgdG1kYiwgaW1kYiwgc2Vhc29uLCBlcGlzb2RlTnVtYmVyIH0pID0+IHtcclxuICBpZiAodG1kYikge1xyXG4gICAgcmV0dXJuIGBodHRwczovL3ZpZHNyYy1lbWJlZC5ydS9lbWJlZC90dj90bWRiPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRtZGIpfSZzZWFzb249JHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHNlYXNvbikpfSZlcGlzb2RlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhlcGlzb2RlTnVtYmVyKSl9YDtcclxuICB9XHJcblxyXG4gIGlmIChpbWRiKSB7XHJcbiAgICByZXR1cm4gYGh0dHBzOi8vdmlkc3JjLWVtYmVkLnJ1L2VtYmVkL3R2P2ltZGI9JHtlbmNvZGVVUklDb21wb25lbnQoaW1kYil9JnNlYXNvbj0ke2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoc2Vhc29uKSl9JmVwaXNvZGU9JHtlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGVwaXNvZGVOdW1iZXIpKX1gO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0VwaXNvZGVVcmwgPSBhc3luYyAodXJsKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIHJlZGlyZWN0OiAnZm9sbG93JyxcclxuICAgICAgY2FjaGU6ICduby1zdG9yZScsXHJcbiAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg4MDAwKSxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIEFjY2VwdDogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LCovKjtxPTAuOCcsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2Uub2s7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XHJcbiAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gIGNvbnN0IGFuaWxpc3RJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2FuaWxpc3RJZCcpO1xyXG4gIGNvbnN0IHRvdGFsRXBpc29kZXNSYXcgPSBOdW1iZXIoc2VhcmNoUGFyYW1zLmdldCgndG90YWxFcGlzb2RlcycpIHx8IDApO1xyXG4gIGNvbnN0IHNlYXNvblJhdyA9IE51bWJlcihzZWFyY2hQYXJhbXMuZ2V0KCdzZWFzb24nKSB8fCAxKTtcclxuICBjb25zdCB0ZW1wbGF0ZSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1ZJRFNSQ19VUkw7XHJcblxyXG4gIGlmICghYW5pbGlzdElkKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgYW5pbGlzdElkIHBhcmFtZXRlcicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHNlYXNvbiA9IGNsYW1wKE51bWJlci5pc0Zpbml0ZShzZWFzb25SYXcpICYmIHNlYXNvblJhdyA+IDAgPyBzZWFzb25SYXcgOiAxLCAxLCA5OSk7XHJcbiAgY29uc3Qgb3ZlcnJpZGVzID0gYXdhaXQgcmVhZE92ZXJyaWRlcygpO1xyXG4gIGNvbnN0IGVudHJ5ID0gb3ZlcnJpZGVzPy5bU3RyaW5nKGFuaWxpc3RJZCldIHx8IG51bGw7XHJcblxyXG4gIGNvbnN0IG92ZXJyaWRlVG1kYiA9IHR5cGVvZiBlbnRyeT8udG1kYiA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGVudHJ5Py50bWRiID09PSAnbnVtYmVyJ1xyXG4gICAgPyBTdHJpbmcoZW50cnkudG1kYilcclxuICAgIDogbnVsbDtcclxuICBjb25zdCBvdmVycmlkZUltZGIgPSB0eXBlb2YgZW50cnk/LmltZGIgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBlbnRyeT8uaW1kYiA9PT0gJ251bWJlcidcclxuICAgID8gU3RyaW5nKGVudHJ5LmltZGIpXHJcbiAgICA6IG51bGw7XHJcbiAgY29uc3Qgb3ZlcnJpZGVTZWFzb24gPSBOdW1iZXIoZW50cnk/LnNlYXNvbikgPiAwID8gTnVtYmVyKGVudHJ5LnNlYXNvbikgOiBudWxsO1xyXG4gIGNvbnN0IG92ZXJyaWRlRXBpc29kZXMgPSBOdW1iZXIoZW50cnk/LmVwaXNvZGVzKSA+IDAgPyBOdW1iZXIoZW50cnkuZXBpc29kZXMpIDogbnVsbDtcclxuICBjb25zdCBvdmVycmlkZUVwaXNvZGVNYXAgPSBlbnRyeT8uZXBpc29kZU1hcCAmJiB0eXBlb2YgZW50cnkuZXBpc29kZU1hcCA9PT0gJ29iamVjdCdcclxuICAgID8gZW50cnkuZXBpc29kZU1hcFxyXG4gICAgOiBudWxsO1xyXG5cclxuICBsZXQgaWRzID0geyB0bWRiOiBudWxsLCBpbWRiOiBudWxsLCB0b3RhbEVwaXNvZGVzOiBudWxsIH07XHJcbiAgY29uc3QgaGFzT3ZlcnJpZGVJZCA9IEJvb2xlYW4ob3ZlcnJpZGVUbWRiIHx8IG92ZXJyaWRlSW1kYik7XHJcblxyXG4gIGlmICghaGFzT3ZlcnJpZGVJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWRzID0gYXdhaXQgcmVzb2x2ZUV4dGVybmFsSWRzKGFuaWxpc3RJZCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHJlc29sdmUgZXh0ZXJuYWwgSURzJztcclxuXHJcbiAgICAgIGlmIChTdHJpbmcobWVzc2FnZSkuaW5jbHVkZXMoJzQyOScpKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlcGlzb2RlczogW10sXHJcbiAgICAgICAgICAgIHRtZGI6IG51bGwsXHJcbiAgICAgICAgICAgIGltZGI6IG51bGwsXHJcbiAgICAgICAgICAgIHNlYXNvbjogb3ZlcnJpZGVTZWFzb24gfHwgc2Vhc29uLFxyXG4gICAgICAgICAgICB3YXJuaW5nOiAnQW5pTGlzdCBpcyByYXRlLWxpbWl0ZWQgcmlnaHQgbm93ICg0MjkpLiBQbGVhc2UgcmV0cnkgaW4gYSBtaW51dGUsIG9yIHNldCBORVhUX1BVQkxJQ19WSURTUkNfSURfT1ZFUlJJREVTIGZvciB0aGlzIEFuaUxpc3QgSUQuJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZXBpc29kZXM6IFtdLFxyXG4gICAgICAgICAgdG1kYjogbnVsbCxcclxuICAgICAgICAgIGltZGI6IG51bGwsXHJcbiAgICAgICAgICBzZWFzb246IG92ZXJyaWRlU2Vhc29uIHx8IHNlYXNvbixcclxuICAgICAgICAgIHdhcm5pbmc6IG1lc3NhZ2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHRtZGIgPSBvdmVycmlkZVRtZGIgfHwgaWRzLnRtZGIgfHwgbnVsbDtcclxuICBjb25zdCBpbWRiID0gb3ZlcnJpZGVJbWRiIHx8IGlkcy5pbWRiIHx8IG51bGw7XHJcbiAgY29uc3QgZWZmZWN0aXZlU2Vhc29uID0gb3ZlcnJpZGVTZWFzb24gfHwgc2Vhc29uO1xyXG5cclxuICBpZiAoIXRtZGIgJiYgIWltZGIpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIGVwaXNvZGVzOiBbXSxcclxuICAgICAgICB0bWRiOiBudWxsLFxyXG4gICAgICAgIGltZGI6IG51bGwsXHJcbiAgICAgICAgc2Vhc29uOiBlZmZlY3RpdmVTZWFzb24sXHJcbiAgICAgICAgd2FybmluZzogJ05vIFRNREIvSU1EYiBtYXBwaW5nIGZvdW5kLiBBZGQgTkVYVF9QVUJMSUNfVklEU1JDX0lEX09WRVJSSURFUyBmb3IgdGhpcyBBbmlMaXN0IElELicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlc29sdmVkVG90YWxFcGlzb2RlcyA9IE51bWJlci5pc0Zpbml0ZSh0b3RhbEVwaXNvZGVzUmF3KSAmJiB0b3RhbEVwaXNvZGVzUmF3ID4gMFxyXG4gICAgPyB0b3RhbEVwaXNvZGVzUmF3XHJcbiAgICA6IChpZHM/LnRvdGFsRXBpc29kZXMgfHwgMjQpO1xyXG5cclxuICBjb25zdCBtYXhFcGlzb2RlcyA9IGNsYW1wKG92ZXJyaWRlRXBpc29kZXMgfHwgcmVzb2x2ZWRUb3RhbEVwaXNvZGVzLCAxLCA2MCk7XHJcbiAgY29uc3QgZXBpc29kZXMgPSBbXTtcclxuICBsZXQgbWlzc2VzQWZ0ZXJGaXJzdEhpdCA9IDA7XHJcblxyXG4gIGNvbnN0IG1hcFByb3ZpZGVyRXBpc29kZSA9IChlcGlzb2RlTnVtYmVyKSA9PiB7XHJcbiAgICBpZiAoIW92ZXJyaWRlRXBpc29kZU1hcCkgcmV0dXJuIGVwaXNvZGVOdW1iZXI7XHJcbiAgICBjb25zdCBtYXBwZWQgPSBOdW1iZXIob3ZlcnJpZGVFcGlzb2RlTWFwW1N0cmluZyhlcGlzb2RlTnVtYmVyKV0pO1xyXG4gICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShtYXBwZWQpICYmIG1hcHBlZCA+IDAgPyBtYXBwZWQgOiBlcGlzb2RlTnVtYmVyO1xyXG4gIH07XHJcblxyXG4gIGZvciAobGV0IGVwaXNvZGVOdW1iZXIgPSAxOyBlcGlzb2RlTnVtYmVyIDw9IG1heEVwaXNvZGVzOyBlcGlzb2RlTnVtYmVyICs9IDEpIHtcclxuICAgIGNvbnN0IHByb3ZpZGVyRXBpc29kZSA9IG1hcFByb3ZpZGVyRXBpc29kZShlcGlzb2RlTnVtYmVyKTtcclxuICAgIGNvbnN0IHVybCA9IHRlbXBsYXRlXHJcbiAgICAgID8gdGVtcGxhdGVcclxuICAgICAgICAgIC5yZXBsYWNlQWxsKCd7aWR9JywgZW5jb2RlVVJJQ29tcG9uZW50KGB2aWRzcmMtJHthbmlsaXN0SWR9YCkpXHJcbiAgICAgICAgICAucmVwbGFjZUFsbCgne2VwaXNvZGVJZH0nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3ZpZGVyRXBpc29kZSkpKVxyXG4gICAgICAgICAgLnJlcGxhY2VBbGwoJ3tlcH0nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHByb3ZpZGVyRXBpc29kZSkpKVxyXG4gICAgICAgICAgLnJlcGxhY2VBbGwoJ3tzZXJ2ZXJ9JywgZW5jb2RlVVJJQ29tcG9uZW50KCcnKSlcclxuICAgICAgICAgIC5yZXBsYWNlQWxsKCd7Y2F0ZWdvcnl9JywgZW5jb2RlVVJJQ29tcG9uZW50KCcnKSlcclxuICAgICAgICAgIC5yZXBsYWNlQWxsKCd7YW5pbGlzdH0nLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGFuaWxpc3RJZCkpKVxyXG4gICAgICAgICAgLnJlcGxhY2VBbGwoJ3t0bWRifScsIGVuY29kZVVSSUNvbXBvbmVudCh0bWRiIHx8ICcnKSlcclxuICAgICAgICAgIC5yZXBsYWNlQWxsKCd7aW1kYn0nLCBlbmNvZGVVUklDb21wb25lbnQoaW1kYiB8fCAnJykpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlQWxsKCd7c2Vhc29ufScsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZWZmZWN0aXZlU2Vhc29uKSkpXHJcbiAgICAgIDogYnVpbGREZWZhdWx0VmlkU3JjVXJsKHsgdG1kYiwgaW1kYiwgc2Vhc29uOiBlZmZlY3RpdmVTZWFzb24sIGVwaXNvZGVOdW1iZXI6IHByb3ZpZGVyRXBpc29kZSB9KTtcclxuXHJcbiAgICBpZiAoIXVybCkgY29udGludWU7XHJcblxyXG4gICAgY29uc3QgYXZhaWxhYmxlID0gYXdhaXQgY2hlY2tFcGlzb2RlVXJsKHVybCk7XHJcblxyXG4gICAgaWYgKCFhdmFpbGFibGUpIHtcclxuICAgICAgaWYgKGVwaXNvZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBtaXNzZXNBZnRlckZpcnN0SGl0ICs9IDE7XHJcbiAgICAgICAgaWYgKG1pc3Nlc0FmdGVyRmlyc3RIaXQgPj0gNikgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgbWlzc2VzQWZ0ZXJGaXJzdEhpdCA9IDA7XHJcblxyXG4gICAgZXBpc29kZXMucHVzaCh7XHJcbiAgICAgIGlkOiBgdmlkc3JjLSR7YW5pbGlzdElkfS0ke2VwaXNvZGVOdW1iZXJ9YCxcclxuICAgICAgbnVtYmVyOiBlcGlzb2RlTnVtYmVyLFxyXG4gICAgICBwcm92aWRlckVwaXNvZGUsXHJcbiAgICAgIHRpdGxlOiBgRXBpc29kZSAke2VwaXNvZGVOdW1iZXJ9YCxcclxuICAgICAgaW1hZ2U6IG51bGwsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGlmIChlcGlzb2Rlcy5sZW5ndGggPT09IDAgJiYgaGFzT3ZlcnJpZGVJZCkge1xyXG4gICAgZm9yIChsZXQgZXBpc29kZU51bWJlciA9IDE7IGVwaXNvZGVOdW1iZXIgPD0gbWF4RXBpc29kZXM7IGVwaXNvZGVOdW1iZXIgKz0gMSkge1xyXG4gICAgICBjb25zdCBwcm92aWRlckVwaXNvZGUgPSBtYXBQcm92aWRlckVwaXNvZGUoZXBpc29kZU51bWJlcik7XHJcbiAgICAgIGVwaXNvZGVzLnB1c2goe1xyXG4gICAgICAgIGlkOiBgdmlkc3JjLSR7YW5pbGlzdElkfS0ke2VwaXNvZGVOdW1iZXJ9YCxcclxuICAgICAgICBudW1iZXI6IGVwaXNvZGVOdW1iZXIsXHJcbiAgICAgICAgcHJvdmlkZXJFcGlzb2RlLFxyXG4gICAgICAgIHRpdGxlOiBgRXBpc29kZSAke2VwaXNvZGVOdW1iZXJ9YCxcclxuICAgICAgICBpbWFnZTogbnVsbCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgZXBpc29kZXMsXHJcbiAgICAgICAgdG1kYixcclxuICAgICAgICBpbWRiLFxyXG4gICAgICAgIHNlYXNvbjogZWZmZWN0aXZlU2Vhc29uLFxyXG4gICAgICAgIHdhcm5pbmc6ICdWaWRTcmMgYXZhaWxhYmlsaXR5IGNvdWxkIG5vdCBiZSBwcmUtdmVyaWZpZWQgZnJvbSBzZXJ2ZXIsIHNob3dpbmcgZXBpc29kZSBsaXN0IGZyb20gb3ZlcnJpZGUgbWFwcGluZy4nLFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcGlzb2RlcywgdG1kYiwgaW1kYiwgc2Vhc29uOiBlZmZlY3RpdmVTZWFzb24gfSwgeyBzdGF0dXM6IDIwMCB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZnMiLCJwYXRoIiwicnVudGltZSIsImNsYW1wIiwidmFsdWUiLCJtaW4iLCJtYXgiLCJNYXRoIiwic2xlZXAiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIk9WRVJSSURFU19GSUxFIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJBTklMSVNUX0FQSSIsIkFOSUxJU1RfUVVFUlkiLCJleHRyYWN0VG1kYklkIiwidGV4dCIsIlN0cmluZyIsImZyb21VcmwiLCJtYXRjaCIsIm51bWVyaWMiLCJleHRyYWN0SW1kYklkIiwicmVhZEVudk92ZXJyaWRlcyIsInJhdyIsImVudiIsIk5FWFRfUFVCTElDX1ZJRFNSQ19JRF9PVkVSUklERVMiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZU92ZXJyaWRlcyIsInJlYWRGaWxlIiwicmVhZE92ZXJyaWRlcyIsImZpbGVPdmVycmlkZXMiLCJlbnZPdmVycmlkZXMiLCJhbGwiLCJyZXNvbHZlRXh0ZXJuYWxJZHMiLCJhbmlsaXN0SWQiLCJyZXNwb25zZSIsImF0dGVtcHQiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJjYWNoZSIsImJvZHkiLCJzdHJpbmdpZnkiLCJxdWVyeSIsInZhcmlhYmxlcyIsImlkIiwiTnVtYmVyIiwib2siLCJzdGF0dXMiLCJFcnJvciIsInBheWxvYWQiLCJqc29uIiwibWVkaWEiLCJkYXRhIiwiTWVkaWEiLCJsaW5rcyIsIkFycmF5IiwiaXNBcnJheSIsImV4dGVybmFsTGlua3MiLCJ0bWRiIiwiaW1kYiIsImxpbmsiLCJzaXRlIiwidG9Mb3dlckNhc2UiLCJ1cmwiLCJpbmNsdWRlcyIsInRvdGFsRXBpc29kZXMiLCJlcGlzb2RlcyIsImJ1aWxkVmlkU3JjVXJsIiwidGVtcGxhdGUiLCJlcGlzb2RlTnVtYmVyIiwic2FmZUFuaWxpc3QiLCJ0cmltIiwic2FmZUVwaXNvZGUiLCJyZXBsYWNlQWxsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYnVpbGREZWZhdWx0VmlkU3JjVXJsIiwic2Vhc29uIiwiY2hlY2tFcGlzb2RlVXJsIiwicmVkaXJlY3QiLCJzaWduYWwiLCJBYm9ydFNpZ25hbCIsInRpbWVvdXQiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwiZ2V0IiwidG90YWxFcGlzb2Rlc1JhdyIsInNlYXNvblJhdyIsIk5FWFRfUFVCTElDX1ZJRFNSQ19VUkwiLCJlcnJvciIsImlzRmluaXRlIiwib3ZlcnJpZGVzIiwiZW50cnkiLCJvdmVycmlkZVRtZGIiLCJvdmVycmlkZUltZGIiLCJvdmVycmlkZVNlYXNvbiIsIm92ZXJyaWRlRXBpc29kZXMiLCJvdmVycmlkZUVwaXNvZGVNYXAiLCJlcGlzb2RlTWFwIiwiaWRzIiwiaGFzT3ZlcnJpZGVJZCIsIkJvb2xlYW4iLCJtZXNzYWdlIiwid2FybmluZyIsImVmZmVjdGl2ZVNlYXNvbiIsInJlc29sdmVkVG90YWxFcGlzb2RlcyIsIm1heEVwaXNvZGVzIiwibWlzc2VzQWZ0ZXJGaXJzdEhpdCIsIm1hcFByb3ZpZGVyRXBpc29kZSIsIm1hcHBlZCIsInByb3ZpZGVyRXBpc29kZSIsImF2YWlsYWJsZSIsImxlbmd0aCIsInB1c2giLCJudW1iZXIiLCJ0aXRsZSIsImltYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/provider/vidsrc/episodes/route.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&page=%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute.js&appDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&page=%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute.js&appDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_23008417_Documents_GitHub_AniTeams_app_api_provider_vidsrc_episodes_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/provider/vidsrc/episodes/route.js */ \"(rsc)/./app/api/provider/vidsrc/episodes/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/provider/vidsrc/episodes/route\",\n        pathname: \"/api/provider/vidsrc/episodes\",\n        filename: \"route\",\n        bundlePath: \"app/api/provider/vidsrc/episodes/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\23008417\\\\Documents\\\\GitHub\\\\AniTeams\\\\app\\\\api\\\\provider\\\\vidsrc\\\\episodes\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_23008417_Documents_GitHub_AniTeams_app_api_provider_vidsrc_episodes_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwcm92aWRlciUyRnZpZHNyYyUyRmVwaXNvZGVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm92aWRlciUyRnZpZHNyYyUyRmVwaXNvZGVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvdmlkZXIlMkZ2aWRzcmMlMkZlcGlzb2RlcyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUMyMzAwODQxNyU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q0FuaVRlYW1zJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUMyMzAwODQxNyU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q0FuaVRlYW1zJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNnRDtBQUM3SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcMjMwMDg0MTdcXFxcRG9jdW1lbnRzXFxcXEdpdEh1YlxcXFxBbmlUZWFtc1xcXFxhcHBcXFxcYXBpXFxcXHByb3ZpZGVyXFxcXHZpZHNyY1xcXFxlcGlzb2Rlc1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvdmlkZXIvdmlkc3JjL2VwaXNvZGVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvdmlkZXIvdmlkc3JjL2VwaXNvZGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm92aWRlci92aWRzcmMvZXBpc29kZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFwyMzAwODQxN1xcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXEFuaVRlYW1zXFxcXGFwcFxcXFxhcGlcXFxccHJvdmlkZXJcXFxcdmlkc3JjXFxcXGVwaXNvZGVzXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&page=%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute.js&appDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&page=%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprovider%2Fvidsrc%2Fepisodes%2Froute.js&appDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C23008417%5CDocuments%5CGitHub%5CAniTeams&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();