"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/aniwatch";
exports.ids = ["vendor-chunks/aniwatch"];
exports.modules = {

/***/ "(rsc)/./node_modules/aniwatch/dist/index.js":
/*!*********************************************!*\
  !*** ./node_modules/aniwatch/dist/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HiAnime: () => (/* binding */ hianime_exports),\n/* harmony export */   HiAnimeError: () => (/* binding */ HiAnimeError)\n/* harmony export */ });\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cheerio */ \"(rsc)/./node_modules/cheerio/dist/esm/index.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/index.js\");\n/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pino */ \"(rsc)/./node_modules/pino/pino.js\");\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto-js */ \"(rsc)/./node_modules/crypto-js/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! crypto */ \"crypto\");\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/hianime/hianime.ts\nvar hianime_exports = {};\n__export(hianime_exports, {\n  AZ_LIST_SORT_OPTIONS: () => AZ_LIST_SORT_OPTIONS,\n  SEARCH_PAGE_FILTERS: () => SEARCH_PAGE_FILTERS,\n  Scraper: () => Scraper,\n  Servers: () => Servers\n});\n\n// src/hianime/scrapers/homePage.ts\n\n\n// src/config/client.ts\n\n\n// src/utils/constants.ts\nvar ACCEPT_ENCODING_HEADER = \"gzip, deflate, br\";\nvar USER_AGENT_HEADER = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36\";\nvar ACCEPT_HEADER = \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\";\nvar DOMAIN = \"hianimez.to\";\nvar SRC_BASE_URL = `https://${DOMAIN}`;\nvar SRC_AJAX_URL = `${SRC_BASE_URL}/ajax`;\nvar SRC_HOME_URL = `${SRC_BASE_URL}/home`;\nvar SRC_SEARCH_URL = `${SRC_BASE_URL}/search`;\nvar SEARCH_PAGE_FILTERS = {\n  GENRES_ID_MAP: {\n    action: 1,\n    adventure: 2,\n    cars: 3,\n    comedy: 4,\n    dementia: 5,\n    demons: 6,\n    drama: 8,\n    ecchi: 9,\n    fantasy: 10,\n    game: 11,\n    harem: 35,\n    historical: 13,\n    horror: 14,\n    isekai: 44,\n    josei: 43,\n    kids: 15,\n    magic: 16,\n    \"martial-arts\": 17,\n    mecha: 18,\n    military: 38,\n    music: 19,\n    mystery: 7,\n    parody: 20,\n    police: 39,\n    psychological: 40,\n    romance: 22,\n    samurai: 21,\n    school: 23,\n    \"sci-fi\": 24,\n    seinen: 42,\n    shoujo: 25,\n    \"shoujo-ai\": 26,\n    shounen: 27,\n    \"shounen-ai\": 28,\n    \"slice-of-life\": 36,\n    space: 29,\n    sports: 30,\n    \"super-power\": 31,\n    supernatural: 37,\n    thriller: 41,\n    vampire: 32\n  },\n  TYPE_ID_MAP: {\n    all: 0,\n    movie: 1,\n    tv: 2,\n    ova: 3,\n    ona: 4,\n    special: 5,\n    music: 6\n  },\n  STATUS_ID_MAP: {\n    all: 0,\n    \"finished-airing\": 1,\n    \"currently-airing\": 2,\n    \"not-yet-aired\": 3\n  },\n  RATED_ID_MAP: {\n    all: 0,\n    g: 1,\n    pg: 2,\n    \"pg-13\": 3,\n    r: 4,\n    \"r+\": 5,\n    rx: 6\n  },\n  SCORE_ID_MAP: {\n    all: 0,\n    appalling: 1,\n    horrible: 2,\n    \"very-bad\": 3,\n    bad: 4,\n    average: 5,\n    fine: 6,\n    good: 7,\n    \"very-good\": 8,\n    great: 9,\n    masterpiece: 10\n  },\n  SEASON_ID_MAP: {\n    all: 0,\n    spring: 1,\n    summer: 2,\n    fall: 3,\n    winter: 4\n  },\n  LANGUAGE_ID_MAP: {\n    all: 0,\n    sub: 1,\n    dub: 2,\n    \"sub-&-dub\": 3\n  },\n  SORT_ID_MAP: {\n    default: \"default\",\n    \"recently-added\": \"recently_added\",\n    \"recently-updated\": \"recently_updated\",\n    score: \"score\",\n    \"name-a-z\": \"name_az\",\n    \"released-date\": \"released_date\",\n    \"most-watched\": \"most_watched\"\n  }\n};\nvar AZ_LIST_SORT_OPTIONS = {\n  all: true,\n  other: true,\n  \"0-9\": true,\n  a: true,\n  b: true,\n  c: true,\n  d: true,\n  e: true,\n  f: true,\n  g: true,\n  h: true,\n  i: true,\n  j: true,\n  k: true,\n  l: true,\n  m: true,\n  n: true,\n  o: true,\n  p: true,\n  q: true,\n  r: true,\n  s: true,\n  t: true,\n  u: true,\n  v: true,\n  w: true,\n  x: true,\n  y: true,\n  z: true\n};\n\n// src/config/client.ts\nvar clientConfig = {\n  timeout: 8e3,\n  // baseURL: SRC_BASE_URL,\n  headers: {\n    Accept: ACCEPT_HEADER,\n    \"User-Agent\": USER_AGENT_HEADER,\n    \"Accept-Encoding\": ACCEPT_ENCODING_HEADER\n  }\n};\nvar client = axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create(clientConfig);\n\n// src/hianime/error.ts\n\n\n// src/config/logger.ts\n\nfunction isDevEnv() {\n  return  true || 0;\n}\nvar loggerOptions = {\n  level: \"info\",\n  transport: isDevEnv() ? {\n    target: \"pino-pretty\",\n    options: {\n      colorize: true,\n      translateTime: \"SYS:standard\"\n    }\n  } : void 0,\n  formatters: {\n    level(label) {\n      return {\n        level: label.toUpperCase(),\n        context: \"aniwatch-pkg\"\n      };\n    }\n  },\n  redact: !isDevEnv() ? [\"hostname\"] : [],\n  timestamp: pino__WEBPACK_IMPORTED_MODULE_2__.pino.stdTimeFunctions.isoTime\n};\nvar log = (0,pino__WEBPACK_IMPORTED_MODULE_2__.pino)(loggerOptions);\n\n// src/hianime/error.ts\nvar ANSI_ESC_CODE_COLOR_RED = \"\\x1B[31m\";\nvar ANSI_ESC_CODE_COLOR_RESET = \"\\x1B[0m\";\nvar HiAnimeError = class _HiAnimeError extends Error {\n  static DEFAULT_ERROR_STATUS = 500;\n  static DEFAULT_ERROR_MESSAGE = \"Something went wrong\";\n  scraper = _HiAnimeError.DEFAULT_ERROR_MESSAGE;\n  status = _HiAnimeError.DEFAULT_ERROR_STATUS;\n  constructor(errMsg, scraperName, status) {\n    super(`${scraperName}: ${errMsg}`);\n    this.name = _HiAnimeError.name;\n    this.scraper = scraperName;\n    if (status) {\n      this.status = status >= 400 && status < 600 ? status : _HiAnimeError.DEFAULT_ERROR_STATUS;\n    }\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, _HiAnimeError);\n    }\n    this.logError();\n  }\n  static wrapError(err, scraperName) {\n    if (err instanceof _HiAnimeError) {\n      return err;\n    }\n    if (err instanceof axios__WEBPACK_IMPORTED_MODULE_3__.AxiosError) {\n      const statusText = err?.response?.statusText || _HiAnimeError.DEFAULT_ERROR_MESSAGE;\n      return new _HiAnimeError(\n        \"fetchError: \" + statusText,\n        scraperName,\n        err.status || _HiAnimeError.DEFAULT_ERROR_STATUS\n      );\n    }\n    return new _HiAnimeError(\n      err?.message || _HiAnimeError.DEFAULT_ERROR_MESSAGE,\n      scraperName\n    );\n  }\n  json() {\n    return {\n      status: this.status,\n      message: this.message\n    };\n  }\n  logError() {\n    log.error(\n      ANSI_ESC_CODE_COLOR_RED + JSON.stringify(\n        {\n          status: this.status,\n          scraper: this.scraper,\n          message: this.message\n        },\n        null,\n        2\n      ) + ANSI_ESC_CODE_COLOR_RESET\n    );\n  }\n};\n\n// src/utils/methods.ts\nvar extractAnimes = ($, selector, scraperName) => {\n  try {\n    const animes = [];\n    $(selector).each((_, el) => {\n      const animeId = $(el).find(\".film-detail .film-name .dynamic-name\")?.attr(\"href\")?.slice(1).split(\"?ref=search\")[0] || null;\n      animes.push({\n        id: animeId,\n        name: $(el).find(\".film-detail .film-name .dynamic-name\")?.text()?.trim(),\n        jname: $(el).find(\".film-detail .film-name .dynamic-name\")?.attr(\"data-jname\")?.trim() || null,\n        poster: $(el).find(\".film-poster .film-poster-img\")?.attr(\"data-src\")?.trim() || null,\n        duration: $(el).find(\".film-detail .fd-infor .fdi-item.fdi-duration\")?.text()?.trim(),\n        type: $(el).find(\".film-detail .fd-infor .fdi-item:nth-of-type(1)\")?.text()?.trim(),\n        rating: $(el).find(\".film-poster .tick-rate\")?.text()?.trim() || null,\n        episodes: {\n          sub: Number(\n            $(el).find(\".film-poster .tick-sub\")?.text()?.trim().split(\" \").pop()\n          ) || null,\n          dub: Number(\n            $(el).find(\".film-poster .tick-dub\")?.text()?.trim().split(\" \").pop()\n          ) || null\n        }\n      });\n    });\n    return animes;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, scraperName);\n  }\n};\nvar extractTop10Animes = ($, period, scraperName) => {\n  try {\n    const animes = [];\n    const selector = `#top-viewed-${period} ul li`;\n    $(selector).each((_, el) => {\n      animes.push({\n        id: $(el).find(\".film-detail .dynamic-name\")?.attr(\"href\")?.slice(1).trim() || null,\n        rank: Number($(el).find(\".film-number span\")?.text()?.trim()) || null,\n        name: $(el).find(\".film-detail .dynamic-name\")?.text()?.trim() || null,\n        jname: $(el).find(\".film-detail .dynamic-name\")?.attr(\"data-jname\")?.trim() || null,\n        poster: $(el).find(\".film-poster .film-poster-img\")?.attr(\"data-src\")?.trim() || null,\n        episodes: {\n          sub: Number(\n            $(el).find(\n              \".film-detail .fd-infor .tick-item.tick-sub\"\n            )?.text()?.trim()\n          ) || null,\n          dub: Number(\n            $(el).find(\n              \".film-detail .fd-infor .tick-item.tick-dub\"\n            )?.text()?.trim()\n          ) || null\n        }\n      });\n    });\n    return animes;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, scraperName);\n  }\n};\nvar extractMostPopularAnimes = ($, selector, scraperName) => {\n  try {\n    const animes = [];\n    $(selector).each((_, el) => {\n      animes.push({\n        id: $(el).find(\".film-detail .dynamic-name\")?.attr(\"href\")?.slice(1).trim() || null,\n        name: $(el).find(\".film-detail .dynamic-name\")?.text()?.trim() || null,\n        jname: $(el).find(\".film-detail .film-name .dynamic-name\").attr(\"data-jname\")?.trim() || null,\n        poster: $(el).find(\".film-poster .film-poster-img\")?.attr(\"data-src\")?.trim() || null,\n        episodes: {\n          sub: Number(\n            $(el)?.find(\".fd-infor .tick .tick-sub\")?.text()?.trim()\n          ) || null,\n          dub: Number(\n            $(el)?.find(\".fd-infor .tick .tick-dub\")?.text()?.trim()\n          ) || null\n        },\n        type: $(el)?.find(\".fd-infor .tick\")?.text()?.trim()?.replace(/[\\s\\n]+/g, \" \")?.split(\" \")?.pop() || null\n      });\n    });\n    return animes;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, scraperName);\n  }\n};\nfunction retrieveServerId($, index, category) {\n  return $(\n    `.ps_-block.ps_-block-sub.servers-${category} > .ps__-list .server-item`\n  )?.map(\n    (_, el) => $(el).attr(\"data-server-id\") == `${index}` ? $(el) : null\n  )?.get()[0]?.attr(\"data-id\") || null;\n}\nfunction getGenresFilterVal(genreNames) {\n  if (genreNames.length < 1) {\n    return void 0;\n  }\n  return genreNames.map((name) => SEARCH_PAGE_FILTERS[\"GENRES_ID_MAP\"][name]).join(\",\");\n}\nfunction getSearchFilterValue(key, rawValue) {\n  rawValue = rawValue.trim();\n  if (!rawValue) return void 0;\n  switch (key) {\n    case \"genres\": {\n      return getGenresFilterVal(rawValue.split(\",\"));\n    }\n    case \"type\": {\n      const val = SEARCH_PAGE_FILTERS[\"TYPE_ID_MAP\"][rawValue] ?? 0;\n      return val === 0 ? void 0 : `${val}`;\n    }\n    case \"status\": {\n      const val = SEARCH_PAGE_FILTERS[\"STATUS_ID_MAP\"][rawValue] ?? 0;\n      return val === 0 ? void 0 : `${val}`;\n    }\n    case \"rated\": {\n      const val = SEARCH_PAGE_FILTERS[\"RATED_ID_MAP\"][rawValue] ?? 0;\n      return val === 0 ? void 0 : `${val}`;\n    }\n    case \"score\": {\n      const val = SEARCH_PAGE_FILTERS[\"SCORE_ID_MAP\"][rawValue] ?? 0;\n      return val === 0 ? void 0 : `${val}`;\n    }\n    case \"season\": {\n      const val = SEARCH_PAGE_FILTERS[\"SEASON_ID_MAP\"][rawValue] ?? 0;\n      return val === 0 ? void 0 : `${val}`;\n    }\n    case \"language\": {\n      const val = SEARCH_PAGE_FILTERS[\"LANGUAGE_ID_MAP\"][rawValue] ?? 0;\n      return val === 0 ? void 0 : `${val}`;\n    }\n    case \"sort\": {\n      return SEARCH_PAGE_FILTERS[\"SORT_ID_MAP\"][rawValue] ?? void 0;\n    }\n    default:\n      return void 0;\n  }\n}\nfunction getSearchDateFilterValue(isStartDate, rawValue) {\n  rawValue = rawValue.trim();\n  if (!rawValue) return void 0;\n  const dateRegex = /^\\d{4}-([0-9]|1[0-2])-([0-9]|[12][0-9]|3[01])$/;\n  const dateCategory = isStartDate ? \"s\" : \"e\";\n  const [year, month, date] = rawValue.split(\"-\");\n  if (!dateRegex.test(rawValue)) {\n    return void 0;\n  }\n  return [\n    Number(year) > 0 ? `${dateCategory}y=${year}` : \"\",\n    Number(month) > 0 ? `${dateCategory}m=${month}` : \"\",\n    Number(date) > 0 ? `${dateCategory}d=${date}` : \"\"\n  ].filter((d) => Boolean(d));\n}\nfunction substringAfter(str, toFind) {\n  const index = str.indexOf(toFind);\n  return index == -1 ? \"\" : str.substring(index + toFind.length);\n}\nfunction substringBefore(str, toFind) {\n  const index = str.indexOf(toFind);\n  return index == -1 ? \"\" : str.substring(0, index);\n}\nasync function getMegaCloudClientKey(xrax) {\n  let text;\n  try {\n    const req = await fetch(\n      `https://megacloud.blog/embed-2/v3/e-1/${xrax}`,\n      { headers: { Referer: \"https://hianime.to/\" } }\n    );\n    text = await req.text();\n    let regex = [\n      /<meta name=\"_gg_fb\" content=\"[a-zA-Z0-9]+\">/,\n      /<!--\\s+_is_th:[0-9a-zA-Z]+\\s+-->/,\n      /<script>window._lk_db\\s+=\\s+\\{[xyz]:\\s+[\"''][a-zA-Z0-9]+[\"''],\\s+[xyz]:\\s+[\"''][a-zA-Z0-9]+[\"''],\\s+[xyz]:\\s+[\"''][a-zA-Z0-9]+[\"'']\\};<\\/script>/,\n      /<div\\s+data-dpi=\"[0-9a-zA-Z]+\"\\s+.*><\\/div>/,\n      /<script nonce=\"[0-9a-zA-Z]+\">/,\n      /<script>window._xy_ws = ['\"`][0-9a-zA-Z]+['\"`];<\\/script>/\n    ];\n    const key = /\"[a-zA-Z0-9]+\"/;\n    const lk_db_regex = [\n      /x:\\s+\"[a-zA-Z0-9]+\"/,\n      /y:\\s+\"[a-zA-Z0-9]+\"/,\n      /z:\\s+\"[a-zA-Z0-9]+\"/\n    ];\n    let pass = null;\n    let count = 0;\n    for (let test in regex) {\n      pass = text.match(regex[test]);\n      if (pass !== null) {\n        break;\n      }\n    }\n    if (pass === null) {\n      throw new Error(\"Failed extracting client key segment\");\n    }\n    let clientKey = \"\";\n    if (count === 2) {\n      let x = pass[0].match(lk_db_regex[0]);\n      if (x === null) throw new Error(\"Failed building client key (xyz)\");\n      let p1 = x[0].match(key);\n      if (p1 === null)\n        throw new Error(\"Failed building client key (xyz)\");\n      let y = pass[0].match(lk_db_regex[0]);\n      if (y === null) throw new Error(\"Failed building client key (xyz)\");\n      let p2 = y[0].match(key);\n      if (p2 === null)\n        throw new Error(\"Failed building client key (xyz)\");\n      let z = pass[0].match(lk_db_regex[0]);\n      if (z === null) throw new Error(\"Failed building client key (xyz)\");\n      let p3 = z[0].match(key);\n      if (p3 === null)\n        throw new Error(\"Failed building client key (xyz)\");\n      clientKey = `${p1[0].replaceAll('\"', \"\")}${p2[0].replaceAll('\"', \"\")}${p3[0].replaceAll('\"', \"\")}`;\n    } else if (count === 1) {\n      var keytest = pass[0].match(/:[a-zA-Z0-9]+ /);\n      if (keytest === null)\n        throw new Error(\"Failed extracting client key (nonce)\");\n      clientKey = keytest[0].replaceAll(\":\", \"\").replaceAll(\" \", \"\");\n    } else {\n      var keytest = pass[0].match(key);\n      if (keytest === null)\n        throw new Error(\"Failed extracting client key\");\n      clientKey = keytest[0].replaceAll('\"', \"\");\n    }\n    return clientKey;\n  } catch (err) {\n    throw err;\n  }\n}\nfunction decryptSrc2(src, clientKey, megacloudKey) {\n  var layers = 3;\n  var genKey = keygen2(megacloudKey, clientKey);\n  var decSrc = atob(src);\n  var charArray = [...Array(95)].map((_val, index) => {\n    return String.fromCharCode(32 + index);\n  });\n  var reverseLayer = function(iteration) {\n    var layerKey = genKey + iteration;\n    var hashVal = 0n;\n    for (var i2 = 0; i2 < layerKey.length; i2++) {\n      hashVal = hashVal * 31n + BigInt(layerKey.charCodeAt(i2)) & 0xffffffffn;\n    }\n    var seed = hashVal;\n    var seedRand = (arg) => {\n      seed = seed * 1103515245n + 12345n & 0x7fffffffn;\n      return Number(seed % BigInt(arg));\n    };\n    decSrc = decSrc.split(\"\").map((char, _index) => {\n      var cArryIndex = charArray.indexOf(char);\n      if (cArryIndex === -1) return char;\n      var randNum = seedRand(95);\n      var newCharIndex = (cArryIndex - randNum + 95) % 95;\n      return charArray[newCharIndex];\n    }).join(\"\");\n    decSrc = columnarCipher2(decSrc, layerKey);\n    var subValues = seedShuffle2(charArray, layerKey);\n    var charMap = {};\n    subValues.forEach((char, index) => {\n      charMap[char] = charArray[index];\n    });\n    decSrc = decSrc.split(\"\").map((char) => {\n      return charMap[char] || char;\n    }).join(\"\");\n  };\n  for (var i = layers; i > 0; i--) {\n    reverseLayer(i);\n  }\n  var dataLen = parseInt(decSrc.substring(0, 4), 10);\n  return decSrc.substring(4, 4 + dataLen);\n}\nfunction keygen2(megacloudKey, clientKey) {\n  var keygenHashMultVal = 31n;\n  var keygenXORVal = 247;\n  var keygenShiftVal = 5;\n  var tempKey = megacloudKey + clientKey;\n  var hashVal = 0n;\n  for (var i = 0; i < tempKey.length; i++) {\n    hashVal = BigInt(tempKey.charCodeAt(i)) + hashVal * keygenHashMultVal + (hashVal << 7n) - hashVal;\n  }\n  hashVal = hashVal < 0n ? -hashVal : hashVal;\n  var lHash = Number(hashVal % 0x7fffffffffffffffn);\n  tempKey = tempKey.split(\"\").map((c) => {\n    return String.fromCharCode(c.charCodeAt(0) ^ keygenXORVal);\n  }).join(\"\");\n  var pivot = lHash % tempKey.length + keygenShiftVal;\n  tempKey = tempKey.slice(pivot) + tempKey.slice(0, pivot);\n  var leafStr = clientKey.split(\"\").reverse().join(\"\");\n  var returnKey = \"\";\n  for (var i = 0; i < Math.max(tempKey.length, leafStr.length); i++) {\n    returnKey += (tempKey[i] || \"\") + (leafStr[i] || \"\");\n  }\n  returnKey = returnKey.substring(0, 96 + lHash % 33);\n  returnKey = [...returnKey].map((c) => {\n    return String.fromCharCode(c.charCodeAt(0) % 95 + 32);\n  }).join(\"\");\n  return returnKey;\n}\nfunction seedShuffle2(CharacterArray, iKey) {\n  var hashVal = 0n;\n  for (var i = 0; i < iKey.length; i++) {\n    hashVal = hashVal * 31n + BigInt(iKey.charCodeAt(i)) & 0xffffffffn;\n  }\n  var shuffleNum = hashVal;\n  var psudoRand = (arg) => {\n    shuffleNum = shuffleNum * 1103515245n + 12345n & 0x7fffffffn;\n    return Number(shuffleNum % BigInt(arg));\n  };\n  var retStr = [...CharacterArray];\n  for (var i = retStr.length - 1; i > 0; i--) {\n    var swapIndex = psudoRand(i + 1);\n    [retStr[i], retStr[swapIndex]] = [retStr[swapIndex], retStr[i]];\n  }\n  return retStr;\n}\nfunction columnarCipher2(src, ikey) {\n  var columnCount = ikey.length;\n  var rowCount = Math.ceil(src.length / columnCount);\n  var cipherArry = Array(rowCount).fill(null).map(() => {\n    return Array(columnCount).fill(\" \");\n  });\n  var keyMap = ikey.split(\"\").map((char, index) => {\n    return { char, idx: index };\n  });\n  var sortedMap = [...keyMap].sort((a, b) => {\n    return a.char.charCodeAt(0) - b.char.charCodeAt(0);\n  });\n  var srcIndex = 0;\n  sortedMap.forEach(({ idx: index }) => {\n    for (var i = 0; i < rowCount; i++) {\n      cipherArry[i][index] = src[srcIndex++];\n    }\n  });\n  var returnStr = \"\";\n  for (var x = 0; x < rowCount; x++) {\n    for (var y = 0; y < columnCount; y++) {\n      returnStr += cipherArry[x][y];\n    }\n  }\n  return returnStr;\n}\n\n// src/hianime/scrapers/homePage.ts\nasync function getHomePage() {\n  const res = {\n    spotlightAnimes: [],\n    trendingAnimes: [],\n    latestEpisodeAnimes: [],\n    topUpcomingAnimes: [],\n    top10Animes: {\n      today: [],\n      week: [],\n      month: []\n    },\n    topAiringAnimes: [],\n    mostPopularAnimes: [],\n    mostFavoriteAnimes: [],\n    latestCompletedAnimes: [],\n    genres: []\n  };\n  try {\n    const mainPage = await client.get(SRC_HOME_URL);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const spotlightSelector = \"#slider .swiper-wrapper .swiper-slide\";\n    $(spotlightSelector).each((_, el) => {\n      const otherInfo = $(el).find(\".deslide-item-content .sc-detail .scd-item\").map((_2, el2) => $(el2).text().trim()).get().slice(0, -1);\n      res.spotlightAnimes.push({\n        rank: Number(\n          $(el).find(\".deslide-item-content .desi-sub-text\")?.text().trim().split(\" \")[0].slice(1)\n        ) || null,\n        id: $(el).find(\".deslide-item-content .desi-buttons a\")?.last()?.attr(\"href\")?.slice(1)?.trim() || null,\n        name: $(el).find(\".deslide-item-content .desi-head-title.dynamic-name\")?.text().trim(),\n        description: $(el).find(\".deslide-item-content .desi-description\")?.text()?.split(\"[\")?.shift()?.trim() || null,\n        poster: $(el).find(\n          \".deslide-cover .deslide-cover-img .film-poster-img\"\n        )?.attr(\"data-src\")?.trim() || null,\n        jname: $(el).find(\n          \".deslide-item-content .desi-head-title.dynamic-name\"\n        )?.attr(\"data-jname\")?.trim() || null,\n        episodes: {\n          sub: Number(\n            $(el).find(\n              \".deslide-item-content .sc-detail .scd-item .tick-item.tick-sub\"\n            )?.text()?.trim()\n          ) || null,\n          dub: Number(\n            $(el).find(\n              \".deslide-item-content .sc-detail .scd-item .tick-item.tick-dub\"\n            )?.text()?.trim()\n          ) || null\n        },\n        type: otherInfo?.[0] || null,\n        otherInfo\n      });\n    });\n    const trendingSelector = \"#trending-home .swiper-wrapper .swiper-slide\";\n    $(trendingSelector).each((_, el) => {\n      res.trendingAnimes.push({\n        rank: parseInt(\n          $(el).find(\".item .number\")?.children()?.first()?.text()?.trim()\n        ),\n        id: $(el).find(\".item .film-poster\")?.attr(\"href\")?.slice(1)?.trim() || null,\n        name: $(el).find(\".item .number .film-title.dynamic-name\")?.text()?.trim(),\n        jname: $(el).find(\".item .number .film-title.dynamic-name\")?.attr(\"data-jname\")?.trim() || null,\n        poster: $(el).find(\".item .film-poster .film-poster-img\")?.attr(\"data-src\")?.trim() || null\n      });\n    });\n    const latestEpisodeSelector = \"#main-content .block_area_home:nth-of-type(1) .tab-content .film_list-wrap .flw-item\";\n    res.latestEpisodeAnimes = extractAnimes(\n      $,\n      latestEpisodeSelector,\n      getHomePage.name\n    );\n    const topUpcomingSelector = \"#main-content .block_area_home:nth-of-type(3) .tab-content .film_list-wrap .flw-item\";\n    res.topUpcomingAnimes = extractAnimes(\n      $,\n      topUpcomingSelector,\n      getHomePage.name\n    );\n    const genreSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-genres .sb-genre-list li\";\n    $(genreSelector).each((_, el) => {\n      res.genres.push(`${$(el).text().trim()}`);\n    });\n    const mostViewedSelector = '#main-sidebar .block_area-realtime [id^=\"top-viewed-\"]';\n    $(mostViewedSelector).each((_, el) => {\n      const period = $(el).attr(\"id\")?.split(\"-\")?.pop()?.trim();\n      if (period === \"day\") {\n        res.top10Animes.today = extractTop10Animes(\n          $,\n          period,\n          getHomePage.name\n        );\n        return;\n      }\n      if (period === \"week\") {\n        res.top10Animes.week = extractTop10Animes(\n          $,\n          period,\n          getHomePage.name\n        );\n        return;\n      }\n      if (period === \"month\") {\n        res.top10Animes.month = extractTop10Animes(\n          $,\n          period,\n          getHomePage.name\n        );\n      }\n    });\n    res.topAiringAnimes = extractMostPopularAnimes(\n      $,\n      \"#anime-featured .row div:nth-of-type(1) .anif-block-ul ul li\",\n      getHomePage.name\n    );\n    res.mostPopularAnimes = extractMostPopularAnimes(\n      $,\n      \"#anime-featured .row div:nth-of-type(2) .anif-block-ul ul li\",\n      getHomePage.name\n    );\n    res.mostFavoriteAnimes = extractMostPopularAnimes(\n      $,\n      \"#anime-featured .row div:nth-of-type(3) .anif-block-ul ul li\",\n      getHomePage.name\n    );\n    res.latestCompletedAnimes = extractMostPopularAnimes(\n      $,\n      \"#anime-featured .row div:nth-of-type(4) .anif-block-ul ul li\",\n      getHomePage.name\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getHomePage.name);\n  }\n}\n\n// src/hianime/scrapers/animeAZList.ts\n\nasync function getAZList(sortOption, page) {\n  const res = {\n    sortOption: sortOption.trim(),\n    animes: [],\n    totalPages: 0,\n    hasNextPage: false,\n    currentPage: (Number(page) || 0) < 1 ? 1 : Number(page)\n  };\n  sortOption = res.sortOption;\n  page = res.currentPage;\n  try {\n    if (sortOption === \"\" || !Boolean(AZ_LIST_SORT_OPTIONS[sortOption])) {\n      throw new HiAnimeError(\n        \"invalid az-list sort option\",\n        getAZList.name,\n        400\n      );\n    }\n    switch (sortOption) {\n      case \"all\":\n        sortOption = \"\";\n        break;\n      case \"other\":\n        sortOption = \"other\";\n        break;\n      default:\n        sortOption = sortOption.toUpperCase();\n    }\n    const azURL = new URL(\n      `/az-list/${sortOption}?page=${page}`,\n      SRC_BASE_URL\n    );\n    const resp = await client.get(azURL.href);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(resp.data);\n    const selector = \"#main-wrapper .tab-content .film_list-wrap .flw-item\";\n    res.hasNextPage = $(\".pagination > li\").length > 0 ? $(\".pagination li.active\").length > 0 ? $(\".pagination > li\").last().hasClass(\"active\") ? false : true : false : false;\n    res.totalPages = Number(\n      $('.pagination > .page-item a[title=\"Last\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $('.pagination > .page-item a[title=\"Next\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $(\".pagination > .page-item.active a\")?.text()?.trim()\n    ) || 1;\n    res.animes = extractAnimes($, selector, getAZList.name);\n    if (res.animes.length === 0 && !res.hasNextPage) {\n      res.totalPages = 0;\n    }\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAZList.name);\n  }\n}\n\n// src/hianime/scrapers/animeGenre.ts\n\nasync function getGenreAnime(genreName, page) {\n  const res = {\n    // there's a typo with hianime where \"martial\" arts is \"marial\" arts\n    genreName: genreName === \"martial-arts\" ? \"marial-arts\" : genreName.trim(),\n    animes: [],\n    genres: [],\n    topAiringAnimes: [],\n    totalPages: 1,\n    hasNextPage: false,\n    currentPage: (Number(page) || 0) < 1 ? 1 : Number(page)\n  };\n  genreName = res.genreName;\n  page = res.currentPage;\n  try {\n    if (genreName === \"\") {\n      throw new HiAnimeError(\n        \"invalid genre name\",\n        getGenreAnime.name,\n        400\n      );\n    }\n    const genreUrl = new URL(\n      `/genre/${genreName}?page=${page}`,\n      SRC_BASE_URL\n    );\n    const mainPage = await client.get(genreUrl.href);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const selector = \"#main-content .tab-content .film_list-wrap .flw-item\";\n    const genreNameSelector = \"#main-content .block_area .block_area-header .cat-heading\";\n    res.genreName = $(genreNameSelector)?.text()?.trim() ?? genreName;\n    res.hasNextPage = $(\".pagination > li\").length > 0 ? $(\".pagination li.active\").length > 0 ? $(\".pagination > li\").last().hasClass(\"active\") ? false : true : false : false;\n    res.totalPages = Number(\n      $('.pagination > .page-item a[title=\"Last\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $('.pagination > .page-item a[title=\"Next\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $(\".pagination > .page-item.active a\")?.text()?.trim()\n    ) || 1;\n    res.animes = extractAnimes($, selector, getGenreAnime.name);\n    if (res.animes.length === 0 && !res.hasNextPage) {\n      res.totalPages = 0;\n    }\n    const genreSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-genres .sb-genre-list li\";\n    $(genreSelector).each((_, el) => {\n      res.genres.push(`${$(el).text().trim()}`);\n    });\n    const topAiringSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-realtime .anif-block-ul ul li\";\n    res.topAiringAnimes = extractMostPopularAnimes(\n      $,\n      topAiringSelector,\n      getGenreAnime.name\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getGenreAnime.name);\n  }\n}\n\n// src/hianime/scrapers/animeQtip.ts\n\nasync function getAnimeQtipInfo(animeId) {\n  const res = {\n    anime: {\n      id: animeId.trim(),\n      name: null,\n      malscore: null,\n      quality: null,\n      episodes: {\n        sub: null,\n        dub: null\n      },\n      type: null,\n      description: null,\n      jname: null,\n      synonyms: null,\n      aired: null,\n      status: null,\n      genres: []\n    }\n  };\n  try {\n    animeId = String(res.anime.id);\n    const id = animeId.split(\"-\").pop();\n    if (animeId === \"\" || animeId.indexOf(\"-\") === -1 || !id) {\n      throw new HiAnimeError(\n        \"invalid anime id\",\n        getAnimeQtipInfo.name,\n        400\n      );\n    }\n    const mainPage = await client.get(`${SRC_AJAX_URL}/movie/qtip/${id}`, {\n      headers: {\n        Referer: SRC_HOME_URL,\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      }\n    });\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const selector = \".pre-qtip-content\";\n    res.anime.id = $(selector)?.find(\".pre-qtip-button a.btn-play\")?.attr(\"href\")?.trim()?.split(\"/\")?.pop() || null;\n    res.anime.name = $(selector)?.find(\".pre-qtip-title\")?.text()?.trim() || null;\n    res.anime.malscore = $(selector)?.find(\".pre-qtip-detail\")?.children()?.first()?.text()?.trim() || null;\n    res.anime.quality = $(selector)?.find(\".tick .tick-quality\")?.text()?.trim() || null;\n    res.anime.type = $(selector)?.find(\".badge.badge-quality\")?.text()?.trim() || null;\n    res.anime.episodes.sub = Number($(selector)?.find(\".tick .tick-sub\")?.text()?.trim()) || null;\n    res.anime.episodes.dub = Number($(selector)?.find(\".tick .tick-dub\")?.text()?.trim()) || null;\n    res.anime.description = $(selector)?.find(\".pre-qtip-description\")?.text()?.trim() || null;\n    $(`${selector} .pre-qtip-line`).each((_, el) => {\n      const key = $(el).find(\".stick\").text().trim().slice(0, -1).toLowerCase();\n      const value = key !== \"genres\" ? $(el)?.find(\".stick-text\")?.text()?.trim() || null : $(el)?.text()?.trim()?.slice(key.length + 1);\n      switch (key) {\n        case \"japanese\":\n          res.anime.jname = value;\n          break;\n        case \"synonyms\":\n          res.anime.synonyms = value;\n          break;\n        case \"aired\":\n          res.anime.aired = value;\n          break;\n        case \"status\":\n          res.anime.status = value;\n          break;\n        case \"genres\":\n          res.anime.genres = value?.split(\",\")?.map((i) => i?.trim()) || [];\n          break;\n      }\n    });\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeQtipInfo.name);\n  }\n}\n\n// src/hianime/scrapers/animeEpisodes.ts\n\nasync function getAnimeEpisodes(animeId) {\n  const res = {\n    totalEpisodes: 0,\n    episodes: []\n  };\n  try {\n    if (animeId.trim() === \"\" || animeId.indexOf(\"-\") === -1) {\n      throw new HiAnimeError(\n        \"invalid anime id\",\n        getAnimeEpisodes.name,\n        400\n      );\n    }\n    const episodesAjax = await client.get(\n      `${SRC_AJAX_URL}/v2/episode/list/${animeId.split(\"-\").pop()}`,\n      {\n        headers: {\n          \"X-Requested-With\": \"XMLHttpRequest\",\n          Referer: `${SRC_BASE_URL}/watch/${animeId}`\n        }\n      }\n    );\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(episodesAjax.data.html);\n    res.totalEpisodes = Number(\n      $(\".detail-infor-content .ss-list a\").length\n    );\n    $(\".detail-infor-content .ss-list a\").each((_, el) => {\n      res.episodes.push({\n        title: $(el)?.attr(\"title\")?.trim() || null,\n        episodeId: $(el)?.attr(\"href\")?.split(\"/\")?.pop() || null,\n        number: Number($(el).attr(\"data-number\")),\n        isFiller: $(el).hasClass(\"ssl-item-filler\")\n      });\n    });\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeEpisodes.name);\n  }\n}\n\n// src/hianime/scrapers/animeCategory.ts\n\nasync function getAnimeCategory(category, page) {\n  const res = {\n    animes: [],\n    genres: [],\n    top10Animes: {\n      today: [],\n      week: [],\n      month: []\n    },\n    category,\n    totalPages: 0,\n    hasNextPage: false,\n    currentPage: (Number(page) || 0) < 1 ? 1 : Number(page)\n  };\n  try {\n    if (category.trim() === \"\") {\n      throw new HiAnimeError(\n        \"invalid anime category\",\n        getAnimeCategory.name,\n        400\n      );\n    }\n    page = res.currentPage;\n    const scrapeUrl = new URL(category, SRC_BASE_URL);\n    const mainPage = await client.get(`${scrapeUrl}?page=${page}`);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const selector = \"#main-content .tab-content .film_list-wrap .flw-item\";\n    const categoryNameSelector = \"#main-content .block_area .block_area-header .cat-heading\";\n    res.category = $(categoryNameSelector)?.text()?.trim() ?? category;\n    res.hasNextPage = $(\".pagination > li\").length > 0 ? $(\".pagination li.active\").length > 0 ? $(\".pagination > li\").last().hasClass(\"active\") ? false : true : false : false;\n    res.totalPages = Number(\n      $('.pagination > .page-item a[title=\"Last\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $('.pagination > .page-item a[title=\"Next\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $(\".pagination > .page-item.active a\")?.text()?.trim()\n    ) || 1;\n    res.animes = extractAnimes($, selector, getAnimeCategory.name);\n    if (res.animes.length === 0 && !res.hasNextPage) {\n      res.totalPages = 0;\n    }\n    const genreSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-genres .sb-genre-list li\";\n    $(genreSelector).each((_, el) => {\n      res.genres.push(`${$(el).text().trim()}`);\n    });\n    const top10AnimeSelector = '#main-sidebar .block_area-realtime [id^=\"top-viewed-\"]';\n    $(top10AnimeSelector).each((_, el) => {\n      const period = $(el).attr(\"id\")?.split(\"-\")?.pop()?.trim();\n      if (period === \"day\") {\n        res.top10Animes.today = extractTop10Animes(\n          $,\n          period,\n          getAnimeCategory.name\n        );\n        return;\n      }\n      if (period === \"week\") {\n        res.top10Animes.week = extractTop10Animes(\n          $,\n          period,\n          getAnimeCategory.name\n        );\n        return;\n      }\n      if (period === \"month\") {\n        res.top10Animes.month = extractTop10Animes(\n          $,\n          period,\n          getAnimeCategory.name\n        );\n      }\n    });\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeCategory.name);\n  }\n}\n\n// src/hianime/scrapers/animeProducer.ts\n\nasync function getProducerAnimes(producerName, page) {\n  const res = {\n    producerName,\n    animes: [],\n    top10Animes: {\n      today: [],\n      week: [],\n      month: []\n    },\n    topAiringAnimes: [],\n    totalPages: 0,\n    hasNextPage: false,\n    currentPage: (Number(page) || 0) < 1 ? 1 : Number(page)\n  };\n  try {\n    if (producerName.trim() === \"\") {\n      throw new HiAnimeError(\n        \"invalid producer name\",\n        getProducerAnimes.name,\n        400\n      );\n    }\n    page = res.currentPage;\n    const producerUrl = new URL(\n      `/producer/${producerName}?page=${page}`,\n      SRC_BASE_URL\n    );\n    const mainPage = await client.get(producerUrl.href);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const animeSelector = \"#main-content .tab-content .film_list-wrap .flw-item\";\n    res.hasNextPage = $(\".pagination > li\").length > 0 ? $(\".pagination li.active\").length > 0 ? $(\".pagination > li\").last().hasClass(\"active\") ? false : true : false : false;\n    res.totalPages = Number(\n      $('.pagination > .page-item a[title=\"Last\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $('.pagination > .page-item a[title=\"Next\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $(\".pagination > .page-item.active a\")?.text()?.trim()\n    ) || 1;\n    res.animes = extractAnimes($, animeSelector, getProducerAnimes.name);\n    if (res.animes.length === 0 && !res.hasNextPage) {\n      res.totalPages = 0;\n    }\n    const producerNameSelector = \"#main-content .block_area .block_area-header .cat-heading\";\n    res.producerName = $(producerNameSelector)?.text()?.trim() ?? producerName;\n    const top10AnimeSelector = '#main-sidebar .block_area-realtime [id^=\"top-viewed-\"]';\n    $(top10AnimeSelector).each((_, el) => {\n      const period = $(el).attr(\"id\")?.split(\"-\")?.pop()?.trim();\n      if (period === \"day\") {\n        res.top10Animes.today = extractTop10Animes(\n          $,\n          period,\n          getProducerAnimes.name\n        );\n        return;\n      }\n      if (period === \"week\") {\n        res.top10Animes.week = extractTop10Animes(\n          $,\n          period,\n          getProducerAnimes.name\n        );\n        return;\n      }\n      if (period === \"month\") {\n        res.top10Animes.month = extractTop10Animes(\n          $,\n          period,\n          getProducerAnimes.name\n        );\n      }\n    });\n    const topAiringSelector = \"#main-sidebar .block_area_sidebar:nth-child(2) .block_area-content .anif-block-ul ul li\";\n    res.topAiringAnimes = extractMostPopularAnimes(\n      $,\n      topAiringSelector,\n      getProducerAnimes.name\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getProducerAnimes.name);\n  }\n}\n\n// src/hianime/scrapers/episodeServers.ts\n\nasync function getEpisodeServers(episodeId) {\n  const res = {\n    sub: [],\n    dub: [],\n    raw: [],\n    episodeId,\n    episodeNo: 0\n  };\n  try {\n    if (episodeId.trim() === \"\" || episodeId.indexOf(\"?ep=\") === -1) {\n      throw new HiAnimeError(\n        \"invalid anime episode id\",\n        getEpisodeServers.name,\n        400\n      );\n    }\n    const epId = episodeId.split(\"?ep=\")[1];\n    const { data } = await client.get(\n      `${SRC_AJAX_URL}/v2/episode/servers?episodeId=${epId}`,\n      {\n        headers: {\n          \"X-Requested-With\": \"XMLHttpRequest\",\n          Referer: new URL(`/watch/${episodeId}`, SRC_BASE_URL).href\n        }\n      }\n    );\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(data.html);\n    const epNoSelector = \".server-notice strong\";\n    res.episodeNo = Number($(epNoSelector).text().split(\" \").pop()) || 0;\n    $(`.ps_-block.ps_-block-sub.servers-sub .ps__-list .server-item`).each(\n      (_, el) => {\n        res.sub.push({\n          serverName: $(el).find(\"a\").text().toLowerCase().trim(),\n          serverId: Number($(el)?.attr(\"data-server-id\")?.trim()) || null\n        });\n      }\n    );\n    $(`.ps_-block.ps_-block-sub.servers-dub .ps__-list .server-item`).each(\n      (_, el) => {\n        res.dub.push({\n          serverName: $(el).find(\"a\").text().toLowerCase().trim(),\n          serverId: Number($(el)?.attr(\"data-server-id\")?.trim()) || null\n        });\n      }\n    );\n    $(`.ps_-block.ps_-block-sub.servers-raw .ps__-list .server-item`).each(\n      (_, el) => {\n        res.raw.push({\n          serverName: $(el).find(\"a\").text().toLowerCase().trim(),\n          serverId: Number($(el)?.attr(\"data-server-id\")?.trim()) || null\n        });\n      }\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getEpisodeServers.name);\n  }\n}\n\n// src/hianime/scrapers/animeAboutInfo.ts\n\nasync function getAnimeAboutInfo(animeId) {\n  const res = {\n    anime: {\n      info: {\n        id: null,\n        anilistId: null,\n        malId: null,\n        name: null,\n        poster: null,\n        description: null,\n        stats: {\n          rating: null,\n          quality: null,\n          episodes: {\n            sub: null,\n            dub: null\n          },\n          type: null,\n          duration: null\n        },\n        promotionalVideos: [],\n        charactersVoiceActors: []\n      },\n      moreInfo: {}\n    },\n    seasons: [],\n    mostPopularAnimes: [],\n    relatedAnimes: [],\n    recommendedAnimes: []\n  };\n  try {\n    if (animeId.trim() === \"\" || animeId.indexOf(\"-\") === -1) {\n      throw new HiAnimeError(\n        \"invalid anime id\",\n        getAnimeAboutInfo.name,\n        400\n      );\n    }\n    const animeUrl = new URL(animeId, SRC_BASE_URL);\n    const mainPage = await client.get(animeUrl.href);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    try {\n      res.anime.info.anilistId = Number(\n        JSON.parse($(\"body\")?.find(\"#syncData\")?.text())?.anilist_id\n      );\n      res.anime.info.malId = Number(\n        JSON.parse($(\"body\")?.find(\"#syncData\")?.text())?.mal_id\n      );\n    } catch (err) {\n      res.anime.info.anilistId = null;\n      res.anime.info.malId = null;\n    }\n    const selector = \"#ani_detail .container .anis-content\";\n    res.anime.info.id = $(selector)?.find(\".anisc-detail .film-buttons a.btn-play\")?.attr(\"href\")?.split(\"/\")?.pop() || null;\n    res.anime.info.name = $(selector)?.find(\".anisc-detail .film-name.dynamic-name\")?.text()?.trim() || null;\n    res.anime.info.description = $(selector)?.find(\".anisc-detail .film-description .text\").text()?.split(\"[\")?.shift()?.trim() || null;\n    res.anime.info.poster = $(selector)?.find(\".film-poster .film-poster-img\")?.attr(\"src\")?.trim() || null;\n    res.anime.info.stats.rating = $(`${selector} .film-stats .tick .tick-pg`)?.text()?.trim() || null;\n    res.anime.info.stats.quality = $(`${selector} .film-stats .tick .tick-quality`)?.text()?.trim() || null;\n    res.anime.info.stats.episodes = {\n      sub: Number(\n        $(`${selector} .film-stats .tick .tick-sub`)?.text()?.trim()\n      ) || null,\n      dub: Number(\n        $(`${selector} .film-stats .tick .tick-dub`)?.text()?.trim()\n      ) || null\n    };\n    res.anime.info.stats.type = $(`${selector} .film-stats .tick`)?.text()?.trim()?.replace(/[\\s\\n]+/g, \" \")?.split(\" \")?.at(-2) || null;\n    res.anime.info.stats.duration = $(`${selector} .film-stats .tick`)?.text()?.trim()?.replace(/[\\s\\n]+/g, \" \")?.split(\" \")?.pop() || null;\n    $(\n      \".block_area.block_area-promotions .block_area-promotions-list .screen-items .item\"\n    ).each((_, el) => {\n      res.anime.info.promotionalVideos.push({\n        title: $(el).attr(\"data-title\"),\n        source: $(el).attr(\"data-src\"),\n        thumbnail: $(el).find(\"img\").attr(\"src\")\n      });\n    });\n    $(\n      \".block_area.block_area-actors .block-actors-content .bac-list-wrap .bac-item\"\n    ).each((_, el) => {\n      res.anime.info.charactersVoiceActors.push({\n        character: {\n          id: $(el).find($(\".per-info.ltr .pi-avatar\")).attr(\"href\")?.split(\"/\")[2] || \"\",\n          poster: $(el).find($(\".per-info.ltr .pi-avatar img\")).attr(\"data-src\") || \"\",\n          name: $(el).find($(\".per-info.ltr .pi-detail a\")).text(),\n          cast: $(el).find($(\".per-info.ltr .pi-detail .pi-cast\")).text()\n        },\n        voiceActor: {\n          id: $(el).find($(\".per-info.rtl .pi-avatar\")).attr(\"href\")?.split(\"/\")[2] || \"\",\n          poster: $(el).find($(\".per-info.rtl .pi-avatar img\")).attr(\"data-src\") || \"\",\n          name: $(el).find($(\".per-info.rtl .pi-detail a\")).text(),\n          cast: $(el).find($(\".per-info.rtl .pi-detail .pi-cast\")).text()\n        }\n      });\n    });\n    $(`${selector} .anisc-info-wrap .anisc-info .item:not(.w-hide)`).each(\n      (_, el) => {\n        let key = $(el).find(\".item-head\").text().toLowerCase().replace(\":\", \"\").trim();\n        key = key.includes(\" \") ? key.replace(\" \", \"\") : key;\n        const value = [\n          ...$(el).find(\"*:not(.item-head)\").map((_2, el2) => $(el2).text().trim())\n        ].map((i) => `${i}`).toString().trim();\n        if (key === \"genres\") {\n          res.anime.moreInfo[key] = value.split(\",\").map((i) => i.trim());\n          return;\n        }\n        if (key === \"producers\") {\n          res.anime.moreInfo[key] = value.split(\",\").map((i) => i.trim());\n          return;\n        }\n        res.anime.moreInfo[key] = value;\n      }\n    );\n    const seasonsSelector = \"#main-content .os-list a.os-item\";\n    $(seasonsSelector).each((_, el) => {\n      res.seasons.push({\n        id: $(el)?.attr(\"href\")?.slice(1)?.trim() || null,\n        name: $(el)?.attr(\"title\")?.trim() || null,\n        title: $(el)?.find(\".title\")?.text()?.trim(),\n        poster: $(el)?.find(\".season-poster\")?.attr(\"style\")?.split(\" \")?.pop()?.split(\"(\")?.pop()?.split(\")\")[0] || null,\n        isCurrent: $(el).hasClass(\"active\")\n      });\n    });\n    const relatedAnimeSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-realtime:nth-of-type(1) .anif-block-ul ul li\";\n    res.relatedAnimes = extractMostPopularAnimes(\n      $,\n      relatedAnimeSelector,\n      getAnimeAboutInfo.name\n    );\n    const mostPopularSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-realtime:nth-of-type(2) .anif-block-ul ul li\";\n    res.mostPopularAnimes = extractMostPopularAnimes(\n      $,\n      mostPopularSelector,\n      getAnimeAboutInfo.name\n    );\n    const recommendedAnimeSelector = \"#main-content .block_area.block_area_category .tab-content .flw-item\";\n    res.recommendedAnimes = extractAnimes(\n      $,\n      recommendedAnimeSelector,\n      getAnimeAboutInfo.name\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeAboutInfo.name);\n  }\n}\n\n// src/hianime/scrapers/animeSearch.ts\n\nvar searchFilters = {\n  filter: true,\n  type: true,\n  status: true,\n  rated: true,\n  score: true,\n  season: true,\n  language: true,\n  start_date: true,\n  end_date: true,\n  sort: true,\n  genres: true\n};\nasync function _getAnimeSearchResults(q, page = 1, filters) {\n  try {\n    const res = {\n      animes: [],\n      mostPopularAnimes: [],\n      searchQuery: q,\n      searchFilters: filters,\n      totalPages: 0,\n      hasNextPage: false,\n      currentPage: (Number(page) || 0) < 1 ? 1 : Number(page)\n    };\n    const url = new URL(SRC_SEARCH_URL);\n    url.searchParams.set(\"keyword\", q);\n    url.searchParams.set(\"page\", `${res.currentPage}`);\n    url.searchParams.set(\"sort\", \"default\");\n    for (const key in filters) {\n      if (key.includes(\"_date\")) {\n        const dates = getSearchDateFilterValue(\n          key === \"start_date\",\n          filters[key] || \"\"\n        );\n        if (!dates) continue;\n        dates.map((dateParam) => {\n          const [key2, val] = dateParam.split(\"=\");\n          url.searchParams.set(key2, val);\n        });\n        continue;\n      }\n      const filterVal = getSearchFilterValue(\n        key,\n        filters[key] || \"\"\n      );\n      filterVal && url.searchParams.set(key, filterVal);\n    }\n    const mainPage = await client.get(url.href);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const selector = \"#main-content .tab-content .film_list-wrap .flw-item\";\n    res.hasNextPage = $(\".pagination > li\").length > 0 ? $(\".pagination li.active\").length > 0 ? $(\".pagination > li\").last().hasClass(\"active\") ? false : true : false : false;\n    res.totalPages = Number(\n      $('.pagination > .page-item a[title=\"Last\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $('.pagination > .page-item a[title=\"Next\"]')?.attr(\"href\")?.split(\"=\").pop() ?? $(\".pagination > .page-item.active a\")?.text()?.trim()\n    ) || 1;\n    res.animes = extractAnimes($, selector, getAnimeSearchResults.name);\n    if (res.animes.length === 0 && !res.hasNextPage) {\n      res.totalPages = 0;\n    }\n    const mostPopularSelector = \"#main-sidebar .block_area.block_area_sidebar.block_area-realtime .anif-block-ul ul li\";\n    res.mostPopularAnimes = extractMostPopularAnimes(\n      $,\n      mostPopularSelector,\n      getAnimeSearchResults.name\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeSearchResults.name);\n  }\n}\nasync function getAnimeSearchResults(q, page, filters) {\n  try {\n    q = q.trim() ? decodeURIComponent(q.trim()) : \"\";\n    if (q.trim() === \"\") {\n      throw new HiAnimeError(\n        \"invalid search query\",\n        getAnimeSearchResults.name,\n        400\n      );\n    }\n    page = page < 1 ? 1 : page;\n    const parsedFilters = {};\n    for (const key in filters) {\n      if (searchFilters[key]) {\n        parsedFilters[key] = filters[key];\n      }\n    }\n    return _getAnimeSearchResults(q, page, parsedFilters);\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeSearchResults.name);\n  }\n}\n\n// src/hianime/scrapers/animeEpisodeSrcs.ts\n\n\n\n// src/extractors/streamsb.ts\n\nvar StreamSB = class {\n  // private serverName = \"streamSB\";\n  sources = [];\n  host = \"https://watchsb.com/sources50\";\n  host2 = \"https://streamsss.net/sources16\";\n  PAYLOAD(hex) {\n    return `566d337678566f743674494a7c7c${hex}7c7c346b6767586d6934774855537c7c73747265616d7362/6565417268755339773461447c7c346133383438333436313335376136323337373433383634376337633465366534393338373136643732373736343735373237613763376334363733353737303533366236333463353333363534366137633763373337343732363536313664373336327c7c6b586c3163614468645a47617c7c73747265616d7362`;\n  }\n  async extract(videoUrl, isAlt = false) {\n    let headers = {\n      watchsb: \"sbstream\",\n      Referer: videoUrl.href,\n      \"User-Agent\": USER_AGENT_HEADER\n    };\n    let id = videoUrl.href.split(\"/e/\").pop();\n    if (id?.includes(\"html\")) {\n      id = id.split(\".html\")[0];\n    }\n    const bytes = new TextEncoder().encode(id);\n    const res = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n      `${isAlt ? this.host2 : this.host}/${this.PAYLOAD(\n        Buffer.from(bytes).toString(\"hex\")\n      )}`,\n      { headers }\n    ).catch(() => null);\n    if (!res?.data.stream_data) {\n      throw new Error(\"No source found. Try a different server\");\n    }\n    headers = {\n      \"User-Agent\": USER_AGENT_HEADER,\n      Referer: videoUrl.href.split(\"e/\")[0]\n    };\n    const m3u8_urls = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(res.data.stream_data.file, {\n      headers\n    });\n    const videoList = m3u8_urls?.data?.split(\"#EXT-X-STREAM-INF:\") ?? [];\n    for (const video of videoList) {\n      if (!video.includes(\"m3u8\")) continue;\n      const url = video.split(\"\\n\")[1];\n      const quality = video.split(\"RESOLUTION=\")[1].split(\",\")[0].split(\"x\")[1];\n      this.sources.push({\n        url,\n        quality: `${quality}p`,\n        isM3U8: true\n      });\n    }\n    this.sources.push({\n      url: res.data.stream_data.file,\n      quality: \"auto\",\n      isM3U8: res.data.stream_data.file.includes(\".m3u8\")\n    });\n    return this.sources;\n  }\n  // private addSources(source: any): void {\n  //   this.sources.push({\n  //     url: source.file,\n  //     isM3U8: source.file.includes(\".m3u8\"),\n  //   });\n  // }\n};\nvar streamsb_default = StreamSB;\n\n// src/extractors/streamtape.ts\n\n\nvar StreamTape = class {\n  // private serverName = \"StreamTape\";\n  sources = [];\n  async extract(videoUrl) {\n    try {\n      const { data } = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(videoUrl.href).catch(() => {\n        throw new Error(\"Video not found\");\n      });\n      const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(data);\n      let [fh, sh] = $.html()?.match(/robotlink'\\).innerHTML = (.*)'/)[1].split(\"+ ('\");\n      sh = sh.substring(3);\n      fh = fh.replace(/\\'/g, \"\");\n      const url = `https:${fh}${sh}`;\n      this.sources.push({\n        url,\n        isM3U8: url.includes(\".m3u8\")\n      });\n      return this.sources;\n    } catch (err) {\n      throw new Error(err.message);\n    }\n  }\n};\nvar streamtape_default = StreamTape;\n\n// src/extractors/rapidcloud.ts\n\n\nvar RapidCloud = class {\n  // private serverName = \"RapidCloud\";\n  sources = [];\n  // https://rapid-cloud.co/embed-6/eVZPDXwVfrY3?vast=1\n  fallbackKey = \"c1d17096f2ca11b7\";\n  host = \"https://rapid-cloud.co\";\n  async extract(videoUrl) {\n    const result = {\n      sources: [],\n      subtitles: []\n    };\n    try {\n      const id = videoUrl.href.split(\"/\").pop()?.split(\"?\")[0];\n      const options = {\n        headers: {\n          \"X-Requested-With\": \"XMLHttpRequest\"\n        }\n      };\n      let res = null;\n      res = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n        `https://${videoUrl.hostname}/embed-2/ajax/e-1/getSources?id=${id}`,\n        options\n      );\n      let {\n        data: { sources, tracks, intro, outro, encrypted }\n      } = res;\n      let decryptKey = await (await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n        \"https://raw.githubusercontent.com/cinemaxhq/keys/e1/key\"\n      )).data;\n      decryptKey = substringBefore(\n        substringAfter(\n          decryptKey,\n          '\"blob-code blob-code-inner js-file-line\">'\n        ),\n        \"</td>\"\n      );\n      if (!decryptKey) {\n        decryptKey = await (await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n          \"https://raw.githubusercontent.com/cinemaxhq/keys/e1/key\"\n        )).data;\n      }\n      if (!decryptKey) decryptKey = this.fallbackKey;\n      try {\n        if (encrypted) {\n          const sourcesArray = sources.split(\"\");\n          let extractedKey = \"\";\n          let currentIndex = 0;\n          for (const index of decryptKey) {\n            const start = index[0] + currentIndex;\n            const end = start + index[1];\n            for (let i = start; i < end; i++) {\n              extractedKey += res.data.sources[i];\n              sourcesArray[i] = \"\";\n            }\n            currentIndex += index[1];\n          }\n          decryptKey = extractedKey;\n          sources = sourcesArray.join(\"\");\n          const decrypt = crypto_js__WEBPACK_IMPORTED_MODULE_4__.AES.decrypt(sources, decryptKey);\n          sources = JSON.parse(decrypt.toString(crypto_js__WEBPACK_IMPORTED_MODULE_4__.enc.Utf8));\n        }\n      } catch (err) {\n        log.info(err.message);\n        throw new Error(\n          \"Cannot decrypt sources. Perhaps the key is invalid.\"\n        );\n      }\n      this.sources = sources?.map((s) => ({\n        url: s.file,\n        isM3U8: s.file.includes(\".m3u8\")\n      }));\n      result.sources.push(...this.sources);\n      if (videoUrl.href.includes(new URL(this.host).host)) {\n        result.sources = [];\n        this.sources = [];\n        for (const source of sources) {\n          const { data } = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(source.file, options);\n          const m3u8data = data.split(\"\\n\").filter(\n            (line) => line.includes(\".m3u8\") && line.includes(\"RESOLUTION=\")\n          );\n          const secondHalf = m3u8data.map(\n            (line) => line.match(/RESOLUTION=.*,(C)|URI=.*/g)?.map((s) => s.split(\"=\")[1])\n          );\n          const TdArray = secondHalf.map((s) => {\n            const f1 = s[0].split(\",C\")[0];\n            const f2 = s[1].replace(/\"/g, \"\");\n            return [f1, f2];\n          });\n          for (const [f1, f2] of TdArray) {\n            this.sources.push({\n              url: `${source.file?.split(\"master.m3u8\")[0]}${f2.replace(\n                \"iframes\",\n                \"index\"\n              )}`,\n              quality: f1.split(\"x\")[1] + \"p\",\n              isM3U8: f2.includes(\".m3u8\")\n            });\n          }\n          result.sources.push(...this.sources);\n        }\n      }\n      result.intro = intro?.end > 1 ? { start: intro.start, end: intro.end } : void 0;\n      result.outro = outro?.end > 1 ? { start: outro.start, end: outro.end } : void 0;\n      result.sources.push({\n        url: sources[0].file,\n        isM3U8: sources[0].file.includes(\".m3u8\"),\n        quality: \"auto\"\n      });\n      result.subtitles = tracks.map(\n        (s) => s.file ? {\n          url: s.file,\n          lang: s.label ? s.label : \"Thumbnails\"\n        } : null\n      ).filter((s) => s);\n      return result;\n    } catch (err) {\n      log.info(err.message);\n      throw err;\n    }\n  }\n};\nvar rapidcloud_default = RapidCloud;\n\n// src/extractors/megacloud.ts\n\n\n\n\nvar megacloud = {\n  script: \"https://megacloud.tv/js/player/a/prod/e1-player.min.js?v=\",\n  sources: \"https://megacloud.tv/embed-2/ajax/e-1/getSources?id=\"\n};\nvar MegaCloud = class {\n  // private serverName = \"megacloud\";\n  async extract(videoUrl) {\n    try {\n      const extractedData = {\n        tracks: [],\n        intro: {\n          start: 0,\n          end: 0\n        },\n        outro: {\n          start: 0,\n          end: 0\n        },\n        sources: []\n      };\n      const videoId = videoUrl?.href?.split(\"/\")?.pop()?.split(\"?\")[0];\n      const { data: srcsData } = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n        megacloud.sources.concat(videoId || \"\"),\n        {\n          headers: {\n            Accept: \"*/*\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36\",\n            Referer: videoUrl.href\n          }\n        }\n      );\n      if (!srcsData) {\n        throw new HiAnimeError(\n          \"Url may have an invalid video id\",\n          \"getAnimeEpisodeSources\",\n          400\n        );\n      }\n      const encryptedString = srcsData.sources;\n      if (!srcsData.encrypted && Array.isArray(encryptedString)) {\n        extractedData.intro = srcsData.intro;\n        extractedData.outro = srcsData.outro;\n        extractedData.tracks = srcsData.tracks;\n        extractedData.sources = encryptedString.map((s) => ({\n          url: s.file,\n          type: s.type\n        }));\n        return extractedData;\n      }\n      let text;\n      const { data } = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n        megacloud.script.concat(Date.now().toString())\n      );\n      text = data;\n      if (!text) {\n        throw new HiAnimeError(\n          \"Couldn't fetch script to decrypt resource\",\n          \"getAnimeEpisodeSources\",\n          500\n        );\n      }\n      const vars = this.extractVariables(text);\n      if (!vars.length) {\n        throw new Error(\n          \"Can't find variables. Perhaps the extractor is outdated.\"\n        );\n      }\n      const { secret, encryptedSource } = this.getSecret(\n        encryptedString,\n        vars\n      );\n      const decrypted = this.decrypt(encryptedSource, secret);\n      try {\n        const sources = JSON.parse(decrypted);\n        extractedData.intro = srcsData.intro;\n        extractedData.outro = srcsData.outro;\n        extractedData.tracks = srcsData.tracks;\n        extractedData.sources = sources.map((s) => ({\n          url: s.file,\n          type: s.type\n        }));\n        return extractedData;\n      } catch (error) {\n        throw new HiAnimeError(\n          \"Failed to decrypt resource\",\n          \"getAnimeEpisodeSources\",\n          500\n        );\n      }\n    } catch (err) {\n      throw err;\n    }\n  }\n  extractVariables(text) {\n    const regex = /case\\s*0x[0-9a-f]+:(?![^;]*=partKey)\\s*\\w+\\s*=\\s*(\\w+)\\s*,\\s*\\w+\\s*=\\s*(\\w+);/g;\n    const matches = text.matchAll(regex);\n    const vars = Array.from(matches, (match) => {\n      const matchKey1 = this.matchingKey(match[1], text);\n      const matchKey2 = this.matchingKey(match[2], text);\n      try {\n        return [parseInt(matchKey1, 16), parseInt(matchKey2, 16)];\n      } catch (e) {\n        return [];\n      }\n    }).filter((pair) => pair.length > 0);\n    return vars;\n  }\n  getSecret(encryptedString, values) {\n    let secret = \"\", encryptedSource = \"\", encryptedSourceArray = encryptedString.split(\"\"), currentIndex = 0;\n    for (const index of values) {\n      const start = index[0] + currentIndex;\n      const end = start + index[1];\n      for (let i = start; i < end; i++) {\n        secret += encryptedString[i];\n        encryptedSourceArray[i] = \"\";\n      }\n      currentIndex += index[1];\n    }\n    encryptedSource = encryptedSourceArray.join(\"\");\n    return { secret, encryptedSource };\n  }\n  decrypt(encrypted, keyOrSecret, maybe_iv) {\n    let key;\n    let iv;\n    let contents;\n    if (maybe_iv) {\n      key = keyOrSecret;\n      iv = maybe_iv;\n      contents = encrypted;\n    } else {\n      const cypher = Buffer.from(encrypted, \"base64\");\n      const salt = cypher.subarray(8, 16);\n      const password = Buffer.concat([\n        Buffer.from(keyOrSecret, \"binary\"),\n        salt\n      ]);\n      const md5Hashes = [];\n      let digest = password;\n      for (let i = 0; i < 3; i++) {\n        md5Hashes[i] = crypto__WEBPACK_IMPORTED_MODULE_5__.createHash(\"md5\").update(digest).digest();\n        digest = Buffer.concat([md5Hashes[i], password]);\n      }\n      key = Buffer.concat([md5Hashes[0], md5Hashes[1]]);\n      iv = md5Hashes[2];\n      contents = cypher.subarray(16);\n    }\n    const decipher = crypto__WEBPACK_IMPORTED_MODULE_5__.createDecipheriv(\"aes-256-cbc\", key, iv);\n    const decrypted = decipher.update(\n      contents,\n      typeof contents === \"string\" ? \"base64\" : void 0,\n      \"utf8\"\n    ) + decipher.final();\n    return decrypted;\n  }\n  // function copied from github issue #30 'https://github.com/ghoshRitesh12/aniwatch-api/issues/30'\n  matchingKey(value, script) {\n    const regex = new RegExp(`,${value}=((?:0x)?([0-9a-fA-F]+))`);\n    const match = script.match(regex);\n    if (match) {\n      return match[1].replace(/^0x/, \"\");\n    } else {\n      throw new Error(\"Failed to match the key\");\n    }\n  }\n  // https://megacloud.tv/embed-2/e-1/1hnXq7VzX0Ex?k=1\n  // async extract2(embedIframeURL: URL): Promise<ExtractedData> {\n  //     try {\n  //         const extractedData: ExtractedData = {\n  //             tracks: [],\n  //             intro: {\n  //                 start: 0,\n  //                 end: 0,\n  //             },\n  //             outro: {\n  //                 start: 0,\n  //                 end: 0,\n  //             },\n  //             sources: [],\n  //         };\n  //         const xrax = embedIframeURL.pathname.split(\"/\").pop() || \"\";\n  //         const resp = await getSources(xrax);\n  //         if (!resp) return extractedData;\n  //         if (Array.isArray(resp.sources)) {\n  //             extractedData.sources = resp.sources.map((s) => ({\n  //                 url: s.file,\n  //                 type: s.type,\n  //             }));\n  //         }\n  //         extractedData.intro = resp.intro ? resp.intro : extractedData.intro;\n  //         extractedData.outro = resp.outro ? resp.outro : extractedData.outro;\n  //         extractedData.tracks = resp.tracks;\n  //         return extractedData;\n  //     } catch (err) {\n  //         throw err;\n  //     }\n  // }\n  //credit to https://github.com/itzzzme/megacloud-keys for autogenerated keys\n  async extract3(embedIframeURL) {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n        \"https://raw.githubusercontent.com/itzzzme/megacloud-keys/refs/heads/main/key.txt\"\n      );\n      const key = response.data;\n      const extractedData = {\n        tracks: [],\n        intro: {\n          start: 0,\n          end: 0\n        },\n        outro: {\n          start: 0,\n          end: 0\n        },\n        sources: []\n      };\n      const match = /\\/([^\\/\\?]+)\\?/.exec(embedIframeURL.href);\n      const sourceId = match?.[1];\n      if (!sourceId)\n        throw new Error(\"Unable to extract sourceId from embed URL\");\n      const megacloudUrl = `https://megacloud.blog/embed-2/v2/e-1/getSources?id=${sourceId}`;\n      const { data: rawSourceData } = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(megacloudUrl);\n      const encrypted = rawSourceData?.sources;\n      if (!encrypted)\n        throw new Error(\"Encrypted source missing in response\");\n      const decrypted = crypto_js__WEBPACK_IMPORTED_MODULE_4__.AES.decrypt(encrypted, key).toString(\n        crypto_js__WEBPACK_IMPORTED_MODULE_4__.enc.Utf8\n      );\n      let decryptedSources;\n      try {\n        decryptedSources = JSON.parse(decrypted);\n      } catch (e) {\n        throw new Error(\"Decrypted data is not valid JSON\");\n      }\n      extractedData.intro = rawSourceData.intro ? rawSourceData.intro : extractedData.intro;\n      extractedData.outro = rawSourceData.outro ? rawSourceData.outro : extractedData.outro;\n      extractedData.tracks = rawSourceData.tracks?.map((track) => ({\n        url: track.file,\n        lang: track.label ? track.label : track.kind\n      })) || [];\n      extractedData.sources = decryptedSources.map((s) => ({\n        url: s.file,\n        isM3U8: s.type === \"hls\",\n        type: s.type\n      }));\n      return extractedData;\n    } catch (err) {\n      throw err;\n    }\n  }\n  async extract4(embedIframeURL, category) {\n    const extractedData = {\n      tracks: [],\n      intro: {\n        start: 0,\n        end: 0\n      },\n      outro: {\n        start: 0,\n        end: 0\n      },\n      sources: []\n    };\n    const epId = embedIframeURL.split(\"?ep=\")[1];\n    const iframe = await fetch(\n      `https://megaplay.buzz/stream/s-2/${epId}/${category}`,\n      {\n        headers: {\n          Host: \"megaplay.buzz\",\n          \"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0\",\n          Accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n          \"Accept-Language\": \"en-US,en;q=0.5\",\n          DNT: \"1\",\n          \"Sec-GPC\": \"1\",\n          Connection: \"keep-alive\",\n          Referer: \"https://megaplay.buzz/api\",\n          \"Upgrade-Insecure-Requests\": \"1\",\n          \"Sec-Fetch-Dest\": \"iframe\",\n          \"Sec-Fetch-Mode\": \"navigate\",\n          \"Sec-Fetch-Site\": \"same-origin\",\n          \"Sec-Fetch-User\": \"?1\",\n          Priority: \"u=4\",\n          TE: \"trailers\"\n        }\n      }\n    );\n    if (!iframe.ok) throw new Error(\"Episode is not available\");\n    const iframeBody = await iframe.text();\n    const $ = cheerio__WEBPACK_IMPORTED_MODULE_0__.load(iframeBody);\n    const id = $(\"#megaplay-player\").attr(\"data-id\");\n    const sources = await fetch(\n      `https://megaplay.buzz/stream/getSources?id=${id}&id=${id}`,\n      {\n        headers: {\n          Host: \"megaplay.buzz\",\n          \"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0\",\n          Accept: \"application/json, text/javascript, */*; q=0.01\",\n          \"Accept-Language\": \"en-US,en;q=0.5\",\n          \"Accept-Encoding\": \"gzip, deflate, br, zstd\",\n          \"X-Requested-With\": \"XMLHttpRequest\",\n          DNT: \"1\",\n          \"Sec-GPC\": \"1\",\n          Connection: \"keep-alive\",\n          Referer: \"https://megaplay.buzz/stream/s-2/141679/sub\",\n          \"Sec-Fetch-Dest\": \"empty\",\n          \"Sec-Fetch-Mode\": \"cors\",\n          \"Sec-Fetch-Site\": \"same-origin\",\n          TE: \"trailers\"\n        }\n      }\n    );\n    const sourcesJson = await sources.json();\n    extractedData.intro = sourcesJson.intro;\n    extractedData.outro = sourcesJson.outro;\n    extractedData.tracks = sourcesJson.tracks?.map((track) => ({\n      url: track.file,\n      lang: track.label ? track.label : track.kind\n    })) || [];\n    extractedData.sources = [\n      {\n        url: sourcesJson.sources.file,\n        type: \"hls\"\n      }\n    ];\n    return extractedData;\n  }\n  async extract5(embedIframeURL) {\n    try {\n      const response = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(\n        \"https://raw.githubusercontent.com/yogesh-hacker/MegacloudKeys/refs/heads/main/keys.json\"\n      );\n      const key = response.data;\n      const megacloudKey = key[\"mega\"];\n      const extractedData = {\n        tracks: [],\n        intro: {\n          start: 0,\n          end: 0\n        },\n        outro: {\n          start: 0,\n          end: 0\n        },\n        sources: []\n      };\n      const match = /\\/([^\\/\\?]+)\\?/.exec(embedIframeURL.href);\n      const sourceId = match?.[1];\n      if (!sourceId)\n        throw new Error(\"Unable to extract sourceId from embed URL\");\n      const clientKey = await getMegaCloudClientKey(sourceId);\n      if (!clientKey)\n        throw new Error(\"Unable to extract client key from iframe\");\n      const megacloudUrl = `https://megacloud.blog/embed-2/v3/e-1/getSources?id=${sourceId}&_k=${clientKey}`;\n      const { data: rawSourceData } = await axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(megacloudUrl);\n      let decryptedSources;\n      if (!rawSourceData?.encrypted) {\n        decryptedSources = rawSourceData?.sources;\n      } else {\n        const encrypted = rawSourceData?.sources;\n        if (!encrypted)\n          throw new Error(\"Encrypted source missing in response\");\n        console.log(clientKey, megacloudKey, encrypted);\n        const decrypted = decryptSrc2(encrypted, clientKey, megacloudKey);\n        try {\n          decryptedSources = JSON.parse(decrypted);\n        } catch (e) {\n          throw new Error(\"Decrypted data is not valid JSON\");\n        }\n      }\n      extractedData.tracks = rawSourceData.tracks;\n      extractedData.intro = rawSourceData.intro;\n      extractedData.outro = rawSourceData.outro;\n      extractedData.intro = rawSourceData.intro ? rawSourceData.intro : extractedData.intro;\n      extractedData.outro = rawSourceData.outro ? rawSourceData.outro : extractedData.outro;\n      extractedData.tracks = rawSourceData.tracks?.map((track) => ({\n        url: track.file,\n        lang: track.label ? track.label : track.kind\n      })) || [];\n      extractedData.sources = decryptedSources.map((s) => ({\n        url: s.file,\n        isM3U8: s.type === \"hls\",\n        type: s.type\n      }));\n      return extractedData;\n    } catch (err) {\n      throw err;\n    }\n  }\n};\nvar megacloud_default = MegaCloud;\n\n// src/hianime/types/anime.ts\nvar Servers = /* @__PURE__ */ ((Servers2) => {\n  Servers2[\"VidStreaming\"] = \"hd-1\";\n  Servers2[\"MegaCloud\"] = \"megacloud\";\n  Servers2[\"StreamSB\"] = \"streamsb\";\n  Servers2[\"StreamTape\"] = \"streamtape\";\n  Servers2[\"VidCloud\"] = \"hd-2\";\n  Servers2[\"AsianLoad\"] = \"asianload\";\n  Servers2[\"GogoCDN\"] = \"gogocdn\";\n  Servers2[\"MixDrop\"] = \"mixdrop\";\n  Servers2[\"UpCloud\"] = \"upcloud\";\n  Servers2[\"VizCloud\"] = \"vizcloud\";\n  Servers2[\"MyCloud\"] = \"mycloud\";\n  Servers2[\"Filemoon\"] = \"filemoon\";\n  return Servers2;\n})(Servers || {});\n\n// src/hianime/scrapers/animeEpisodeSrcs.ts\nasync function _getAnimeEpisodeSources(episodeId, server = \"hd-1\" /* VidStreaming */, category = \"sub\") {\n  if (episodeId.startsWith(\"http\")) {\n    const serverUrl = new URL(episodeId);\n    switch (server) {\n      case \"hd-1\" /* VidStreaming */:\n      case \"hd-2\" /* VidCloud */:\n        return {\n          headers: { Referer: `${serverUrl.origin}/` },\n          // disabled for the timebeing\n          // ...(await new MegaCloud().extract(serverUrl)),\n          // disabled again for the timebeing\n          // ...(await new MegaCloud().extract2(serverUrl)),\n          // disabled due to it being outdated\n          // ...(await new MegaCloud().extract3(serverUrl)),\n          // current megacloud v3 decryption\n          ...await new megacloud_default().extract5(serverUrl)\n        };\n      case \"streamsb\" /* StreamSB */:\n        return {\n          headers: {\n            Referer: serverUrl.href,\n            watchsb: \"streamsb\",\n            \"User-Agent\": USER_AGENT_HEADER\n          },\n          sources: await new streamsb_default().extract(serverUrl, true)\n        };\n      case \"streamtape\" /* StreamTape */:\n        return {\n          headers: {\n            Referer: serverUrl.href,\n            \"User-Agent\": USER_AGENT_HEADER\n          },\n          sources: await new streamtape_default().extract(serverUrl)\n        };\n      default:\n        return {\n          headers: { Referer: serverUrl.href },\n          ...await new rapidcloud_default().extract(serverUrl)\n        };\n    }\n  }\n  const epId = new URL(`/watch/${episodeId}`, SRC_BASE_URL).href;\n  log.info(`EPISODE_ID: ${epId}`);\n  try {\n    const resp = await client.get(\n      `${SRC_AJAX_URL}/v2/episode/servers?episodeId=${epId.split(\"?ep=\")[1]}`,\n      {\n        headers: {\n          Referer: epId,\n          \"X-Requested-With\": \"XMLHttpRequest\"\n        }\n      }\n    );\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(resp.data.html);\n    let serverId = null;\n    try {\n      log.info(`THE SERVER: ${JSON.stringify(server)}`);\n      switch (server) {\n        case \"hd-1\" /* VidStreaming */: {\n          serverId = retrieveServerId($, 4, category);\n          log.info(`SERVER_ID: ${serverId}`);\n          if (!serverId) throw new Error(\"VidStreaming not found\");\n          break;\n        }\n        case \"hd-2\" /* VidCloud */: {\n          serverId = retrieveServerId($, 1, category);\n          if (!serverId) throw new Error(\"RapidCloud not found\");\n          break;\n        }\n        case \"streamsb\" /* StreamSB */: {\n          serverId = retrieveServerId($, 5, category);\n          if (!serverId) throw new Error(\"StreamSB not found\");\n          break;\n        }\n        case \"streamtape\" /* StreamTape */: {\n          serverId = retrieveServerId($, 3, category);\n          if (!serverId) throw new Error(\"StreamTape not found\");\n          break;\n        }\n      }\n    } catch (err) {\n      throw new HiAnimeError(\n        \"Couldn't find server. Try another server\",\n        getAnimeEpisodeSources.name,\n        500\n      );\n    }\n    const {\n      data: { link }\n    } = await client.get(\n      `${SRC_AJAX_URL}/v2/episode/sources?id=${serverId}`\n    );\n    log.info(`THE LINK: ${link}`);\n    return await _getAnimeEpisodeSources(link, server);\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeEpisodeSources.name);\n  }\n}\nasync function getAnimeEpisodeSources(episodeId, server, category) {\n  try {\n    if (episodeId === \"\" || episodeId.indexOf(\"?ep=\") === -1) {\n      throw new HiAnimeError(\n        \"invalid anime episode id\",\n        getAnimeEpisodeSources.name,\n        400\n      );\n    }\n    if (category.trim() === \"\") {\n      throw new HiAnimeError(\n        \"invalid anime episode category\",\n        getAnimeEpisodeSources.name,\n        400\n      );\n    }\n    let malID;\n    let anilistID;\n    const animeURL = new URL(episodeId?.split(\"?ep=\")[0], SRC_BASE_URL)?.href;\n    const [episodeSrcData, animeSrc] = await Promise.all([\n      _getAnimeEpisodeSources(episodeId, server, category),\n      axios__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get(animeURL, {\n        headers: {\n          Referer: SRC_BASE_URL,\n          \"User-Agent\": USER_AGENT_HEADER,\n          \"X-Requested-With\": \"XMLHttpRequest\"\n        }\n      })\n    ]);\n    log.info(`EPISODE_SRC_DATA: ${JSON.stringify(episodeSrcData)}`);\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(animeSrc?.data);\n    try {\n      anilistID = Number(\n        JSON.parse($(\"body\")?.find(\"#syncData\")?.text())?.anilist_id\n      );\n      malID = Number(\n        JSON.parse($(\"body\")?.find(\"#syncData\")?.text())?.mal_id\n      );\n    } catch (err) {\n      anilistID = null;\n      malID = null;\n    }\n    return {\n      ...episodeSrcData,\n      anilistID,\n      malID\n    };\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeEpisodeSources.name);\n  }\n}\n\n// src/hianime/scrapers/animeSearchSuggestion.ts\n\nasync function getAnimeSearchSuggestion(q) {\n  try {\n    const res = {\n      suggestions: []\n    };\n    q = q.trim() ? decodeURIComponent(q.trim()) : \"\";\n    if (q.trim() === \"\") {\n      throw new HiAnimeError(\n        \"invalid search query\",\n        getAnimeSearchSuggestion.name,\n        400\n      );\n    }\n    const { data } = await client.get(\n      `${SRC_AJAX_URL}/search/suggest?keyword=${encodeURIComponent(q)}`,\n      {\n        headers: {\n          Accept: \"*/*\",\n          Pragma: \"no-cache\",\n          Referer: SRC_HOME_URL,\n          \"X-Requested-With\": \"XMLHttpRequest\"\n        }\n      }\n    );\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(data.html);\n    const selector = \".nav-item:has(.film-poster)\";\n    if ($(selector).length < 1) return res;\n    $(selector).each((_, el) => {\n      const id = $(el).attr(\"href\")?.split(\"?\")[0].includes(\"javascript\") ? null : $(el).attr(\"href\")?.split(\"?\")[0]?.slice(1) || null;\n      res.suggestions.push({\n        id,\n        name: $(el).find(\".srp-detail .film-name\")?.text()?.trim() || null,\n        jname: $(el).find(\".srp-detail .film-name\")?.attr(\"data-jname\")?.trim() || $(el).find(\".srp-detail .alias-name\")?.text()?.trim() || null,\n        poster: $(el).find(\".film-poster .film-poster-img\")?.attr(\"data-src\")?.trim() || null,\n        moreInfo: [\n          ...$(el).find(\".film-infor\").contents().map((_2, el2) => $(el2).text().trim())\n        ].filter((i) => i)\n      });\n    });\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getAnimeSearchSuggestion.name);\n  }\n}\n\n// src/hianime/scrapers/estimatedSchedule.ts\n\nasync function getEstimatedSchedule(date, tzOffset = -330) {\n  const res = {\n    scheduledAnimes: []\n  };\n  try {\n    date = date?.trim();\n    if (date === \"\" || /^\\d{4}-\\d{2}-\\d{2}$/.test(date) === false) {\n      throw new HiAnimeError(\n        \"invalid date format\",\n        getEstimatedSchedule.name,\n        400\n      );\n    }\n    if (tzOffset && (typeof tzOffset !== \"number\" || isNaN(tzOffset))) {\n      throw new HiAnimeError(\n        \"invalid timezone offset\",\n        getEstimatedSchedule.name,\n        400\n      );\n    }\n    const estScheduleURL = `${SRC_AJAX_URL}/schedule/list?tzOffset=${tzOffset}&date=${date}`;\n    const mainPage = await client.get(estScheduleURL, {\n      headers: {\n        Accept: \"*/*\",\n        Referer: SRC_HOME_URL,\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      }\n    });\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage?.data?.html);\n    const selector = \"li\";\n    if ($(selector)?.text()?.trim()?.includes(\"No data to display\")) {\n      return res;\n    }\n    $(selector).each((_, el) => {\n      const airingTimestamp = (/* @__PURE__ */ new Date(\n        `${date}T${$(el)?.find(\"a .time\")?.text()?.trim()}:00`\n      )).getTime();\n      res.scheduledAnimes.push({\n        id: $(el)?.find(\"a\")?.attr(\"href\")?.slice(1)?.trim() || null,\n        time: $(el)?.find(\"a .time\")?.text()?.trim() || null,\n        name: $(el)?.find(\"a .film-name.dynamic-name\")?.text()?.trim() || null,\n        jname: $(el)?.find(\"a .film-name.dynamic-name\")?.attr(\"data-jname\")?.trim() || null,\n        airingTimestamp,\n        secondsUntilAiring: Math.floor(\n          (airingTimestamp - Date.now()) / 1e3\n        ),\n        episode: Number(\n          $(el).find(\"a .fd-play button\").text().trim().split(\" \")[1]\n        )\n      });\n    });\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getEstimatedSchedule.name);\n  }\n}\nasync function getNextEpisodeSchedule(animeId) {\n  const res = {\n    airingISOTimestamp: null,\n    airingTimestamp: null,\n    secondsUntilAiring: null\n  };\n  try {\n    animeId = animeId?.trim();\n    if (!animeId || animeId.indexOf(\"-\") === -1) {\n      throw new HiAnimeError(\n        \"invalid anime id\",\n        getNextEpisodeSchedule.name,\n        400\n      );\n    }\n    const animeUrl = `${SRC_BASE_URL}/watch/${animeId}`;\n    const mainPage = await client.get(animeUrl, {\n      headers: {\n        Accept: \"*/*\",\n        Referer: SRC_HOME_URL\n      }\n    });\n    const $ = (0,cheerio__WEBPACK_IMPORTED_MODULE_0__.load)(mainPage.data);\n    const selector = \".schedule-alert > .alert.small > span:last\";\n    const timestamp = String(\n      $(selector).attr(\"data-value\")?.trim() || null\n    );\n    const schedule = new Date(timestamp);\n    if (isNaN(schedule.getTime())) return res;\n    res.airingISOTimestamp = schedule.toISOString();\n    res.airingTimestamp = schedule.getTime();\n    res.secondsUntilAiring = Math.floor(\n      (res.airingTimestamp - Date.now()) / 1e3\n    );\n    return res;\n  } catch (err) {\n    throw HiAnimeError.wrapError(err, getNextEpisodeSchedule.name);\n  }\n}\n\n// src/hianime/hianime.ts\nvar Scraper = class {\n  /**\n   * @param {string} animeId - unique anime id\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getInfo(\"steinsgate-3\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getInfo(animeId) {\n    return getAnimeAboutInfo(animeId);\n  }\n  /**\n   * @param {string} category - anime category\n   * @param {number} page - page number, defaults to `1`\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getCategoryAnime(\"subbed-anime\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getCategoryAnime(category, page = 1) {\n    return getAnimeCategory(category, page);\n  }\n  /**\n   * @param {string} animeId - unique anime id\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getEpisodes(\"steinsgate-3\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getEpisodes(animeId) {\n    return getAnimeEpisodes(animeId);\n  }\n  /**\n   * @param {string} episodeId - unique episode id\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getEpisodeSources(\"steinsgate-3?ep=230\", \"hd-1\", \"sub\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getEpisodeSources(episodeId, server = \"hd-1\" /* VidStreaming */, category = \"sub\") {\n    return getAnimeEpisodeSources(episodeId, server, category);\n  }\n  /**\n   * @param {string} genreName - anime genre name\n   * @param {number} page - page number, defaults to `1`\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getGenreAnime(\"shounen\", 2)\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getGenreAnime(genreName, page = 1) {\n    return getGenreAnime(genreName, page);\n  }\n  /**\n   * @param {string} producerName - anime producer name\n   * @param {number} page - page number, defaults to `1`\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getProducerAnimes(\"toei-animation\", 2)\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getProducerAnimes(producerName, page = 1) {\n    return getProducerAnimes(producerName, page);\n  }\n  /**\n   * @param {string} q - search query\n   * @param {number} page - page number, defaults to `1`\n   * @param {SearchFilters} filters - optional advance search filters\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper();\n   *\n   * hianime\n   *   .search(\"monster\", 1, {\n   *     genres: \"seinen,psychological\",\n   *   })\n   *   .then((data) => {\n   *     console.log(data);\n   *   })\n   *   .catch((err) => {\n   *     console.error(err);\n   *   });\n   *\n   */\n  async search(q, page = 1, filters = {}) {\n    return getAnimeSearchResults(q, page, filters);\n  }\n  /**\n   * @param {string} q - search query\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.searchSuggestions(\"one piece\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async searchSuggestions(q) {\n    return getAnimeSearchSuggestion(q);\n  }\n  /**\n   * @param {string} animeEpisodeId - unique anime episode id\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getEpisodeServers(\"steinsgate-0-92?ep=2055\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getEpisodeServers(animeEpisodeId) {\n    return getEpisodeServers(animeEpisodeId);\n  }\n  /**\n   * @param {string} date - date in `YYYY-MM-DD` format\n   * @param {number} tzOffset - timezone offset in minutes, defaults to `-330` (IST)\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   * const timezoneOffset = -330; // IST offset in minutes\n   *\n   * hianime.getEstimatedSchedule(\"2025-06-09\", timezoneOffset)\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getEstimatedSchedule(date, tzOffset = -330) {\n    return getEstimatedSchedule(date, tzOffset);\n  }\n  /**\n   * @param {string} animeId - unique anime id\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getNextEpisodeSchedule(\"one-piece-100\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getNextEpisodeSchedule(animeId) {\n    return getNextEpisodeSchedule(animeId);\n  }\n  /**\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getHomePage()\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getHomePage() {\n    return getHomePage();\n  }\n  /**\n   * @param {AZListSortOptions} sortOption az-list sort option\n   * @param {number} page - page number, defaults to `1`\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getAZList(\"0-9\", 1)\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getAZList(sortOption, page = 1) {\n    return getAZList(sortOption, page);\n  }\n  /**\n   * @param {string} animeId - unique anime id\n   * @throws {HiAnimeError}\n   * @example\n   * import { HiAnime } from \"aniwatch\";\n   *\n   * const hianime = new HiAnime.Scraper()\n   *\n   * hianime.getQtipInfo(\"one-piece-100\")\n   *  .then((data) => console.log(data))\n   *  .catch((err) => console.error(err));\n   *\n   */\n  async getQtipInfo(animeId) {\n    return getAnimeQtipInfo(animeId);\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYW5pd2F0Y2gvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrQ0FBa0M7QUFDaEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQytCOztBQUUvQjtBQUMwQzs7QUFFMUM7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlELHFFQUFxRSwyQ0FBMkMsa0NBQWtDLEtBQUs7QUFDdko7QUFDQSw4QkFBOEIsT0FBTztBQUNyQyxzQkFBc0IsYUFBYTtBQUNuQyxzQkFBc0IsYUFBYTtBQUNuQyx3QkFBd0IsYUFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUN3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhLFFBQVEsS0FBSztBQUM3QztBQUNBO0FBQ0E7QUFDQSxjQUFjLDZDQUFLO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUN3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CLFNBQVMsYUFBYSxnQ0FBZ0MsS0FBSztBQUMzRDtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsVUFBVTtBQUMvQztBQUNBO0FBQ0E7QUFDQSxjQUFjLDZDQUFLO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtQkFBbUI7QUFDaEMsYUFBYSxRQUFRO0FBQ3JCLGNBQWM7QUFDZDtBQUNBLGNBQWMsVUFBVTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsY0FBYztBQUNkO0FBQ0EsY0FBYyxVQUFVO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXDIzMDA4NDE3XFxEb2N1bWVudHNcXEdpdEh1YlxcQW5pVGVhbXNcXG5vZGVfbW9kdWxlc1xcYW5pd2F0Y2hcXGRpc3RcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHtcbiAgZm9yICh2YXIgbmFtZSBpbiBhbGwpXG4gICAgX19kZWZQcm9wKHRhcmdldCwgbmFtZSwgeyBnZXQ6IGFsbFtuYW1lXSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn07XG5cbi8vIHNyYy9oaWFuaW1lL2hpYW5pbWUudHNcbnZhciBoaWFuaW1lX2V4cG9ydHMgPSB7fTtcbl9fZXhwb3J0KGhpYW5pbWVfZXhwb3J0cywge1xuICBBWl9MSVNUX1NPUlRfT1BUSU9OUzogKCkgPT4gQVpfTElTVF9TT1JUX09QVElPTlMsXG4gIFNFQVJDSF9QQUdFX0ZJTFRFUlM6ICgpID0+IFNFQVJDSF9QQUdFX0ZJTFRFUlMsXG4gIFNjcmFwZXI6ICgpID0+IFNjcmFwZXIsXG4gIFNlcnZlcnM6ICgpID0+IFNlcnZlcnNcbn0pO1xuXG4vLyBzcmMvaGlhbmltZS9zY3JhcGVycy9ob21lUGFnZS50c1xuaW1wb3J0IHsgbG9hZCB9IGZyb20gXCJjaGVlcmlvXCI7XG5cbi8vIHNyYy9jb25maWcvY2xpZW50LnRzXG5pbXBvcnQgYXhpb3MsIHsgQXhpb3NFcnJvciB9IGZyb20gXCJheGlvc1wiO1xuXG4vLyBzcmMvdXRpbHMvY29uc3RhbnRzLnRzXG52YXIgQUNDRVBUX0VOQ09ESU5HX0hFQURFUiA9IFwiZ3ppcCwgZGVmbGF0ZSwgYnJcIjtcbnZhciBVU0VSX0FHRU5UX0hFQURFUiA9IFwiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEzMS4wLjAuMCBTYWZhcmkvNTM3LjM2XCI7XG52YXIgQUNDRVBUX0hFQURFUiA9IFwidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45XCI7XG52YXIgRE9NQUlOID0gXCJoaWFuaW1lei50b1wiO1xudmFyIFNSQ19CQVNFX1VSTCA9IGBodHRwczovLyR7RE9NQUlOfWA7XG52YXIgU1JDX0FKQVhfVVJMID0gYCR7U1JDX0JBU0VfVVJMfS9hamF4YDtcbnZhciBTUkNfSE9NRV9VUkwgPSBgJHtTUkNfQkFTRV9VUkx9L2hvbWVgO1xudmFyIFNSQ19TRUFSQ0hfVVJMID0gYCR7U1JDX0JBU0VfVVJMfS9zZWFyY2hgO1xudmFyIFNFQVJDSF9QQUdFX0ZJTFRFUlMgPSB7XG4gIEdFTlJFU19JRF9NQVA6IHtcbiAgICBhY3Rpb246IDEsXG4gICAgYWR2ZW50dXJlOiAyLFxuICAgIGNhcnM6IDMsXG4gICAgY29tZWR5OiA0LFxuICAgIGRlbWVudGlhOiA1LFxuICAgIGRlbW9uczogNixcbiAgICBkcmFtYTogOCxcbiAgICBlY2NoaTogOSxcbiAgICBmYW50YXN5OiAxMCxcbiAgICBnYW1lOiAxMSxcbiAgICBoYXJlbTogMzUsXG4gICAgaGlzdG9yaWNhbDogMTMsXG4gICAgaG9ycm9yOiAxNCxcbiAgICBpc2VrYWk6IDQ0LFxuICAgIGpvc2VpOiA0MyxcbiAgICBraWRzOiAxNSxcbiAgICBtYWdpYzogMTYsXG4gICAgXCJtYXJ0aWFsLWFydHNcIjogMTcsXG4gICAgbWVjaGE6IDE4LFxuICAgIG1pbGl0YXJ5OiAzOCxcbiAgICBtdXNpYzogMTksXG4gICAgbXlzdGVyeTogNyxcbiAgICBwYXJvZHk6IDIwLFxuICAgIHBvbGljZTogMzksXG4gICAgcHN5Y2hvbG9naWNhbDogNDAsXG4gICAgcm9tYW5jZTogMjIsXG4gICAgc2FtdXJhaTogMjEsXG4gICAgc2Nob29sOiAyMyxcbiAgICBcInNjaS1maVwiOiAyNCxcbiAgICBzZWluZW46IDQyLFxuICAgIHNob3VqbzogMjUsXG4gICAgXCJzaG91am8tYWlcIjogMjYsXG4gICAgc2hvdW5lbjogMjcsXG4gICAgXCJzaG91bmVuLWFpXCI6IDI4LFxuICAgIFwic2xpY2Utb2YtbGlmZVwiOiAzNixcbiAgICBzcGFjZTogMjksXG4gICAgc3BvcnRzOiAzMCxcbiAgICBcInN1cGVyLXBvd2VyXCI6IDMxLFxuICAgIHN1cGVybmF0dXJhbDogMzcsXG4gICAgdGhyaWxsZXI6IDQxLFxuICAgIHZhbXBpcmU6IDMyXG4gIH0sXG4gIFRZUEVfSURfTUFQOiB7XG4gICAgYWxsOiAwLFxuICAgIG1vdmllOiAxLFxuICAgIHR2OiAyLFxuICAgIG92YTogMyxcbiAgICBvbmE6IDQsXG4gICAgc3BlY2lhbDogNSxcbiAgICBtdXNpYzogNlxuICB9LFxuICBTVEFUVVNfSURfTUFQOiB7XG4gICAgYWxsOiAwLFxuICAgIFwiZmluaXNoZWQtYWlyaW5nXCI6IDEsXG4gICAgXCJjdXJyZW50bHktYWlyaW5nXCI6IDIsXG4gICAgXCJub3QteWV0LWFpcmVkXCI6IDNcbiAgfSxcbiAgUkFURURfSURfTUFQOiB7XG4gICAgYWxsOiAwLFxuICAgIGc6IDEsXG4gICAgcGc6IDIsXG4gICAgXCJwZy0xM1wiOiAzLFxuICAgIHI6IDQsXG4gICAgXCJyK1wiOiA1LFxuICAgIHJ4OiA2XG4gIH0sXG4gIFNDT1JFX0lEX01BUDoge1xuICAgIGFsbDogMCxcbiAgICBhcHBhbGxpbmc6IDEsXG4gICAgaG9ycmlibGU6IDIsXG4gICAgXCJ2ZXJ5LWJhZFwiOiAzLFxuICAgIGJhZDogNCxcbiAgICBhdmVyYWdlOiA1LFxuICAgIGZpbmU6IDYsXG4gICAgZ29vZDogNyxcbiAgICBcInZlcnktZ29vZFwiOiA4LFxuICAgIGdyZWF0OiA5LFxuICAgIG1hc3RlcnBpZWNlOiAxMFxuICB9LFxuICBTRUFTT05fSURfTUFQOiB7XG4gICAgYWxsOiAwLFxuICAgIHNwcmluZzogMSxcbiAgICBzdW1tZXI6IDIsXG4gICAgZmFsbDogMyxcbiAgICB3aW50ZXI6IDRcbiAgfSxcbiAgTEFOR1VBR0VfSURfTUFQOiB7XG4gICAgYWxsOiAwLFxuICAgIHN1YjogMSxcbiAgICBkdWI6IDIsXG4gICAgXCJzdWItJi1kdWJcIjogM1xuICB9LFxuICBTT1JUX0lEX01BUDoge1xuICAgIGRlZmF1bHQ6IFwiZGVmYXVsdFwiLFxuICAgIFwicmVjZW50bHktYWRkZWRcIjogXCJyZWNlbnRseV9hZGRlZFwiLFxuICAgIFwicmVjZW50bHktdXBkYXRlZFwiOiBcInJlY2VudGx5X3VwZGF0ZWRcIixcbiAgICBzY29yZTogXCJzY29yZVwiLFxuICAgIFwibmFtZS1hLXpcIjogXCJuYW1lX2F6XCIsXG4gICAgXCJyZWxlYXNlZC1kYXRlXCI6IFwicmVsZWFzZWRfZGF0ZVwiLFxuICAgIFwibW9zdC13YXRjaGVkXCI6IFwibW9zdF93YXRjaGVkXCJcbiAgfVxufTtcbnZhciBBWl9MSVNUX1NPUlRfT1BUSU9OUyA9IHtcbiAgYWxsOiB0cnVlLFxuICBvdGhlcjogdHJ1ZSxcbiAgXCIwLTlcIjogdHJ1ZSxcbiAgYTogdHJ1ZSxcbiAgYjogdHJ1ZSxcbiAgYzogdHJ1ZSxcbiAgZDogdHJ1ZSxcbiAgZTogdHJ1ZSxcbiAgZjogdHJ1ZSxcbiAgZzogdHJ1ZSxcbiAgaDogdHJ1ZSxcbiAgaTogdHJ1ZSxcbiAgajogdHJ1ZSxcbiAgazogdHJ1ZSxcbiAgbDogdHJ1ZSxcbiAgbTogdHJ1ZSxcbiAgbjogdHJ1ZSxcbiAgbzogdHJ1ZSxcbiAgcDogdHJ1ZSxcbiAgcTogdHJ1ZSxcbiAgcjogdHJ1ZSxcbiAgczogdHJ1ZSxcbiAgdDogdHJ1ZSxcbiAgdTogdHJ1ZSxcbiAgdjogdHJ1ZSxcbiAgdzogdHJ1ZSxcbiAgeDogdHJ1ZSxcbiAgeTogdHJ1ZSxcbiAgejogdHJ1ZVxufTtcblxuLy8gc3JjL2NvbmZpZy9jbGllbnQudHNcbnZhciBjbGllbnRDb25maWcgPSB7XG4gIHRpbWVvdXQ6IDhlMyxcbiAgLy8gYmFzZVVSTDogU1JDX0JBU0VfVVJMLFxuICBoZWFkZXJzOiB7XG4gICAgQWNjZXB0OiBBQ0NFUFRfSEVBREVSLFxuICAgIFwiVXNlci1BZ2VudFwiOiBVU0VSX0FHRU5UX0hFQURFUixcbiAgICBcIkFjY2VwdC1FbmNvZGluZ1wiOiBBQ0NFUFRfRU5DT0RJTkdfSEVBREVSXG4gIH1cbn07XG52YXIgY2xpZW50ID0gYXhpb3MuY3JlYXRlKGNsaWVudENvbmZpZyk7XG5cbi8vIHNyYy9oaWFuaW1lL2Vycm9yLnRzXG5pbXBvcnQgeyBBeGlvc0Vycm9yIGFzIEF4aW9zRXJyb3IyIH0gZnJvbSBcImF4aW9zXCI7XG5cbi8vIHNyYy9jb25maWcvbG9nZ2VyLnRzXG5pbXBvcnQgeyBwaW5vIH0gZnJvbSBcInBpbm9cIjtcbmZ1bmN0aW9uIGlzRGV2RW52KCkge1xuICByZXR1cm4gIXByb2Nlc3MuZW52Lk5PREVfRU5WIHx8IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgfHwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiO1xufVxudmFyIGxvZ2dlck9wdGlvbnMgPSB7XG4gIGxldmVsOiBcImluZm9cIixcbiAgdHJhbnNwb3J0OiBpc0RldkVudigpID8ge1xuICAgIHRhcmdldDogXCJwaW5vLXByZXR0eVwiLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGNvbG9yaXplOiB0cnVlLFxuICAgICAgdHJhbnNsYXRlVGltZTogXCJTWVM6c3RhbmRhcmRcIlxuICAgIH1cbiAgfSA6IHZvaWQgMCxcbiAgZm9ybWF0dGVyczoge1xuICAgIGxldmVsKGxhYmVsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsZXZlbDogbGFiZWwudG9VcHBlckNhc2UoKSxcbiAgICAgICAgY29udGV4dDogXCJhbml3YXRjaC1wa2dcIlxuICAgICAgfTtcbiAgICB9XG4gIH0sXG4gIHJlZGFjdDogIWlzRGV2RW52KCkgPyBbXCJob3N0bmFtZVwiXSA6IFtdLFxuICB0aW1lc3RhbXA6IHBpbm8uc3RkVGltZUZ1bmN0aW9ucy5pc29UaW1lXG59O1xudmFyIGxvZyA9IHBpbm8obG9nZ2VyT3B0aW9ucyk7XG5cbi8vIHNyYy9oaWFuaW1lL2Vycm9yLnRzXG52YXIgQU5TSV9FU0NfQ09ERV9DT0xPUl9SRUQgPSBcIlxceDFCWzMxbVwiO1xudmFyIEFOU0lfRVNDX0NPREVfQ09MT1JfUkVTRVQgPSBcIlxceDFCWzBtXCI7XG52YXIgSGlBbmltZUVycm9yID0gY2xhc3MgX0hpQW5pbWVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgc3RhdGljIERFRkFVTFRfRVJST1JfU1RBVFVTID0gNTAwO1xuICBzdGF0aWMgREVGQVVMVF9FUlJPUl9NRVNTQUdFID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICBzY3JhcGVyID0gX0hpQW5pbWVFcnJvci5ERUZBVUxUX0VSUk9SX01FU1NBR0U7XG4gIHN0YXR1cyA9IF9IaUFuaW1lRXJyb3IuREVGQVVMVF9FUlJPUl9TVEFUVVM7XG4gIGNvbnN0cnVjdG9yKGVyck1zZywgc2NyYXBlck5hbWUsIHN0YXR1cykge1xuICAgIHN1cGVyKGAke3NjcmFwZXJOYW1lfTogJHtlcnJNc2d9YCk7XG4gICAgdGhpcy5uYW1lID0gX0hpQW5pbWVFcnJvci5uYW1lO1xuICAgIHRoaXMuc2NyYXBlciA9IHNjcmFwZXJOYW1lO1xuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzID49IDQwMCAmJiBzdGF0dXMgPCA2MDAgPyBzdGF0dXMgOiBfSGlBbmltZUVycm9yLkRFRkFVTFRfRVJST1JfU1RBVFVTO1xuICAgIH1cbiAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIF9IaUFuaW1lRXJyb3IpO1xuICAgIH1cbiAgICB0aGlzLmxvZ0Vycm9yKCk7XG4gIH1cbiAgc3RhdGljIHdyYXBFcnJvcihlcnIsIHNjcmFwZXJOYW1lKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIF9IaUFuaW1lRXJyb3IpIHtcbiAgICAgIHJldHVybiBlcnI7XG4gICAgfVxuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBBeGlvc0Vycm9yMikge1xuICAgICAgY29uc3Qgc3RhdHVzVGV4dCA9IGVycj8ucmVzcG9uc2U/LnN0YXR1c1RleHQgfHwgX0hpQW5pbWVFcnJvci5ERUZBVUxUX0VSUk9SX01FU1NBR0U7XG4gICAgICByZXR1cm4gbmV3IF9IaUFuaW1lRXJyb3IoXG4gICAgICAgIFwiZmV0Y2hFcnJvcjogXCIgKyBzdGF0dXNUZXh0LFxuICAgICAgICBzY3JhcGVyTmFtZSxcbiAgICAgICAgZXJyLnN0YXR1cyB8fCBfSGlBbmltZUVycm9yLkRFRkFVTFRfRVJST1JfU1RBVFVTXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IF9IaUFuaW1lRXJyb3IoXG4gICAgICBlcnI/Lm1lc3NhZ2UgfHwgX0hpQW5pbWVFcnJvci5ERUZBVUxUX0VSUk9SX01FU1NBR0UsXG4gICAgICBzY3JhcGVyTmFtZVxuICAgICk7XG4gIH1cbiAganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZVxuICAgIH07XG4gIH1cbiAgbG9nRXJyb3IoKSB7XG4gICAgbG9nLmVycm9yKFxuICAgICAgQU5TSV9FU0NfQ09ERV9DT0xPUl9SRUQgKyBKU09OLnN0cmluZ2lmeShcbiAgICAgICAge1xuICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAgICAgc2NyYXBlcjogdGhpcy5zY3JhcGVyLFxuICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICBudWxsLFxuICAgICAgICAyXG4gICAgICApICsgQU5TSV9FU0NfQ09ERV9DT0xPUl9SRVNFVFxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy91dGlscy9tZXRob2RzLnRzXG52YXIgZXh0cmFjdEFuaW1lcyA9ICgkLCBzZWxlY3Rvciwgc2NyYXBlck5hbWUpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbmltZXMgPSBbXTtcbiAgICAkKHNlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgY29uc3QgYW5pbWVJZCA9ICQoZWwpLmZpbmQoXCIuZmlsbS1kZXRhaWwgLmZpbG0tbmFtZSAuZHluYW1pYy1uYW1lXCIpPy5hdHRyKFwiaHJlZlwiKT8uc2xpY2UoMSkuc3BsaXQoXCI/cmVmPXNlYXJjaFwiKVswXSB8fCBudWxsO1xuICAgICAgYW5pbWVzLnB1c2goe1xuICAgICAgICBpZDogYW5pbWVJZCxcbiAgICAgICAgbmFtZTogJChlbCkuZmluZChcIi5maWxtLWRldGFpbCAuZmlsbS1uYW1lIC5keW5hbWljLW5hbWVcIik/LnRleHQoKT8udHJpbSgpLFxuICAgICAgICBqbmFtZTogJChlbCkuZmluZChcIi5maWxtLWRldGFpbCAuZmlsbS1uYW1lIC5keW5hbWljLW5hbWVcIik/LmF0dHIoXCJkYXRhLWpuYW1lXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgcG9zdGVyOiAkKGVsKS5maW5kKFwiLmZpbG0tcG9zdGVyIC5maWxtLXBvc3Rlci1pbWdcIik/LmF0dHIoXCJkYXRhLXNyY1wiKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGR1cmF0aW9uOiAkKGVsKS5maW5kKFwiLmZpbG0tZGV0YWlsIC5mZC1pbmZvciAuZmRpLWl0ZW0uZmRpLWR1cmF0aW9uXCIpPy50ZXh0KCk/LnRyaW0oKSxcbiAgICAgICAgdHlwZTogJChlbCkuZmluZChcIi5maWxtLWRldGFpbCAuZmQtaW5mb3IgLmZkaS1pdGVtOm50aC1vZi10eXBlKDEpXCIpPy50ZXh0KCk/LnRyaW0oKSxcbiAgICAgICAgcmF0aW5nOiAkKGVsKS5maW5kKFwiLmZpbG0tcG9zdGVyIC50aWNrLXJhdGVcIik/LnRleHQoKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGVwaXNvZGVzOiB7XG4gICAgICAgICAgc3ViOiBOdW1iZXIoXG4gICAgICAgICAgICAkKGVsKS5maW5kKFwiLmZpbG0tcG9zdGVyIC50aWNrLXN1YlwiKT8udGV4dCgpPy50cmltKCkuc3BsaXQoXCIgXCIpLnBvcCgpXG4gICAgICAgICAgKSB8fCBudWxsLFxuICAgICAgICAgIGR1YjogTnVtYmVyKFxuICAgICAgICAgICAgJChlbCkuZmluZChcIi5maWxtLXBvc3RlciAudGljay1kdWJcIik/LnRleHQoKT8udHJpbSgpLnNwbGl0KFwiIFwiKS5wb3AoKVxuICAgICAgICAgICkgfHwgbnVsbFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gYW5pbWVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgc2NyYXBlck5hbWUpO1xuICB9XG59O1xudmFyIGV4dHJhY3RUb3AxMEFuaW1lcyA9ICgkLCBwZXJpb2QsIHNjcmFwZXJOYW1lKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYW5pbWVzID0gW107XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBgI3RvcC12aWV3ZWQtJHtwZXJpb2R9IHVsIGxpYDtcbiAgICAkKHNlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgYW5pbWVzLnB1c2goe1xuICAgICAgICBpZDogJChlbCkuZmluZChcIi5maWxtLWRldGFpbCAuZHluYW1pYy1uYW1lXCIpPy5hdHRyKFwiaHJlZlwiKT8uc2xpY2UoMSkudHJpbSgpIHx8IG51bGwsXG4gICAgICAgIHJhbms6IE51bWJlcigkKGVsKS5maW5kKFwiLmZpbG0tbnVtYmVyIHNwYW5cIik/LnRleHQoKT8udHJpbSgpKSB8fCBudWxsLFxuICAgICAgICBuYW1lOiAkKGVsKS5maW5kKFwiLmZpbG0tZGV0YWlsIC5keW5hbWljLW5hbWVcIik/LnRleHQoKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGpuYW1lOiAkKGVsKS5maW5kKFwiLmZpbG0tZGV0YWlsIC5keW5hbWljLW5hbWVcIik/LmF0dHIoXCJkYXRhLWpuYW1lXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgcG9zdGVyOiAkKGVsKS5maW5kKFwiLmZpbG0tcG9zdGVyIC5maWxtLXBvc3Rlci1pbWdcIik/LmF0dHIoXCJkYXRhLXNyY1wiKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGVwaXNvZGVzOiB7XG4gICAgICAgICAgc3ViOiBOdW1iZXIoXG4gICAgICAgICAgICAkKGVsKS5maW5kKFxuICAgICAgICAgICAgICBcIi5maWxtLWRldGFpbCAuZmQtaW5mb3IgLnRpY2staXRlbS50aWNrLXN1YlwiXG4gICAgICAgICAgICApPy50ZXh0KCk/LnRyaW0oKVxuICAgICAgICAgICkgfHwgbnVsbCxcbiAgICAgICAgICBkdWI6IE51bWJlcihcbiAgICAgICAgICAgICQoZWwpLmZpbmQoXG4gICAgICAgICAgICAgIFwiLmZpbG0tZGV0YWlsIC5mZC1pbmZvciAudGljay1pdGVtLnRpY2stZHViXCJcbiAgICAgICAgICAgICk/LnRleHQoKT8udHJpbSgpXG4gICAgICAgICAgKSB8fCBudWxsXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBhbmltZXM7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEhpQW5pbWVFcnJvci53cmFwRXJyb3IoZXJyLCBzY3JhcGVyTmFtZSk7XG4gIH1cbn07XG52YXIgZXh0cmFjdE1vc3RQb3B1bGFyQW5pbWVzID0gKCQsIHNlbGVjdG9yLCBzY3JhcGVyTmFtZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGFuaW1lcyA9IFtdO1xuICAgICQoc2VsZWN0b3IpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBhbmltZXMucHVzaCh7XG4gICAgICAgIGlkOiAkKGVsKS5maW5kKFwiLmZpbG0tZGV0YWlsIC5keW5hbWljLW5hbWVcIik/LmF0dHIoXCJocmVmXCIpPy5zbGljZSgxKS50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgbmFtZTogJChlbCkuZmluZChcIi5maWxtLWRldGFpbCAuZHluYW1pYy1uYW1lXCIpPy50ZXh0KCk/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBqbmFtZTogJChlbCkuZmluZChcIi5maWxtLWRldGFpbCAuZmlsbS1uYW1lIC5keW5hbWljLW5hbWVcIikuYXR0cihcImRhdGEtam5hbWVcIik/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBwb3N0ZXI6ICQoZWwpLmZpbmQoXCIuZmlsbS1wb3N0ZXIgLmZpbG0tcG9zdGVyLWltZ1wiKT8uYXR0cihcImRhdGEtc3JjXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgZXBpc29kZXM6IHtcbiAgICAgICAgICBzdWI6IE51bWJlcihcbiAgICAgICAgICAgICQoZWwpPy5maW5kKFwiLmZkLWluZm9yIC50aWNrIC50aWNrLXN1YlwiKT8udGV4dCgpPy50cmltKClcbiAgICAgICAgICApIHx8IG51bGwsXG4gICAgICAgICAgZHViOiBOdW1iZXIoXG4gICAgICAgICAgICAkKGVsKT8uZmluZChcIi5mZC1pbmZvciAudGljayAudGljay1kdWJcIik/LnRleHQoKT8udHJpbSgpXG4gICAgICAgICAgKSB8fCBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6ICQoZWwpPy5maW5kKFwiLmZkLWluZm9yIC50aWNrXCIpPy50ZXh0KCk/LnRyaW0oKT8ucmVwbGFjZSgvW1xcc1xcbl0rL2csIFwiIFwiKT8uc3BsaXQoXCIgXCIpPy5wb3AoKSB8fCBudWxsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gYW5pbWVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgc2NyYXBlck5hbWUpO1xuICB9XG59O1xuZnVuY3Rpb24gcmV0cmlldmVTZXJ2ZXJJZCgkLCBpbmRleCwgY2F0ZWdvcnkpIHtcbiAgcmV0dXJuICQoXG4gICAgYC5wc18tYmxvY2sucHNfLWJsb2NrLXN1Yi5zZXJ2ZXJzLSR7Y2F0ZWdvcnl9ID4gLnBzX18tbGlzdCAuc2VydmVyLWl0ZW1gXG4gICk/Lm1hcChcbiAgICAoXywgZWwpID0+ICQoZWwpLmF0dHIoXCJkYXRhLXNlcnZlci1pZFwiKSA9PSBgJHtpbmRleH1gID8gJChlbCkgOiBudWxsXG4gICk/LmdldCgpWzBdPy5hdHRyKFwiZGF0YS1pZFwiKSB8fCBudWxsO1xufVxuZnVuY3Rpb24gZ2V0R2VucmVzRmlsdGVyVmFsKGdlbnJlTmFtZXMpIHtcbiAgaWYgKGdlbnJlTmFtZXMubGVuZ3RoIDwgMSkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGdlbnJlTmFtZXMubWFwKChuYW1lKSA9PiBTRUFSQ0hfUEFHRV9GSUxURVJTW1wiR0VOUkVTX0lEX01BUFwiXVtuYW1lXSkuam9pbihcIixcIik7XG59XG5mdW5jdGlvbiBnZXRTZWFyY2hGaWx0ZXJWYWx1ZShrZXksIHJhd1ZhbHVlKSB7XG4gIHJhd1ZhbHVlID0gcmF3VmFsdWUudHJpbSgpO1xuICBpZiAoIXJhd1ZhbHVlKSByZXR1cm4gdm9pZCAwO1xuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgXCJnZW5yZXNcIjoge1xuICAgICAgcmV0dXJuIGdldEdlbnJlc0ZpbHRlclZhbChyYXdWYWx1ZS5zcGxpdChcIixcIikpO1xuICAgIH1cbiAgICBjYXNlIFwidHlwZVwiOiB7XG4gICAgICBjb25zdCB2YWwgPSBTRUFSQ0hfUEFHRV9GSUxURVJTW1wiVFlQRV9JRF9NQVBcIl1bcmF3VmFsdWVdID8/IDA7XG4gICAgICByZXR1cm4gdmFsID09PSAwID8gdm9pZCAwIDogYCR7dmFsfWA7XG4gICAgfVxuICAgIGNhc2UgXCJzdGF0dXNcIjoge1xuICAgICAgY29uc3QgdmFsID0gU0VBUkNIX1BBR0VfRklMVEVSU1tcIlNUQVRVU19JRF9NQVBcIl1bcmF3VmFsdWVdID8/IDA7XG4gICAgICByZXR1cm4gdmFsID09PSAwID8gdm9pZCAwIDogYCR7dmFsfWA7XG4gICAgfVxuICAgIGNhc2UgXCJyYXRlZFwiOiB7XG4gICAgICBjb25zdCB2YWwgPSBTRUFSQ0hfUEFHRV9GSUxURVJTW1wiUkFURURfSURfTUFQXCJdW3Jhd1ZhbHVlXSA/PyAwO1xuICAgICAgcmV0dXJuIHZhbCA9PT0gMCA/IHZvaWQgMCA6IGAke3ZhbH1gO1xuICAgIH1cbiAgICBjYXNlIFwic2NvcmVcIjoge1xuICAgICAgY29uc3QgdmFsID0gU0VBUkNIX1BBR0VfRklMVEVSU1tcIlNDT1JFX0lEX01BUFwiXVtyYXdWYWx1ZV0gPz8gMDtcbiAgICAgIHJldHVybiB2YWwgPT09IDAgPyB2b2lkIDAgOiBgJHt2YWx9YDtcbiAgICB9XG4gICAgY2FzZSBcInNlYXNvblwiOiB7XG4gICAgICBjb25zdCB2YWwgPSBTRUFSQ0hfUEFHRV9GSUxURVJTW1wiU0VBU09OX0lEX01BUFwiXVtyYXdWYWx1ZV0gPz8gMDtcbiAgICAgIHJldHVybiB2YWwgPT09IDAgPyB2b2lkIDAgOiBgJHt2YWx9YDtcbiAgICB9XG4gICAgY2FzZSBcImxhbmd1YWdlXCI6IHtcbiAgICAgIGNvbnN0IHZhbCA9IFNFQVJDSF9QQUdFX0ZJTFRFUlNbXCJMQU5HVUFHRV9JRF9NQVBcIl1bcmF3VmFsdWVdID8/IDA7XG4gICAgICByZXR1cm4gdmFsID09PSAwID8gdm9pZCAwIDogYCR7dmFsfWA7XG4gICAgfVxuICAgIGNhc2UgXCJzb3J0XCI6IHtcbiAgICAgIHJldHVybiBTRUFSQ0hfUEFHRV9GSUxURVJTW1wiU09SVF9JRF9NQVBcIl1bcmF3VmFsdWVdID8/IHZvaWQgMDtcbiAgICB9XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFNlYXJjaERhdGVGaWx0ZXJWYWx1ZShpc1N0YXJ0RGF0ZSwgcmF3VmFsdWUpIHtcbiAgcmF3VmFsdWUgPSByYXdWYWx1ZS50cmltKCk7XG4gIGlmICghcmF3VmFsdWUpIHJldHVybiB2b2lkIDA7XG4gIGNvbnN0IGRhdGVSZWdleCA9IC9eXFxkezR9LShbMC05XXwxWzAtMl0pLShbMC05XXxbMTJdWzAtOV18M1swMV0pJC87XG4gIGNvbnN0IGRhdGVDYXRlZ29yeSA9IGlzU3RhcnREYXRlID8gXCJzXCIgOiBcImVcIjtcbiAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXRlXSA9IHJhd1ZhbHVlLnNwbGl0KFwiLVwiKTtcbiAgaWYgKCFkYXRlUmVnZXgudGVzdChyYXdWYWx1ZSkpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIHJldHVybiBbXG4gICAgTnVtYmVyKHllYXIpID4gMCA/IGAke2RhdGVDYXRlZ29yeX15PSR7eWVhcn1gIDogXCJcIixcbiAgICBOdW1iZXIobW9udGgpID4gMCA/IGAke2RhdGVDYXRlZ29yeX1tPSR7bW9udGh9YCA6IFwiXCIsXG4gICAgTnVtYmVyKGRhdGUpID4gMCA/IGAke2RhdGVDYXRlZ29yeX1kPSR7ZGF0ZX1gIDogXCJcIlxuICBdLmZpbHRlcigoZCkgPT4gQm9vbGVhbihkKSk7XG59XG5mdW5jdGlvbiBzdWJzdHJpbmdBZnRlcihzdHIsIHRvRmluZCkge1xuICBjb25zdCBpbmRleCA9IHN0ci5pbmRleE9mKHRvRmluZCk7XG4gIHJldHVybiBpbmRleCA9PSAtMSA/IFwiXCIgOiBzdHIuc3Vic3RyaW5nKGluZGV4ICsgdG9GaW5kLmxlbmd0aCk7XG59XG5mdW5jdGlvbiBzdWJzdHJpbmdCZWZvcmUoc3RyLCB0b0ZpbmQpIHtcbiAgY29uc3QgaW5kZXggPSBzdHIuaW5kZXhPZih0b0ZpbmQpO1xuICByZXR1cm4gaW5kZXggPT0gLTEgPyBcIlwiIDogc3RyLnN1YnN0cmluZygwLCBpbmRleCk7XG59XG5hc3luYyBmdW5jdGlvbiBnZXRNZWdhQ2xvdWRDbGllbnRLZXkoeHJheCkge1xuICBsZXQgdGV4dDtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXEgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL21lZ2FjbG91ZC5ibG9nL2VtYmVkLTIvdjMvZS0xLyR7eHJheH1gLFxuICAgICAgeyBoZWFkZXJzOiB7IFJlZmVyZXI6IFwiaHR0cHM6Ly9oaWFuaW1lLnRvL1wiIH0gfVxuICAgICk7XG4gICAgdGV4dCA9IGF3YWl0IHJlcS50ZXh0KCk7XG4gICAgbGV0IHJlZ2V4ID0gW1xuICAgICAgLzxtZXRhIG5hbWU9XCJfZ2dfZmJcIiBjb250ZW50PVwiW2EtekEtWjAtOV0rXCI+LyxcbiAgICAgIC88IS0tXFxzK19pc190aDpbMC05YS16QS1aXStcXHMrLS0+LyxcbiAgICAgIC88c2NyaXB0PndpbmRvdy5fbGtfZGJcXHMrPVxccytcXHtbeHl6XTpcXHMrW1wiJyddW2EtekEtWjAtOV0rW1wiJyddLFxccytbeHl6XTpcXHMrW1wiJyddW2EtekEtWjAtOV0rW1wiJyddLFxccytbeHl6XTpcXHMrW1wiJyddW2EtekEtWjAtOV0rW1wiJyddXFx9OzxcXC9zY3JpcHQ+LyxcbiAgICAgIC88ZGl2XFxzK2RhdGEtZHBpPVwiWzAtOWEtekEtWl0rXCJcXHMrLio+PFxcL2Rpdj4vLFxuICAgICAgLzxzY3JpcHQgbm9uY2U9XCJbMC05YS16QS1aXStcIj4vLFxuICAgICAgLzxzY3JpcHQ+d2luZG93Ll94eV93cyA9IFsnXCJgXVswLTlhLXpBLVpdK1snXCJgXTs8XFwvc2NyaXB0Pi9cbiAgICBdO1xuICAgIGNvbnN0IGtleSA9IC9cIlthLXpBLVowLTldK1wiLztcbiAgICBjb25zdCBsa19kYl9yZWdleCA9IFtcbiAgICAgIC94OlxccytcIlthLXpBLVowLTldK1wiLyxcbiAgICAgIC95OlxccytcIlthLXpBLVowLTldK1wiLyxcbiAgICAgIC96OlxccytcIlthLXpBLVowLTldK1wiL1xuICAgIF07XG4gICAgbGV0IHBhc3MgPSBudWxsO1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgZm9yIChsZXQgdGVzdCBpbiByZWdleCkge1xuICAgICAgcGFzcyA9IHRleHQubWF0Y2gocmVnZXhbdGVzdF0pO1xuICAgICAgaWYgKHBhc3MgIT09IG51bGwpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwYXNzID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgZXh0cmFjdGluZyBjbGllbnQga2V5IHNlZ21lbnRcIik7XG4gICAgfVxuICAgIGxldCBjbGllbnRLZXkgPSBcIlwiO1xuICAgIGlmIChjb3VudCA9PT0gMikge1xuICAgICAgbGV0IHggPSBwYXNzWzBdLm1hdGNoKGxrX2RiX3JlZ2V4WzBdKTtcbiAgICAgIGlmICh4ID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgYnVpbGRpbmcgY2xpZW50IGtleSAoeHl6KVwiKTtcbiAgICAgIGxldCBwMSA9IHhbMF0ubWF0Y2goa2V5KTtcbiAgICAgIGlmIChwMSA9PT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIGJ1aWxkaW5nIGNsaWVudCBrZXkgKHh5eilcIik7XG4gICAgICBsZXQgeSA9IHBhc3NbMF0ubWF0Y2gobGtfZGJfcmVnZXhbMF0pO1xuICAgICAgaWYgKHkgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBidWlsZGluZyBjbGllbnQga2V5ICh4eXopXCIpO1xuICAgICAgbGV0IHAyID0geVswXS5tYXRjaChrZXkpO1xuICAgICAgaWYgKHAyID09PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgYnVpbGRpbmcgY2xpZW50IGtleSAoeHl6KVwiKTtcbiAgICAgIGxldCB6ID0gcGFzc1swXS5tYXRjaChsa19kYl9yZWdleFswXSk7XG4gICAgICBpZiAoeiA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIGJ1aWxkaW5nIGNsaWVudCBrZXkgKHh5eilcIik7XG4gICAgICBsZXQgcDMgPSB6WzBdLm1hdGNoKGtleSk7XG4gICAgICBpZiAocDMgPT09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBidWlsZGluZyBjbGllbnQga2V5ICh4eXopXCIpO1xuICAgICAgY2xpZW50S2V5ID0gYCR7cDFbMF0ucmVwbGFjZUFsbCgnXCInLCBcIlwiKX0ke3AyWzBdLnJlcGxhY2VBbGwoJ1wiJywgXCJcIil9JHtwM1swXS5yZXBsYWNlQWxsKCdcIicsIFwiXCIpfWA7XG4gICAgfSBlbHNlIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgdmFyIGtleXRlc3QgPSBwYXNzWzBdLm1hdGNoKC86W2EtekEtWjAtOV0rIC8pO1xuICAgICAgaWYgKGtleXRlc3QgPT09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBleHRyYWN0aW5nIGNsaWVudCBrZXkgKG5vbmNlKVwiKTtcbiAgICAgIGNsaWVudEtleSA9IGtleXRlc3RbMF0ucmVwbGFjZUFsbChcIjpcIiwgXCJcIikucmVwbGFjZUFsbChcIiBcIiwgXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXl0ZXN0ID0gcGFzc1swXS5tYXRjaChrZXkpO1xuICAgICAgaWYgKGtleXRlc3QgPT09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBleHRyYWN0aW5nIGNsaWVudCBrZXlcIik7XG4gICAgICBjbGllbnRLZXkgPSBrZXl0ZXN0WzBdLnJlcGxhY2VBbGwoJ1wiJywgXCJcIik7XG4gICAgfVxuICAgIHJldHVybiBjbGllbnRLZXk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuZnVuY3Rpb24gZGVjcnlwdFNyYzIoc3JjLCBjbGllbnRLZXksIG1lZ2FjbG91ZEtleSkge1xuICB2YXIgbGF5ZXJzID0gMztcbiAgdmFyIGdlbktleSA9IGtleWdlbjIobWVnYWNsb3VkS2V5LCBjbGllbnRLZXkpO1xuICB2YXIgZGVjU3JjID0gYXRvYihzcmMpO1xuICB2YXIgY2hhckFycmF5ID0gWy4uLkFycmF5KDk1KV0ubWFwKChfdmFsLCBpbmRleCkgPT4ge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDMyICsgaW5kZXgpO1xuICB9KTtcbiAgdmFyIHJldmVyc2VMYXllciA9IGZ1bmN0aW9uKGl0ZXJhdGlvbikge1xuICAgIHZhciBsYXllcktleSA9IGdlbktleSArIGl0ZXJhdGlvbjtcbiAgICB2YXIgaGFzaFZhbCA9IDBuO1xuICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBsYXllcktleS5sZW5ndGg7IGkyKyspIHtcbiAgICAgIGhhc2hWYWwgPSBoYXNoVmFsICogMzFuICsgQmlnSW50KGxheWVyS2V5LmNoYXJDb2RlQXQoaTIpKSAmIDB4ZmZmZmZmZmZuO1xuICAgIH1cbiAgICB2YXIgc2VlZCA9IGhhc2hWYWw7XG4gICAgdmFyIHNlZWRSYW5kID0gKGFyZykgPT4ge1xuICAgICAgc2VlZCA9IHNlZWQgKiAxMTAzNTE1MjQ1biArIDEyMzQ1biAmIDB4N2ZmZmZmZmZuO1xuICAgICAgcmV0dXJuIE51bWJlcihzZWVkICUgQmlnSW50KGFyZykpO1xuICAgIH07XG4gICAgZGVjU3JjID0gZGVjU3JjLnNwbGl0KFwiXCIpLm1hcCgoY2hhciwgX2luZGV4KSA9PiB7XG4gICAgICB2YXIgY0FycnlJbmRleCA9IGNoYXJBcnJheS5pbmRleE9mKGNoYXIpO1xuICAgICAgaWYgKGNBcnJ5SW5kZXggPT09IC0xKSByZXR1cm4gY2hhcjtcbiAgICAgIHZhciByYW5kTnVtID0gc2VlZFJhbmQoOTUpO1xuICAgICAgdmFyIG5ld0NoYXJJbmRleCA9IChjQXJyeUluZGV4IC0gcmFuZE51bSArIDk1KSAlIDk1O1xuICAgICAgcmV0dXJuIGNoYXJBcnJheVtuZXdDaGFySW5kZXhdO1xuICAgIH0pLmpvaW4oXCJcIik7XG4gICAgZGVjU3JjID0gY29sdW1uYXJDaXBoZXIyKGRlY1NyYywgbGF5ZXJLZXkpO1xuICAgIHZhciBzdWJWYWx1ZXMgPSBzZWVkU2h1ZmZsZTIoY2hhckFycmF5LCBsYXllcktleSk7XG4gICAgdmFyIGNoYXJNYXAgPSB7fTtcbiAgICBzdWJWYWx1ZXMuZm9yRWFjaCgoY2hhciwgaW5kZXgpID0+IHtcbiAgICAgIGNoYXJNYXBbY2hhcl0gPSBjaGFyQXJyYXlbaW5kZXhdO1xuICAgIH0pO1xuICAgIGRlY1NyYyA9IGRlY1NyYy5zcGxpdChcIlwiKS5tYXAoKGNoYXIpID0+IHtcbiAgICAgIHJldHVybiBjaGFyTWFwW2NoYXJdIHx8IGNoYXI7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTtcbiAgZm9yICh2YXIgaSA9IGxheWVyczsgaSA+IDA7IGktLSkge1xuICAgIHJldmVyc2VMYXllcihpKTtcbiAgfVxuICB2YXIgZGF0YUxlbiA9IHBhcnNlSW50KGRlY1NyYy5zdWJzdHJpbmcoMCwgNCksIDEwKTtcbiAgcmV0dXJuIGRlY1NyYy5zdWJzdHJpbmcoNCwgNCArIGRhdGFMZW4pO1xufVxuZnVuY3Rpb24ga2V5Z2VuMihtZWdhY2xvdWRLZXksIGNsaWVudEtleSkge1xuICB2YXIga2V5Z2VuSGFzaE11bHRWYWwgPSAzMW47XG4gIHZhciBrZXlnZW5YT1JWYWwgPSAyNDc7XG4gIHZhciBrZXlnZW5TaGlmdFZhbCA9IDU7XG4gIHZhciB0ZW1wS2V5ID0gbWVnYWNsb3VkS2V5ICsgY2xpZW50S2V5O1xuICB2YXIgaGFzaFZhbCA9IDBuO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBLZXkubGVuZ3RoOyBpKyspIHtcbiAgICBoYXNoVmFsID0gQmlnSW50KHRlbXBLZXkuY2hhckNvZGVBdChpKSkgKyBoYXNoVmFsICoga2V5Z2VuSGFzaE11bHRWYWwgKyAoaGFzaFZhbCA8PCA3bikgLSBoYXNoVmFsO1xuICB9XG4gIGhhc2hWYWwgPSBoYXNoVmFsIDwgMG4gPyAtaGFzaFZhbCA6IGhhc2hWYWw7XG4gIHZhciBsSGFzaCA9IE51bWJlcihoYXNoVmFsICUgMHg3ZmZmZmZmZmZmZmZmZmZmbik7XG4gIHRlbXBLZXkgPSB0ZW1wS2V5LnNwbGl0KFwiXCIpLm1hcCgoYykgPT4ge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMuY2hhckNvZGVBdCgwKSBeIGtleWdlblhPUlZhbCk7XG4gIH0pLmpvaW4oXCJcIik7XG4gIHZhciBwaXZvdCA9IGxIYXNoICUgdGVtcEtleS5sZW5ndGggKyBrZXlnZW5TaGlmdFZhbDtcbiAgdGVtcEtleSA9IHRlbXBLZXkuc2xpY2UocGl2b3QpICsgdGVtcEtleS5zbGljZSgwLCBwaXZvdCk7XG4gIHZhciBsZWFmU3RyID0gY2xpZW50S2V5LnNwbGl0KFwiXCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xuICB2YXIgcmV0dXJuS2V5ID0gXCJcIjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBNYXRoLm1heCh0ZW1wS2V5Lmxlbmd0aCwgbGVhZlN0ci5sZW5ndGgpOyBpKyspIHtcbiAgICByZXR1cm5LZXkgKz0gKHRlbXBLZXlbaV0gfHwgXCJcIikgKyAobGVhZlN0cltpXSB8fCBcIlwiKTtcbiAgfVxuICByZXR1cm5LZXkgPSByZXR1cm5LZXkuc3Vic3RyaW5nKDAsIDk2ICsgbEhhc2ggJSAzMyk7XG4gIHJldHVybktleSA9IFsuLi5yZXR1cm5LZXldLm1hcCgoYykgPT4ge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMuY2hhckNvZGVBdCgwKSAlIDk1ICsgMzIpO1xuICB9KS5qb2luKFwiXCIpO1xuICByZXR1cm4gcmV0dXJuS2V5O1xufVxuZnVuY3Rpb24gc2VlZFNodWZmbGUyKENoYXJhY3RlckFycmF5LCBpS2V5KSB7XG4gIHZhciBoYXNoVmFsID0gMG47XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaUtleS5sZW5ndGg7IGkrKykge1xuICAgIGhhc2hWYWwgPSBoYXNoVmFsICogMzFuICsgQmlnSW50KGlLZXkuY2hhckNvZGVBdChpKSkgJiAweGZmZmZmZmZmbjtcbiAgfVxuICB2YXIgc2h1ZmZsZU51bSA9IGhhc2hWYWw7XG4gIHZhciBwc3Vkb1JhbmQgPSAoYXJnKSA9PiB7XG4gICAgc2h1ZmZsZU51bSA9IHNodWZmbGVOdW0gKiAxMTAzNTE1MjQ1biArIDEyMzQ1biAmIDB4N2ZmZmZmZmZuO1xuICAgIHJldHVybiBOdW1iZXIoc2h1ZmZsZU51bSAlIEJpZ0ludChhcmcpKTtcbiAgfTtcbiAgdmFyIHJldFN0ciA9IFsuLi5DaGFyYWN0ZXJBcnJheV07XG4gIGZvciAodmFyIGkgPSByZXRTdHIubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgIHZhciBzd2FwSW5kZXggPSBwc3Vkb1JhbmQoaSArIDEpO1xuICAgIFtyZXRTdHJbaV0sIHJldFN0cltzd2FwSW5kZXhdXSA9IFtyZXRTdHJbc3dhcEluZGV4XSwgcmV0U3RyW2ldXTtcbiAgfVxuICByZXR1cm4gcmV0U3RyO1xufVxuZnVuY3Rpb24gY29sdW1uYXJDaXBoZXIyKHNyYywgaWtleSkge1xuICB2YXIgY29sdW1uQ291bnQgPSBpa2V5Lmxlbmd0aDtcbiAgdmFyIHJvd0NvdW50ID0gTWF0aC5jZWlsKHNyYy5sZW5ndGggLyBjb2x1bW5Db3VudCk7XG4gIHZhciBjaXBoZXJBcnJ5ID0gQXJyYXkocm93Q291bnQpLmZpbGwobnVsbCkubWFwKCgpID0+IHtcbiAgICByZXR1cm4gQXJyYXkoY29sdW1uQ291bnQpLmZpbGwoXCIgXCIpO1xuICB9KTtcbiAgdmFyIGtleU1hcCA9IGlrZXkuc3BsaXQoXCJcIikubWFwKChjaGFyLCBpbmRleCkgPT4ge1xuICAgIHJldHVybiB7IGNoYXIsIGlkeDogaW5kZXggfTtcbiAgfSk7XG4gIHZhciBzb3J0ZWRNYXAgPSBbLi4ua2V5TWFwXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgcmV0dXJuIGEuY2hhci5jaGFyQ29kZUF0KDApIC0gYi5jaGFyLmNoYXJDb2RlQXQoMCk7XG4gIH0pO1xuICB2YXIgc3JjSW5kZXggPSAwO1xuICBzb3J0ZWRNYXAuZm9yRWFjaCgoeyBpZHg6IGluZGV4IH0pID0+IHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvd0NvdW50OyBpKyspIHtcbiAgICAgIGNpcGhlckFycnlbaV1baW5kZXhdID0gc3JjW3NyY0luZGV4KytdO1xuICAgIH1cbiAgfSk7XG4gIHZhciByZXR1cm5TdHIgPSBcIlwiO1xuICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd0NvdW50OyB4KyspIHtcbiAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGNvbHVtbkNvdW50OyB5KyspIHtcbiAgICAgIHJldHVyblN0ciArPSBjaXBoZXJBcnJ5W3hdW3ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0dXJuU3RyO1xufVxuXG4vLyBzcmMvaGlhbmltZS9zY3JhcGVycy9ob21lUGFnZS50c1xuYXN5bmMgZnVuY3Rpb24gZ2V0SG9tZVBhZ2UoKSB7XG4gIGNvbnN0IHJlcyA9IHtcbiAgICBzcG90bGlnaHRBbmltZXM6IFtdLFxuICAgIHRyZW5kaW5nQW5pbWVzOiBbXSxcbiAgICBsYXRlc3RFcGlzb2RlQW5pbWVzOiBbXSxcbiAgICB0b3BVcGNvbWluZ0FuaW1lczogW10sXG4gICAgdG9wMTBBbmltZXM6IHtcbiAgICAgIHRvZGF5OiBbXSxcbiAgICAgIHdlZWs6IFtdLFxuICAgICAgbW9udGg6IFtdXG4gICAgfSxcbiAgICB0b3BBaXJpbmdBbmltZXM6IFtdLFxuICAgIG1vc3RQb3B1bGFyQW5pbWVzOiBbXSxcbiAgICBtb3N0RmF2b3JpdGVBbmltZXM6IFtdLFxuICAgIGxhdGVzdENvbXBsZXRlZEFuaW1lczogW10sXG4gICAgZ2VucmVzOiBbXVxuICB9O1xuICB0cnkge1xuICAgIGNvbnN0IG1haW5QYWdlID0gYXdhaXQgY2xpZW50LmdldChTUkNfSE9NRV9VUkwpO1xuICAgIGNvbnN0ICQgPSBsb2FkKG1haW5QYWdlLmRhdGEpO1xuICAgIGNvbnN0IHNwb3RsaWdodFNlbGVjdG9yID0gXCIjc2xpZGVyIC5zd2lwZXItd3JhcHBlciAuc3dpcGVyLXNsaWRlXCI7XG4gICAgJChzcG90bGlnaHRTZWxlY3RvcikuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgIGNvbnN0IG90aGVySW5mbyA9ICQoZWwpLmZpbmQoXCIuZGVzbGlkZS1pdGVtLWNvbnRlbnQgLnNjLWRldGFpbCAuc2NkLWl0ZW1cIikubWFwKChfMiwgZWwyKSA9PiAkKGVsMikudGV4dCgpLnRyaW0oKSkuZ2V0KCkuc2xpY2UoMCwgLTEpO1xuICAgICAgcmVzLnNwb3RsaWdodEFuaW1lcy5wdXNoKHtcbiAgICAgICAgcmFuazogTnVtYmVyKFxuICAgICAgICAgICQoZWwpLmZpbmQoXCIuZGVzbGlkZS1pdGVtLWNvbnRlbnQgLmRlc2ktc3ViLXRleHRcIik/LnRleHQoKS50cmltKCkuc3BsaXQoXCIgXCIpWzBdLnNsaWNlKDEpXG4gICAgICAgICkgfHwgbnVsbCxcbiAgICAgICAgaWQ6ICQoZWwpLmZpbmQoXCIuZGVzbGlkZS1pdGVtLWNvbnRlbnQgLmRlc2ktYnV0dG9ucyBhXCIpPy5sYXN0KCk/LmF0dHIoXCJocmVmXCIpPy5zbGljZSgxKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIG5hbWU6ICQoZWwpLmZpbmQoXCIuZGVzbGlkZS1pdGVtLWNvbnRlbnQgLmRlc2ktaGVhZC10aXRsZS5keW5hbWljLW5hbWVcIik/LnRleHQoKS50cmltKCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiAkKGVsKS5maW5kKFwiLmRlc2xpZGUtaXRlbS1jb250ZW50IC5kZXNpLWRlc2NyaXB0aW9uXCIpPy50ZXh0KCk/LnNwbGl0KFwiW1wiKT8uc2hpZnQoKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIHBvc3RlcjogJChlbCkuZmluZChcbiAgICAgICAgICBcIi5kZXNsaWRlLWNvdmVyIC5kZXNsaWRlLWNvdmVyLWltZyAuZmlsbS1wb3N0ZXItaW1nXCJcbiAgICAgICAgKT8uYXR0cihcImRhdGEtc3JjXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgam5hbWU6ICQoZWwpLmZpbmQoXG4gICAgICAgICAgXCIuZGVzbGlkZS1pdGVtLWNvbnRlbnQgLmRlc2ktaGVhZC10aXRsZS5keW5hbWljLW5hbWVcIlxuICAgICAgICApPy5hdHRyKFwiZGF0YS1qbmFtZVwiKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGVwaXNvZGVzOiB7XG4gICAgICAgICAgc3ViOiBOdW1iZXIoXG4gICAgICAgICAgICAkKGVsKS5maW5kKFxuICAgICAgICAgICAgICBcIi5kZXNsaWRlLWl0ZW0tY29udGVudCAuc2MtZGV0YWlsIC5zY2QtaXRlbSAudGljay1pdGVtLnRpY2stc3ViXCJcbiAgICAgICAgICAgICk/LnRleHQoKT8udHJpbSgpXG4gICAgICAgICAgKSB8fCBudWxsLFxuICAgICAgICAgIGR1YjogTnVtYmVyKFxuICAgICAgICAgICAgJChlbCkuZmluZChcbiAgICAgICAgICAgICAgXCIuZGVzbGlkZS1pdGVtLWNvbnRlbnQgLnNjLWRldGFpbCAuc2NkLWl0ZW0gLnRpY2staXRlbS50aWNrLWR1YlwiXG4gICAgICAgICAgICApPy50ZXh0KCk/LnRyaW0oKVxuICAgICAgICAgICkgfHwgbnVsbFxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBvdGhlckluZm8/LlswXSB8fCBudWxsLFxuICAgICAgICBvdGhlckluZm9cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IHRyZW5kaW5nU2VsZWN0b3IgPSBcIiN0cmVuZGluZy1ob21lIC5zd2lwZXItd3JhcHBlciAuc3dpcGVyLXNsaWRlXCI7XG4gICAgJCh0cmVuZGluZ1NlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgcmVzLnRyZW5kaW5nQW5pbWVzLnB1c2goe1xuICAgICAgICByYW5rOiBwYXJzZUludChcbiAgICAgICAgICAkKGVsKS5maW5kKFwiLml0ZW0gLm51bWJlclwiKT8uY2hpbGRyZW4oKT8uZmlyc3QoKT8udGV4dCgpPy50cmltKClcbiAgICAgICAgKSxcbiAgICAgICAgaWQ6ICQoZWwpLmZpbmQoXCIuaXRlbSAuZmlsbS1wb3N0ZXJcIik/LmF0dHIoXCJocmVmXCIpPy5zbGljZSgxKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIG5hbWU6ICQoZWwpLmZpbmQoXCIuaXRlbSAubnVtYmVyIC5maWxtLXRpdGxlLmR5bmFtaWMtbmFtZVwiKT8udGV4dCgpPy50cmltKCksXG4gICAgICAgIGpuYW1lOiAkKGVsKS5maW5kKFwiLml0ZW0gLm51bWJlciAuZmlsbS10aXRsZS5keW5hbWljLW5hbWVcIik/LmF0dHIoXCJkYXRhLWpuYW1lXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgcG9zdGVyOiAkKGVsKS5maW5kKFwiLml0ZW0gLmZpbG0tcG9zdGVyIC5maWxtLXBvc3Rlci1pbWdcIik/LmF0dHIoXCJkYXRhLXNyY1wiKT8udHJpbSgpIHx8IG51bGxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGxhdGVzdEVwaXNvZGVTZWxlY3RvciA9IFwiI21haW4tY29udGVudCAuYmxvY2tfYXJlYV9ob21lOm50aC1vZi10eXBlKDEpIC50YWItY29udGVudCAuZmlsbV9saXN0LXdyYXAgLmZsdy1pdGVtXCI7XG4gICAgcmVzLmxhdGVzdEVwaXNvZGVBbmltZXMgPSBleHRyYWN0QW5pbWVzKFxuICAgICAgJCxcbiAgICAgIGxhdGVzdEVwaXNvZGVTZWxlY3RvcixcbiAgICAgIGdldEhvbWVQYWdlLm5hbWVcbiAgICApO1xuICAgIGNvbnN0IHRvcFVwY29taW5nU2VsZWN0b3IgPSBcIiNtYWluLWNvbnRlbnQgLmJsb2NrX2FyZWFfaG9tZTpudGgtb2YtdHlwZSgzKSAudGFiLWNvbnRlbnQgLmZpbG1fbGlzdC13cmFwIC5mbHctaXRlbVwiO1xuICAgIHJlcy50b3BVcGNvbWluZ0FuaW1lcyA9IGV4dHJhY3RBbmltZXMoXG4gICAgICAkLFxuICAgICAgdG9wVXBjb21pbmdTZWxlY3RvcixcbiAgICAgIGdldEhvbWVQYWdlLm5hbWVcbiAgICApO1xuICAgIGNvbnN0IGdlbnJlU2VsZWN0b3IgPSBcIiNtYWluLXNpZGViYXIgLmJsb2NrX2FyZWEuYmxvY2tfYXJlYV9zaWRlYmFyLmJsb2NrX2FyZWEtZ2VucmVzIC5zYi1nZW5yZS1saXN0IGxpXCI7XG4gICAgJChnZW5yZVNlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgcmVzLmdlbnJlcy5wdXNoKGAkeyQoZWwpLnRleHQoKS50cmltKCl9YCk7XG4gICAgfSk7XG4gICAgY29uc3QgbW9zdFZpZXdlZFNlbGVjdG9yID0gJyNtYWluLXNpZGViYXIgLmJsb2NrX2FyZWEtcmVhbHRpbWUgW2lkXj1cInRvcC12aWV3ZWQtXCJdJztcbiAgICAkKG1vc3RWaWV3ZWRTZWxlY3RvcikuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgIGNvbnN0IHBlcmlvZCA9ICQoZWwpLmF0dHIoXCJpZFwiKT8uc3BsaXQoXCItXCIpPy5wb3AoKT8udHJpbSgpO1xuICAgICAgaWYgKHBlcmlvZCA9PT0gXCJkYXlcIikge1xuICAgICAgICByZXMudG9wMTBBbmltZXMudG9kYXkgPSBleHRyYWN0VG9wMTBBbmltZXMoXG4gICAgICAgICAgJCxcbiAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgZ2V0SG9tZVBhZ2UubmFtZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocGVyaW9kID09PSBcIndlZWtcIikge1xuICAgICAgICByZXMudG9wMTBBbmltZXMud2VlayA9IGV4dHJhY3RUb3AxMEFuaW1lcyhcbiAgICAgICAgICAkLFxuICAgICAgICAgIHBlcmlvZCxcbiAgICAgICAgICBnZXRIb21lUGFnZS5uYW1lXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwZXJpb2QgPT09IFwibW9udGhcIikge1xuICAgICAgICByZXMudG9wMTBBbmltZXMubW9udGggPSBleHRyYWN0VG9wMTBBbmltZXMoXG4gICAgICAgICAgJCxcbiAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgZ2V0SG9tZVBhZ2UubmFtZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlcy50b3BBaXJpbmdBbmltZXMgPSBleHRyYWN0TW9zdFBvcHVsYXJBbmltZXMoXG4gICAgICAkLFxuICAgICAgXCIjYW5pbWUtZmVhdHVyZWQgLnJvdyBkaXY6bnRoLW9mLXR5cGUoMSkgLmFuaWYtYmxvY2stdWwgdWwgbGlcIixcbiAgICAgIGdldEhvbWVQYWdlLm5hbWVcbiAgICApO1xuICAgIHJlcy5tb3N0UG9wdWxhckFuaW1lcyA9IGV4dHJhY3RNb3N0UG9wdWxhckFuaW1lcyhcbiAgICAgICQsXG4gICAgICBcIiNhbmltZS1mZWF0dXJlZCAucm93IGRpdjpudGgtb2YtdHlwZSgyKSAuYW5pZi1ibG9jay11bCB1bCBsaVwiLFxuICAgICAgZ2V0SG9tZVBhZ2UubmFtZVxuICAgICk7XG4gICAgcmVzLm1vc3RGYXZvcml0ZUFuaW1lcyA9IGV4dHJhY3RNb3N0UG9wdWxhckFuaW1lcyhcbiAgICAgICQsXG4gICAgICBcIiNhbmltZS1mZWF0dXJlZCAucm93IGRpdjpudGgtb2YtdHlwZSgzKSAuYW5pZi1ibG9jay11bCB1bCBsaVwiLFxuICAgICAgZ2V0SG9tZVBhZ2UubmFtZVxuICAgICk7XG4gICAgcmVzLmxhdGVzdENvbXBsZXRlZEFuaW1lcyA9IGV4dHJhY3RNb3N0UG9wdWxhckFuaW1lcyhcbiAgICAgICQsXG4gICAgICBcIiNhbmltZS1mZWF0dXJlZCAucm93IGRpdjpudGgtb2YtdHlwZSg0KSAuYW5pZi1ibG9jay11bCB1bCBsaVwiLFxuICAgICAgZ2V0SG9tZVBhZ2UubmFtZVxuICAgICk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgSGlBbmltZUVycm9yLndyYXBFcnJvcihlcnIsIGdldEhvbWVQYWdlLm5hbWUpO1xuICB9XG59XG5cbi8vIHNyYy9oaWFuaW1lL3NjcmFwZXJzL2FuaW1lQVpMaXN0LnRzXG5pbXBvcnQgeyBsb2FkIGFzIGxvYWQyIH0gZnJvbSBcImNoZWVyaW9cIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEFaTGlzdChzb3J0T3B0aW9uLCBwYWdlKSB7XG4gIGNvbnN0IHJlcyA9IHtcbiAgICBzb3J0T3B0aW9uOiBzb3J0T3B0aW9uLnRyaW0oKSxcbiAgICBhbmltZXM6IFtdLFxuICAgIHRvdGFsUGFnZXM6IDAsXG4gICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxuICAgIGN1cnJlbnRQYWdlOiAoTnVtYmVyKHBhZ2UpIHx8IDApIDwgMSA/IDEgOiBOdW1iZXIocGFnZSlcbiAgfTtcbiAgc29ydE9wdGlvbiA9IHJlcy5zb3J0T3B0aW9uO1xuICBwYWdlID0gcmVzLmN1cnJlbnRQYWdlO1xuICB0cnkge1xuICAgIGlmIChzb3J0T3B0aW9uID09PSBcIlwiIHx8ICFCb29sZWFuKEFaX0xJU1RfU09SVF9PUFRJT05TW3NvcnRPcHRpb25dKSkge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIGF6LWxpc3Qgc29ydCBvcHRpb25cIixcbiAgICAgICAgZ2V0QVpMaXN0Lm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgc3dpdGNoIChzb3J0T3B0aW9uKSB7XG4gICAgICBjYXNlIFwiYWxsXCI6XG4gICAgICAgIHNvcnRPcHRpb24gPSBcIlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJvdGhlclwiOlxuICAgICAgICBzb3J0T3B0aW9uID0gXCJvdGhlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNvcnRPcHRpb24gPSBzb3J0T3B0aW9uLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICAgIGNvbnN0IGF6VVJMID0gbmV3IFVSTChcbiAgICAgIGAvYXotbGlzdC8ke3NvcnRPcHRpb259P3BhZ2U9JHtwYWdlfWAsXG4gICAgICBTUkNfQkFTRV9VUkxcbiAgICApO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBjbGllbnQuZ2V0KGF6VVJMLmhyZWYpO1xuICAgIGNvbnN0ICQgPSBsb2FkMihyZXNwLmRhdGEpO1xuICAgIGNvbnN0IHNlbGVjdG9yID0gXCIjbWFpbi13cmFwcGVyIC50YWItY29udGVudCAuZmlsbV9saXN0LXdyYXAgLmZsdy1pdGVtXCI7XG4gICAgcmVzLmhhc05leHRQYWdlID0gJChcIi5wYWdpbmF0aW9uID4gbGlcIikubGVuZ3RoID4gMCA/ICQoXCIucGFnaW5hdGlvbiBsaS5hY3RpdmVcIikubGVuZ3RoID4gMCA/ICQoXCIucGFnaW5hdGlvbiA+IGxpXCIpLmxhc3QoKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSA/IGZhbHNlIDogdHJ1ZSA6IGZhbHNlIDogZmFsc2U7XG4gICAgcmVzLnRvdGFsUGFnZXMgPSBOdW1iZXIoXG4gICAgICAkKCcucGFnaW5hdGlvbiA+IC5wYWdlLWl0ZW0gYVt0aXRsZT1cIkxhc3RcIl0nKT8uYXR0cihcImhyZWZcIik/LnNwbGl0KFwiPVwiKS5wb3AoKSA/PyAkKCcucGFnaW5hdGlvbiA+IC5wYWdlLWl0ZW0gYVt0aXRsZT1cIk5leHRcIl0nKT8uYXR0cihcImhyZWZcIik/LnNwbGl0KFwiPVwiKS5wb3AoKSA/PyAkKFwiLnBhZ2luYXRpb24gPiAucGFnZS1pdGVtLmFjdGl2ZSBhXCIpPy50ZXh0KCk/LnRyaW0oKVxuICAgICkgfHwgMTtcbiAgICByZXMuYW5pbWVzID0gZXh0cmFjdEFuaW1lcygkLCBzZWxlY3RvciwgZ2V0QVpMaXN0Lm5hbWUpO1xuICAgIGlmIChyZXMuYW5pbWVzLmxlbmd0aCA9PT0gMCAmJiAhcmVzLmhhc05leHRQYWdlKSB7XG4gICAgICByZXMudG90YWxQYWdlcyA9IDA7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEhpQW5pbWVFcnJvci53cmFwRXJyb3IoZXJyLCBnZXRBWkxpc3QubmFtZSk7XG4gIH1cbn1cblxuLy8gc3JjL2hpYW5pbWUvc2NyYXBlcnMvYW5pbWVHZW5yZS50c1xuaW1wb3J0IHsgbG9hZCBhcyBsb2FkMyB9IGZyb20gXCJjaGVlcmlvXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRHZW5yZUFuaW1lKGdlbnJlTmFtZSwgcGFnZSkge1xuICBjb25zdCByZXMgPSB7XG4gICAgLy8gdGhlcmUncyBhIHR5cG8gd2l0aCBoaWFuaW1lIHdoZXJlIFwibWFydGlhbFwiIGFydHMgaXMgXCJtYXJpYWxcIiBhcnRzXG4gICAgZ2VucmVOYW1lOiBnZW5yZU5hbWUgPT09IFwibWFydGlhbC1hcnRzXCIgPyBcIm1hcmlhbC1hcnRzXCIgOiBnZW5yZU5hbWUudHJpbSgpLFxuICAgIGFuaW1lczogW10sXG4gICAgZ2VucmVzOiBbXSxcbiAgICB0b3BBaXJpbmdBbmltZXM6IFtdLFxuICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxuICAgIGN1cnJlbnRQYWdlOiAoTnVtYmVyKHBhZ2UpIHx8IDApIDwgMSA/IDEgOiBOdW1iZXIocGFnZSlcbiAgfTtcbiAgZ2VucmVOYW1lID0gcmVzLmdlbnJlTmFtZTtcbiAgcGFnZSA9IHJlcy5jdXJyZW50UGFnZTtcbiAgdHJ5IHtcbiAgICBpZiAoZ2VucmVOYW1lID09PSBcIlwiKSB7XG4gICAgICB0aHJvdyBuZXcgSGlBbmltZUVycm9yKFxuICAgICAgICBcImludmFsaWQgZ2VucmUgbmFtZVwiLFxuICAgICAgICBnZXRHZW5yZUFuaW1lLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZ2VucmVVcmwgPSBuZXcgVVJMKFxuICAgICAgYC9nZW5yZS8ke2dlbnJlTmFtZX0/cGFnZT0ke3BhZ2V9YCxcbiAgICAgIFNSQ19CQVNFX1VSTFxuICAgICk7XG4gICAgY29uc3QgbWFpblBhZ2UgPSBhd2FpdCBjbGllbnQuZ2V0KGdlbnJlVXJsLmhyZWYpO1xuICAgIGNvbnN0ICQgPSBsb2FkMyhtYWluUGFnZS5kYXRhKTtcbiAgICBjb25zdCBzZWxlY3RvciA9IFwiI21haW4tY29udGVudCAudGFiLWNvbnRlbnQgLmZpbG1fbGlzdC13cmFwIC5mbHctaXRlbVwiO1xuICAgIGNvbnN0IGdlbnJlTmFtZVNlbGVjdG9yID0gXCIjbWFpbi1jb250ZW50IC5ibG9ja19hcmVhIC5ibG9ja19hcmVhLWhlYWRlciAuY2F0LWhlYWRpbmdcIjtcbiAgICByZXMuZ2VucmVOYW1lID0gJChnZW5yZU5hbWVTZWxlY3Rvcik/LnRleHQoKT8udHJpbSgpID8/IGdlbnJlTmFtZTtcbiAgICByZXMuaGFzTmV4dFBhZ2UgPSAkKFwiLnBhZ2luYXRpb24gPiBsaVwiKS5sZW5ndGggPiAwID8gJChcIi5wYWdpbmF0aW9uIGxpLmFjdGl2ZVwiKS5sZW5ndGggPiAwID8gJChcIi5wYWdpbmF0aW9uID4gbGlcIikubGFzdCgpLmhhc0NsYXNzKFwiYWN0aXZlXCIpID8gZmFsc2UgOiB0cnVlIDogZmFsc2UgOiBmYWxzZTtcbiAgICByZXMudG90YWxQYWdlcyA9IE51bWJlcihcbiAgICAgICQoJy5wYWdpbmF0aW9uID4gLnBhZ2UtaXRlbSBhW3RpdGxlPVwiTGFzdFwiXScpPy5hdHRyKFwiaHJlZlwiKT8uc3BsaXQoXCI9XCIpLnBvcCgpID8/ICQoJy5wYWdpbmF0aW9uID4gLnBhZ2UtaXRlbSBhW3RpdGxlPVwiTmV4dFwiXScpPy5hdHRyKFwiaHJlZlwiKT8uc3BsaXQoXCI9XCIpLnBvcCgpID8/ICQoXCIucGFnaW5hdGlvbiA+IC5wYWdlLWl0ZW0uYWN0aXZlIGFcIik/LnRleHQoKT8udHJpbSgpXG4gICAgKSB8fCAxO1xuICAgIHJlcy5hbmltZXMgPSBleHRyYWN0QW5pbWVzKCQsIHNlbGVjdG9yLCBnZXRHZW5yZUFuaW1lLm5hbWUpO1xuICAgIGlmIChyZXMuYW5pbWVzLmxlbmd0aCA9PT0gMCAmJiAhcmVzLmhhc05leHRQYWdlKSB7XG4gICAgICByZXMudG90YWxQYWdlcyA9IDA7XG4gICAgfVxuICAgIGNvbnN0IGdlbnJlU2VsZWN0b3IgPSBcIiNtYWluLXNpZGViYXIgLmJsb2NrX2FyZWEuYmxvY2tfYXJlYV9zaWRlYmFyLmJsb2NrX2FyZWEtZ2VucmVzIC5zYi1nZW5yZS1saXN0IGxpXCI7XG4gICAgJChnZW5yZVNlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgcmVzLmdlbnJlcy5wdXNoKGAkeyQoZWwpLnRleHQoKS50cmltKCl9YCk7XG4gICAgfSk7XG4gICAgY29uc3QgdG9wQWlyaW5nU2VsZWN0b3IgPSBcIiNtYWluLXNpZGViYXIgLmJsb2NrX2FyZWEuYmxvY2tfYXJlYV9zaWRlYmFyLmJsb2NrX2FyZWEtcmVhbHRpbWUgLmFuaWYtYmxvY2stdWwgdWwgbGlcIjtcbiAgICByZXMudG9wQWlyaW5nQW5pbWVzID0gZXh0cmFjdE1vc3RQb3B1bGFyQW5pbWVzKFxuICAgICAgJCxcbiAgICAgIHRvcEFpcmluZ1NlbGVjdG9yLFxuICAgICAgZ2V0R2VucmVBbmltZS5uYW1lXG4gICAgKTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0R2VucmVBbmltZS5uYW1lKTtcbiAgfVxufVxuXG4vLyBzcmMvaGlhbmltZS9zY3JhcGVycy9hbmltZVF0aXAudHNcbmltcG9ydCB7IGxvYWQgYXMgbG9hZDQgfSBmcm9tIFwiY2hlZXJpb1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0QW5pbWVRdGlwSW5mbyhhbmltZUlkKSB7XG4gIGNvbnN0IHJlcyA9IHtcbiAgICBhbmltZToge1xuICAgICAgaWQ6IGFuaW1lSWQudHJpbSgpLFxuICAgICAgbmFtZTogbnVsbCxcbiAgICAgIG1hbHNjb3JlOiBudWxsLFxuICAgICAgcXVhbGl0eTogbnVsbCxcbiAgICAgIGVwaXNvZGVzOiB7XG4gICAgICAgIHN1YjogbnVsbCxcbiAgICAgICAgZHViOiBudWxsXG4gICAgICB9LFxuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgam5hbWU6IG51bGwsXG4gICAgICBzeW5vbnltczogbnVsbCxcbiAgICAgIGFpcmVkOiBudWxsLFxuICAgICAgc3RhdHVzOiBudWxsLFxuICAgICAgZ2VucmVzOiBbXVxuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBhbmltZUlkID0gU3RyaW5nKHJlcy5hbmltZS5pZCk7XG4gICAgY29uc3QgaWQgPSBhbmltZUlkLnNwbGl0KFwiLVwiKS5wb3AoKTtcbiAgICBpZiAoYW5pbWVJZCA9PT0gXCJcIiB8fCBhbmltZUlkLmluZGV4T2YoXCItXCIpID09PSAtMSB8fCAhaWQpIHtcbiAgICAgIHRocm93IG5ldyBIaUFuaW1lRXJyb3IoXG4gICAgICAgIFwiaW52YWxpZCBhbmltZSBpZFwiLFxuICAgICAgICBnZXRBbmltZVF0aXBJbmZvLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgbWFpblBhZ2UgPSBhd2FpdCBjbGllbnQuZ2V0KGAke1NSQ19BSkFYX1VSTH0vbW92aWUvcXRpcC8ke2lkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgUmVmZXJlcjogU1JDX0hPTUVfVVJMLFxuICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgJCA9IGxvYWQ0KG1haW5QYWdlLmRhdGEpO1xuICAgIGNvbnN0IHNlbGVjdG9yID0gXCIucHJlLXF0aXAtY29udGVudFwiO1xuICAgIHJlcy5hbmltZS5pZCA9ICQoc2VsZWN0b3IpPy5maW5kKFwiLnByZS1xdGlwLWJ1dHRvbiBhLmJ0bi1wbGF5XCIpPy5hdHRyKFwiaHJlZlwiKT8udHJpbSgpPy5zcGxpdChcIi9cIik/LnBvcCgpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLm5hbWUgPSAkKHNlbGVjdG9yKT8uZmluZChcIi5wcmUtcXRpcC10aXRsZVwiKT8udGV4dCgpPy50cmltKCkgfHwgbnVsbDtcbiAgICByZXMuYW5pbWUubWFsc2NvcmUgPSAkKHNlbGVjdG9yKT8uZmluZChcIi5wcmUtcXRpcC1kZXRhaWxcIik/LmNoaWxkcmVuKCk/LmZpcnN0KCk/LnRleHQoKT8udHJpbSgpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLnF1YWxpdHkgPSAkKHNlbGVjdG9yKT8uZmluZChcIi50aWNrIC50aWNrLXF1YWxpdHlcIik/LnRleHQoKT8udHJpbSgpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLnR5cGUgPSAkKHNlbGVjdG9yKT8uZmluZChcIi5iYWRnZS5iYWRnZS1xdWFsaXR5XCIpPy50ZXh0KCk/LnRyaW0oKSB8fCBudWxsO1xuICAgIHJlcy5hbmltZS5lcGlzb2Rlcy5zdWIgPSBOdW1iZXIoJChzZWxlY3Rvcik/LmZpbmQoXCIudGljayAudGljay1zdWJcIik/LnRleHQoKT8udHJpbSgpKSB8fCBudWxsO1xuICAgIHJlcy5hbmltZS5lcGlzb2Rlcy5kdWIgPSBOdW1iZXIoJChzZWxlY3Rvcik/LmZpbmQoXCIudGljayAudGljay1kdWJcIik/LnRleHQoKT8udHJpbSgpKSB8fCBudWxsO1xuICAgIHJlcy5hbmltZS5kZXNjcmlwdGlvbiA9ICQoc2VsZWN0b3IpPy5maW5kKFwiLnByZS1xdGlwLWRlc2NyaXB0aW9uXCIpPy50ZXh0KCk/LnRyaW0oKSB8fCBudWxsO1xuICAgICQoYCR7c2VsZWN0b3J9IC5wcmUtcXRpcC1saW5lYCkuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9ICQoZWwpLmZpbmQoXCIuc3RpY2tcIikudGV4dCgpLnRyaW0oKS5zbGljZSgwLCAtMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHZhbHVlID0ga2V5ICE9PSBcImdlbnJlc1wiID8gJChlbCk/LmZpbmQoXCIuc3RpY2stdGV4dFwiKT8udGV4dCgpPy50cmltKCkgfHwgbnVsbCA6ICQoZWwpPy50ZXh0KCk/LnRyaW0oKT8uc2xpY2Uoa2V5Lmxlbmd0aCArIDEpO1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSBcImphcGFuZXNlXCI6XG4gICAgICAgICAgcmVzLmFuaW1lLmpuYW1lID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzeW5vbnltc1wiOlxuICAgICAgICAgIHJlcy5hbmltZS5zeW5vbnltcyA9IHZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYWlyZWRcIjpcbiAgICAgICAgICByZXMuYW5pbWUuYWlyZWQgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN0YXR1c1wiOlxuICAgICAgICAgIHJlcy5hbmltZS5zdGF0dXMgPSB2YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImdlbnJlc1wiOlxuICAgICAgICAgIHJlcy5hbmltZS5nZW5yZXMgPSB2YWx1ZT8uc3BsaXQoXCIsXCIpPy5tYXAoKGkpID0+IGk/LnRyaW0oKSkgfHwgW107XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgSGlBbmltZUVycm9yLndyYXBFcnJvcihlcnIsIGdldEFuaW1lUXRpcEluZm8ubmFtZSk7XG4gIH1cbn1cblxuLy8gc3JjL2hpYW5pbWUvc2NyYXBlcnMvYW5pbWVFcGlzb2Rlcy50c1xuaW1wb3J0IHsgbG9hZCBhcyBsb2FkNSB9IGZyb20gXCJjaGVlcmlvXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRBbmltZUVwaXNvZGVzKGFuaW1lSWQpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIHRvdGFsRXBpc29kZXM6IDAsXG4gICAgZXBpc29kZXM6IFtdXG4gIH07XG4gIHRyeSB7XG4gICAgaWYgKGFuaW1lSWQudHJpbSgpID09PSBcIlwiIHx8IGFuaW1lSWQuaW5kZXhPZihcIi1cIikgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgSGlBbmltZUVycm9yKFxuICAgICAgICBcImludmFsaWQgYW5pbWUgaWRcIixcbiAgICAgICAgZ2V0QW5pbWVFcGlzb2Rlcy5uYW1lLFxuICAgICAgICA0MDBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGVwaXNvZGVzQWpheCA9IGF3YWl0IGNsaWVudC5nZXQoXG4gICAgICBgJHtTUkNfQUpBWF9VUkx9L3YyL2VwaXNvZGUvbGlzdC8ke2FuaW1lSWQuc3BsaXQoXCItXCIpLnBvcCgpfWAsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiLFxuICAgICAgICAgIFJlZmVyZXI6IGAke1NSQ19CQVNFX1VSTH0vd2F0Y2gvJHthbmltZUlkfWBcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgJCA9IGxvYWQ1KGVwaXNvZGVzQWpheC5kYXRhLmh0bWwpO1xuICAgIHJlcy50b3RhbEVwaXNvZGVzID0gTnVtYmVyKFxuICAgICAgJChcIi5kZXRhaWwtaW5mb3ItY29udGVudCAuc3MtbGlzdCBhXCIpLmxlbmd0aFxuICAgICk7XG4gICAgJChcIi5kZXRhaWwtaW5mb3ItY29udGVudCAuc3MtbGlzdCBhXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICByZXMuZXBpc29kZXMucHVzaCh7XG4gICAgICAgIHRpdGxlOiAkKGVsKT8uYXR0cihcInRpdGxlXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgZXBpc29kZUlkOiAkKGVsKT8uYXR0cihcImhyZWZcIik/LnNwbGl0KFwiL1wiKT8ucG9wKCkgfHwgbnVsbCxcbiAgICAgICAgbnVtYmVyOiBOdW1iZXIoJChlbCkuYXR0cihcImRhdGEtbnVtYmVyXCIpKSxcbiAgICAgICAgaXNGaWxsZXI6ICQoZWwpLmhhc0NsYXNzKFwic3NsLWl0ZW0tZmlsbGVyXCIpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0QW5pbWVFcGlzb2Rlcy5uYW1lKTtcbiAgfVxufVxuXG4vLyBzcmMvaGlhbmltZS9zY3JhcGVycy9hbmltZUNhdGVnb3J5LnRzXG5pbXBvcnQgeyBsb2FkIGFzIGxvYWQ2IH0gZnJvbSBcImNoZWVyaW9cIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEFuaW1lQ2F0ZWdvcnkoY2F0ZWdvcnksIHBhZ2UpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIGFuaW1lczogW10sXG4gICAgZ2VucmVzOiBbXSxcbiAgICB0b3AxMEFuaW1lczoge1xuICAgICAgdG9kYXk6IFtdLFxuICAgICAgd2VlazogW10sXG4gICAgICBtb250aDogW11cbiAgICB9LFxuICAgIGNhdGVnb3J5LFxuICAgIHRvdGFsUGFnZXM6IDAsXG4gICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxuICAgIGN1cnJlbnRQYWdlOiAoTnVtYmVyKHBhZ2UpIHx8IDApIDwgMSA/IDEgOiBOdW1iZXIocGFnZSlcbiAgfTtcbiAgdHJ5IHtcbiAgICBpZiAoY2F0ZWdvcnkudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICB0aHJvdyBuZXcgSGlBbmltZUVycm9yKFxuICAgICAgICBcImludmFsaWQgYW5pbWUgY2F0ZWdvcnlcIixcbiAgICAgICAgZ2V0QW5pbWVDYXRlZ29yeS5uYW1lLFxuICAgICAgICA0MDBcbiAgICAgICk7XG4gICAgfVxuICAgIHBhZ2UgPSByZXMuY3VycmVudFBhZ2U7XG4gICAgY29uc3Qgc2NyYXBlVXJsID0gbmV3IFVSTChjYXRlZ29yeSwgU1JDX0JBU0VfVVJMKTtcbiAgICBjb25zdCBtYWluUGFnZSA9IGF3YWl0IGNsaWVudC5nZXQoYCR7c2NyYXBlVXJsfT9wYWdlPSR7cGFnZX1gKTtcbiAgICBjb25zdCAkID0gbG9hZDYobWFpblBhZ2UuZGF0YSk7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBcIiNtYWluLWNvbnRlbnQgLnRhYi1jb250ZW50IC5maWxtX2xpc3Qtd3JhcCAuZmx3LWl0ZW1cIjtcbiAgICBjb25zdCBjYXRlZ29yeU5hbWVTZWxlY3RvciA9IFwiI21haW4tY29udGVudCAuYmxvY2tfYXJlYSAuYmxvY2tfYXJlYS1oZWFkZXIgLmNhdC1oZWFkaW5nXCI7XG4gICAgcmVzLmNhdGVnb3J5ID0gJChjYXRlZ29yeU5hbWVTZWxlY3Rvcik/LnRleHQoKT8udHJpbSgpID8/IGNhdGVnb3J5O1xuICAgIHJlcy5oYXNOZXh0UGFnZSA9ICQoXCIucGFnaW5hdGlvbiA+IGxpXCIpLmxlbmd0aCA+IDAgPyAkKFwiLnBhZ2luYXRpb24gbGkuYWN0aXZlXCIpLmxlbmd0aCA+IDAgPyAkKFwiLnBhZ2luYXRpb24gPiBsaVwiKS5sYXN0KCkuaGFzQ2xhc3MoXCJhY3RpdmVcIikgPyBmYWxzZSA6IHRydWUgOiBmYWxzZSA6IGZhbHNlO1xuICAgIHJlcy50b3RhbFBhZ2VzID0gTnVtYmVyKFxuICAgICAgJCgnLnBhZ2luYXRpb24gPiAucGFnZS1pdGVtIGFbdGl0bGU9XCJMYXN0XCJdJyk/LmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIj1cIikucG9wKCkgPz8gJCgnLnBhZ2luYXRpb24gPiAucGFnZS1pdGVtIGFbdGl0bGU9XCJOZXh0XCJdJyk/LmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIj1cIikucG9wKCkgPz8gJChcIi5wYWdpbmF0aW9uID4gLnBhZ2UtaXRlbS5hY3RpdmUgYVwiKT8udGV4dCgpPy50cmltKClcbiAgICApIHx8IDE7XG4gICAgcmVzLmFuaW1lcyA9IGV4dHJhY3RBbmltZXMoJCwgc2VsZWN0b3IsIGdldEFuaW1lQ2F0ZWdvcnkubmFtZSk7XG4gICAgaWYgKHJlcy5hbmltZXMubGVuZ3RoID09PSAwICYmICFyZXMuaGFzTmV4dFBhZ2UpIHtcbiAgICAgIHJlcy50b3RhbFBhZ2VzID0gMDtcbiAgICB9XG4gICAgY29uc3QgZ2VucmVTZWxlY3RvciA9IFwiI21haW4tc2lkZWJhciAuYmxvY2tfYXJlYS5ibG9ja19hcmVhX3NpZGViYXIuYmxvY2tfYXJlYS1nZW5yZXMgLnNiLWdlbnJlLWxpc3QgbGlcIjtcbiAgICAkKGdlbnJlU2VsZWN0b3IpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICByZXMuZ2VucmVzLnB1c2goYCR7JChlbCkudGV4dCgpLnRyaW0oKX1gKTtcbiAgICB9KTtcbiAgICBjb25zdCB0b3AxMEFuaW1lU2VsZWN0b3IgPSAnI21haW4tc2lkZWJhciAuYmxvY2tfYXJlYS1yZWFsdGltZSBbaWRePVwidG9wLXZpZXdlZC1cIl0nO1xuICAgICQodG9wMTBBbmltZVNlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgY29uc3QgcGVyaW9kID0gJChlbCkuYXR0cihcImlkXCIpPy5zcGxpdChcIi1cIik/LnBvcCgpPy50cmltKCk7XG4gICAgICBpZiAocGVyaW9kID09PSBcImRheVwiKSB7XG4gICAgICAgIHJlcy50b3AxMEFuaW1lcy50b2RheSA9IGV4dHJhY3RUb3AxMEFuaW1lcyhcbiAgICAgICAgICAkLFxuICAgICAgICAgIHBlcmlvZCxcbiAgICAgICAgICBnZXRBbmltZUNhdGVnb3J5Lm5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHBlcmlvZCA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgcmVzLnRvcDEwQW5pbWVzLndlZWsgPSBleHRyYWN0VG9wMTBBbmltZXMoXG4gICAgICAgICAgJCxcbiAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgZ2V0QW5pbWVDYXRlZ29yeS5uYW1lXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwZXJpb2QgPT09IFwibW9udGhcIikge1xuICAgICAgICByZXMudG9wMTBBbmltZXMubW9udGggPSBleHRyYWN0VG9wMTBBbmltZXMoXG4gICAgICAgICAgJCxcbiAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgZ2V0QW5pbWVDYXRlZ29yeS5uYW1lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgSGlBbmltZUVycm9yLndyYXBFcnJvcihlcnIsIGdldEFuaW1lQ2F0ZWdvcnkubmFtZSk7XG4gIH1cbn1cblxuLy8gc3JjL2hpYW5pbWUvc2NyYXBlcnMvYW5pbWVQcm9kdWNlci50c1xuaW1wb3J0IHsgbG9hZCBhcyBsb2FkNyB9IGZyb20gXCJjaGVlcmlvXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRQcm9kdWNlckFuaW1lcyhwcm9kdWNlck5hbWUsIHBhZ2UpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIHByb2R1Y2VyTmFtZSxcbiAgICBhbmltZXM6IFtdLFxuICAgIHRvcDEwQW5pbWVzOiB7XG4gICAgICB0b2RheTogW10sXG4gICAgICB3ZWVrOiBbXSxcbiAgICAgIG1vbnRoOiBbXVxuICAgIH0sXG4gICAgdG9wQWlyaW5nQW5pbWVzOiBbXSxcbiAgICB0b3RhbFBhZ2VzOiAwLFxuICAgIGhhc05leHRQYWdlOiBmYWxzZSxcbiAgICBjdXJyZW50UGFnZTogKE51bWJlcihwYWdlKSB8fCAwKSA8IDEgPyAxIDogTnVtYmVyKHBhZ2UpXG4gIH07XG4gIHRyeSB7XG4gICAgaWYgKHByb2R1Y2VyTmFtZS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIHRocm93IG5ldyBIaUFuaW1lRXJyb3IoXG4gICAgICAgIFwiaW52YWxpZCBwcm9kdWNlciBuYW1lXCIsXG4gICAgICAgIGdldFByb2R1Y2VyQW5pbWVzLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgcGFnZSA9IHJlcy5jdXJyZW50UGFnZTtcbiAgICBjb25zdCBwcm9kdWNlclVybCA9IG5ldyBVUkwoXG4gICAgICBgL3Byb2R1Y2VyLyR7cHJvZHVjZXJOYW1lfT9wYWdlPSR7cGFnZX1gLFxuICAgICAgU1JDX0JBU0VfVVJMXG4gICAgKTtcbiAgICBjb25zdCBtYWluUGFnZSA9IGF3YWl0IGNsaWVudC5nZXQocHJvZHVjZXJVcmwuaHJlZik7XG4gICAgY29uc3QgJCA9IGxvYWQ3KG1haW5QYWdlLmRhdGEpO1xuICAgIGNvbnN0IGFuaW1lU2VsZWN0b3IgPSBcIiNtYWluLWNvbnRlbnQgLnRhYi1jb250ZW50IC5maWxtX2xpc3Qtd3JhcCAuZmx3LWl0ZW1cIjtcbiAgICByZXMuaGFzTmV4dFBhZ2UgPSAkKFwiLnBhZ2luYXRpb24gPiBsaVwiKS5sZW5ndGggPiAwID8gJChcIi5wYWdpbmF0aW9uIGxpLmFjdGl2ZVwiKS5sZW5ndGggPiAwID8gJChcIi5wYWdpbmF0aW9uID4gbGlcIikubGFzdCgpLmhhc0NsYXNzKFwiYWN0aXZlXCIpID8gZmFsc2UgOiB0cnVlIDogZmFsc2UgOiBmYWxzZTtcbiAgICByZXMudG90YWxQYWdlcyA9IE51bWJlcihcbiAgICAgICQoJy5wYWdpbmF0aW9uID4gLnBhZ2UtaXRlbSBhW3RpdGxlPVwiTGFzdFwiXScpPy5hdHRyKFwiaHJlZlwiKT8uc3BsaXQoXCI9XCIpLnBvcCgpID8/ICQoJy5wYWdpbmF0aW9uID4gLnBhZ2UtaXRlbSBhW3RpdGxlPVwiTmV4dFwiXScpPy5hdHRyKFwiaHJlZlwiKT8uc3BsaXQoXCI9XCIpLnBvcCgpID8/ICQoXCIucGFnaW5hdGlvbiA+IC5wYWdlLWl0ZW0uYWN0aXZlIGFcIik/LnRleHQoKT8udHJpbSgpXG4gICAgKSB8fCAxO1xuICAgIHJlcy5hbmltZXMgPSBleHRyYWN0QW5pbWVzKCQsIGFuaW1lU2VsZWN0b3IsIGdldFByb2R1Y2VyQW5pbWVzLm5hbWUpO1xuICAgIGlmIChyZXMuYW5pbWVzLmxlbmd0aCA9PT0gMCAmJiAhcmVzLmhhc05leHRQYWdlKSB7XG4gICAgICByZXMudG90YWxQYWdlcyA9IDA7XG4gICAgfVxuICAgIGNvbnN0IHByb2R1Y2VyTmFtZVNlbGVjdG9yID0gXCIjbWFpbi1jb250ZW50IC5ibG9ja19hcmVhIC5ibG9ja19hcmVhLWhlYWRlciAuY2F0LWhlYWRpbmdcIjtcbiAgICByZXMucHJvZHVjZXJOYW1lID0gJChwcm9kdWNlck5hbWVTZWxlY3Rvcik/LnRleHQoKT8udHJpbSgpID8/IHByb2R1Y2VyTmFtZTtcbiAgICBjb25zdCB0b3AxMEFuaW1lU2VsZWN0b3IgPSAnI21haW4tc2lkZWJhciAuYmxvY2tfYXJlYS1yZWFsdGltZSBbaWRePVwidG9wLXZpZXdlZC1cIl0nO1xuICAgICQodG9wMTBBbmltZVNlbGVjdG9yKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgY29uc3QgcGVyaW9kID0gJChlbCkuYXR0cihcImlkXCIpPy5zcGxpdChcIi1cIik/LnBvcCgpPy50cmltKCk7XG4gICAgICBpZiAocGVyaW9kID09PSBcImRheVwiKSB7XG4gICAgICAgIHJlcy50b3AxMEFuaW1lcy50b2RheSA9IGV4dHJhY3RUb3AxMEFuaW1lcyhcbiAgICAgICAgICAkLFxuICAgICAgICAgIHBlcmlvZCxcbiAgICAgICAgICBnZXRQcm9kdWNlckFuaW1lcy5uYW1lXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChwZXJpb2QgPT09IFwid2Vla1wiKSB7XG4gICAgICAgIHJlcy50b3AxMEFuaW1lcy53ZWVrID0gZXh0cmFjdFRvcDEwQW5pbWVzKFxuICAgICAgICAgICQsXG4gICAgICAgICAgcGVyaW9kLFxuICAgICAgICAgIGdldFByb2R1Y2VyQW5pbWVzLm5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHBlcmlvZCA9PT0gXCJtb250aFwiKSB7XG4gICAgICAgIHJlcy50b3AxMEFuaW1lcy5tb250aCA9IGV4dHJhY3RUb3AxMEFuaW1lcyhcbiAgICAgICAgICAkLFxuICAgICAgICAgIHBlcmlvZCxcbiAgICAgICAgICBnZXRQcm9kdWNlckFuaW1lcy5uYW1lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgdG9wQWlyaW5nU2VsZWN0b3IgPSBcIiNtYWluLXNpZGViYXIgLmJsb2NrX2FyZWFfc2lkZWJhcjpudGgtY2hpbGQoMikgLmJsb2NrX2FyZWEtY29udGVudCAuYW5pZi1ibG9jay11bCB1bCBsaVwiO1xuICAgIHJlcy50b3BBaXJpbmdBbmltZXMgPSBleHRyYWN0TW9zdFBvcHVsYXJBbmltZXMoXG4gICAgICAkLFxuICAgICAgdG9wQWlyaW5nU2VsZWN0b3IsXG4gICAgICBnZXRQcm9kdWNlckFuaW1lcy5uYW1lXG4gICAgKTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0UHJvZHVjZXJBbmltZXMubmFtZSk7XG4gIH1cbn1cblxuLy8gc3JjL2hpYW5pbWUvc2NyYXBlcnMvZXBpc29kZVNlcnZlcnMudHNcbmltcG9ydCB7IGxvYWQgYXMgbG9hZDggfSBmcm9tIFwiY2hlZXJpb1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RXBpc29kZVNlcnZlcnMoZXBpc29kZUlkKSB7XG4gIGNvbnN0IHJlcyA9IHtcbiAgICBzdWI6IFtdLFxuICAgIGR1YjogW10sXG4gICAgcmF3OiBbXSxcbiAgICBlcGlzb2RlSWQsXG4gICAgZXBpc29kZU5vOiAwXG4gIH07XG4gIHRyeSB7XG4gICAgaWYgKGVwaXNvZGVJZC50cmltKCkgPT09IFwiXCIgfHwgZXBpc29kZUlkLmluZGV4T2YoXCI/ZXA9XCIpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIGFuaW1lIGVwaXNvZGUgaWRcIixcbiAgICAgICAgZ2V0RXBpc29kZVNlcnZlcnMubmFtZSxcbiAgICAgICAgNDAwXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBlcElkID0gZXBpc29kZUlkLnNwbGl0KFwiP2VwPVwiKVsxXTtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNsaWVudC5nZXQoXG4gICAgICBgJHtTUkNfQUpBWF9VUkx9L3YyL2VwaXNvZGUvc2VydmVycz9lcGlzb2RlSWQ9JHtlcElkfWAsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiLFxuICAgICAgICAgIFJlZmVyZXI6IG5ldyBVUkwoYC93YXRjaC8ke2VwaXNvZGVJZH1gLCBTUkNfQkFTRV9VUkwpLmhyZWZcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgJCA9IGxvYWQ4KGRhdGEuaHRtbCk7XG4gICAgY29uc3QgZXBOb1NlbGVjdG9yID0gXCIuc2VydmVyLW5vdGljZSBzdHJvbmdcIjtcbiAgICByZXMuZXBpc29kZU5vID0gTnVtYmVyKCQoZXBOb1NlbGVjdG9yKS50ZXh0KCkuc3BsaXQoXCIgXCIpLnBvcCgpKSB8fCAwO1xuICAgICQoYC5wc18tYmxvY2sucHNfLWJsb2NrLXN1Yi5zZXJ2ZXJzLXN1YiAucHNfXy1saXN0IC5zZXJ2ZXItaXRlbWApLmVhY2goXG4gICAgICAoXywgZWwpID0+IHtcbiAgICAgICAgcmVzLnN1Yi5wdXNoKHtcbiAgICAgICAgICBzZXJ2ZXJOYW1lOiAkKGVsKS5maW5kKFwiYVwiKS50ZXh0KCkudG9Mb3dlckNhc2UoKS50cmltKCksXG4gICAgICAgICAgc2VydmVySWQ6IE51bWJlcigkKGVsKT8uYXR0cihcImRhdGEtc2VydmVyLWlkXCIpPy50cmltKCkpIHx8IG51bGxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgKTtcbiAgICAkKGAucHNfLWJsb2NrLnBzXy1ibG9jay1zdWIuc2VydmVycy1kdWIgLnBzX18tbGlzdCAuc2VydmVyLWl0ZW1gKS5lYWNoKFxuICAgICAgKF8sIGVsKSA9PiB7XG4gICAgICAgIHJlcy5kdWIucHVzaCh7XG4gICAgICAgICAgc2VydmVyTmFtZTogJChlbCkuZmluZChcImFcIikudGV4dCgpLnRvTG93ZXJDYXNlKCkudHJpbSgpLFxuICAgICAgICAgIHNlcnZlcklkOiBOdW1iZXIoJChlbCk/LmF0dHIoXCJkYXRhLXNlcnZlci1pZFwiKT8udHJpbSgpKSB8fCBudWxsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7XG4gICAgJChgLnBzXy1ibG9jay5wc18tYmxvY2stc3ViLnNlcnZlcnMtcmF3IC5wc19fLWxpc3QgLnNlcnZlci1pdGVtYCkuZWFjaChcbiAgICAgIChfLCBlbCkgPT4ge1xuICAgICAgICByZXMucmF3LnB1c2goe1xuICAgICAgICAgIHNlcnZlck5hbWU6ICQoZWwpLmZpbmQoXCJhXCIpLnRleHQoKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSxcbiAgICAgICAgICBzZXJ2ZXJJZDogTnVtYmVyKCQoZWwpPy5hdHRyKFwiZGF0YS1zZXJ2ZXItaWRcIik/LnRyaW0oKSkgfHwgbnVsbFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiByZXM7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEhpQW5pbWVFcnJvci53cmFwRXJyb3IoZXJyLCBnZXRFcGlzb2RlU2VydmVycy5uYW1lKTtcbiAgfVxufVxuXG4vLyBzcmMvaGlhbmltZS9zY3JhcGVycy9hbmltZUFib3V0SW5mby50c1xuaW1wb3J0IHsgbG9hZCBhcyBsb2FkOSB9IGZyb20gXCJjaGVlcmlvXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRBbmltZUFib3V0SW5mbyhhbmltZUlkKSB7XG4gIGNvbnN0IHJlcyA9IHtcbiAgICBhbmltZToge1xuICAgICAgaW5mbzoge1xuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgYW5pbGlzdElkOiBudWxsLFxuICAgICAgICBtYWxJZDogbnVsbCxcbiAgICAgICAgbmFtZTogbnVsbCxcbiAgICAgICAgcG9zdGVyOiBudWxsLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICByYXRpbmc6IG51bGwsXG4gICAgICAgICAgcXVhbGl0eTogbnVsbCxcbiAgICAgICAgICBlcGlzb2Rlczoge1xuICAgICAgICAgICAgc3ViOiBudWxsLFxuICAgICAgICAgICAgZHViOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICAgIGR1cmF0aW9uOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHByb21vdGlvbmFsVmlkZW9zOiBbXSxcbiAgICAgICAgY2hhcmFjdGVyc1ZvaWNlQWN0b3JzOiBbXVxuICAgICAgfSxcbiAgICAgIG1vcmVJbmZvOiB7fVxuICAgIH0sXG4gICAgc2Vhc29uczogW10sXG4gICAgbW9zdFBvcHVsYXJBbmltZXM6IFtdLFxuICAgIHJlbGF0ZWRBbmltZXM6IFtdLFxuICAgIHJlY29tbWVuZGVkQW5pbWVzOiBbXVxuICB9O1xuICB0cnkge1xuICAgIGlmIChhbmltZUlkLnRyaW0oKSA9PT0gXCJcIiB8fCBhbmltZUlkLmluZGV4T2YoXCItXCIpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIGFuaW1lIGlkXCIsXG4gICAgICAgIGdldEFuaW1lQWJvdXRJbmZvLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgYW5pbWVVcmwgPSBuZXcgVVJMKGFuaW1lSWQsIFNSQ19CQVNFX1VSTCk7XG4gICAgY29uc3QgbWFpblBhZ2UgPSBhd2FpdCBjbGllbnQuZ2V0KGFuaW1lVXJsLmhyZWYpO1xuICAgIGNvbnN0ICQgPSBsb2FkOShtYWluUGFnZS5kYXRhKTtcbiAgICB0cnkge1xuICAgICAgcmVzLmFuaW1lLmluZm8uYW5pbGlzdElkID0gTnVtYmVyKFxuICAgICAgICBKU09OLnBhcnNlKCQoXCJib2R5XCIpPy5maW5kKFwiI3N5bmNEYXRhXCIpPy50ZXh0KCkpPy5hbmlsaXN0X2lkXG4gICAgICApO1xuICAgICAgcmVzLmFuaW1lLmluZm8ubWFsSWQgPSBOdW1iZXIoXG4gICAgICAgIEpTT04ucGFyc2UoJChcImJvZHlcIik/LmZpbmQoXCIjc3luY0RhdGFcIik/LnRleHQoKSk/Lm1hbF9pZFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlcy5hbmltZS5pbmZvLmFuaWxpc3RJZCA9IG51bGw7XG4gICAgICByZXMuYW5pbWUuaW5mby5tYWxJZCA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdG9yID0gXCIjYW5pX2RldGFpbCAuY29udGFpbmVyIC5hbmlzLWNvbnRlbnRcIjtcbiAgICByZXMuYW5pbWUuaW5mby5pZCA9ICQoc2VsZWN0b3IpPy5maW5kKFwiLmFuaXNjLWRldGFpbCAuZmlsbS1idXR0b25zIGEuYnRuLXBsYXlcIik/LmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIi9cIik/LnBvcCgpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLmluZm8ubmFtZSA9ICQoc2VsZWN0b3IpPy5maW5kKFwiLmFuaXNjLWRldGFpbCAuZmlsbS1uYW1lLmR5bmFtaWMtbmFtZVwiKT8udGV4dCgpPy50cmltKCkgfHwgbnVsbDtcbiAgICByZXMuYW5pbWUuaW5mby5kZXNjcmlwdGlvbiA9ICQoc2VsZWN0b3IpPy5maW5kKFwiLmFuaXNjLWRldGFpbCAuZmlsbS1kZXNjcmlwdGlvbiAudGV4dFwiKS50ZXh0KCk/LnNwbGl0KFwiW1wiKT8uc2hpZnQoKT8udHJpbSgpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLmluZm8ucG9zdGVyID0gJChzZWxlY3Rvcik/LmZpbmQoXCIuZmlsbS1wb3N0ZXIgLmZpbG0tcG9zdGVyLWltZ1wiKT8uYXR0cihcInNyY1wiKT8udHJpbSgpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLmluZm8uc3RhdHMucmF0aW5nID0gJChgJHtzZWxlY3Rvcn0gLmZpbG0tc3RhdHMgLnRpY2sgLnRpY2stcGdgKT8udGV4dCgpPy50cmltKCkgfHwgbnVsbDtcbiAgICByZXMuYW5pbWUuaW5mby5zdGF0cy5xdWFsaXR5ID0gJChgJHtzZWxlY3Rvcn0gLmZpbG0tc3RhdHMgLnRpY2sgLnRpY2stcXVhbGl0eWApPy50ZXh0KCk/LnRyaW0oKSB8fCBudWxsO1xuICAgIHJlcy5hbmltZS5pbmZvLnN0YXRzLmVwaXNvZGVzID0ge1xuICAgICAgc3ViOiBOdW1iZXIoXG4gICAgICAgICQoYCR7c2VsZWN0b3J9IC5maWxtLXN0YXRzIC50aWNrIC50aWNrLXN1YmApPy50ZXh0KCk/LnRyaW0oKVxuICAgICAgKSB8fCBudWxsLFxuICAgICAgZHViOiBOdW1iZXIoXG4gICAgICAgICQoYCR7c2VsZWN0b3J9IC5maWxtLXN0YXRzIC50aWNrIC50aWNrLWR1YmApPy50ZXh0KCk/LnRyaW0oKVxuICAgICAgKSB8fCBudWxsXG4gICAgfTtcbiAgICByZXMuYW5pbWUuaW5mby5zdGF0cy50eXBlID0gJChgJHtzZWxlY3Rvcn0gLmZpbG0tc3RhdHMgLnRpY2tgKT8udGV4dCgpPy50cmltKCk/LnJlcGxhY2UoL1tcXHNcXG5dKy9nLCBcIiBcIik/LnNwbGl0KFwiIFwiKT8uYXQoLTIpIHx8IG51bGw7XG4gICAgcmVzLmFuaW1lLmluZm8uc3RhdHMuZHVyYXRpb24gPSAkKGAke3NlbGVjdG9yfSAuZmlsbS1zdGF0cyAudGlja2ApPy50ZXh0KCk/LnRyaW0oKT8ucmVwbGFjZSgvW1xcc1xcbl0rL2csIFwiIFwiKT8uc3BsaXQoXCIgXCIpPy5wb3AoKSB8fCBudWxsO1xuICAgICQoXG4gICAgICBcIi5ibG9ja19hcmVhLmJsb2NrX2FyZWEtcHJvbW90aW9ucyAuYmxvY2tfYXJlYS1wcm9tb3Rpb25zLWxpc3QgLnNjcmVlbi1pdGVtcyAuaXRlbVwiXG4gICAgKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgcmVzLmFuaW1lLmluZm8ucHJvbW90aW9uYWxWaWRlb3MucHVzaCh7XG4gICAgICAgIHRpdGxlOiAkKGVsKS5hdHRyKFwiZGF0YS10aXRsZVwiKSxcbiAgICAgICAgc291cmNlOiAkKGVsKS5hdHRyKFwiZGF0YS1zcmNcIiksXG4gICAgICAgIHRodW1ibmFpbDogJChlbCkuZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAkKFxuICAgICAgXCIuYmxvY2tfYXJlYS5ibG9ja19hcmVhLWFjdG9ycyAuYmxvY2stYWN0b3JzLWNvbnRlbnQgLmJhYy1saXN0LXdyYXAgLmJhYy1pdGVtXCJcbiAgICApLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICByZXMuYW5pbWUuaW5mby5jaGFyYWN0ZXJzVm9pY2VBY3RvcnMucHVzaCh7XG4gICAgICAgIGNoYXJhY3Rlcjoge1xuICAgICAgICAgIGlkOiAkKGVsKS5maW5kKCQoXCIucGVyLWluZm8ubHRyIC5waS1hdmF0YXJcIikpLmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIi9cIilbMl0gfHwgXCJcIixcbiAgICAgICAgICBwb3N0ZXI6ICQoZWwpLmZpbmQoJChcIi5wZXItaW5mby5sdHIgLnBpLWF2YXRhciBpbWdcIikpLmF0dHIoXCJkYXRhLXNyY1wiKSB8fCBcIlwiLFxuICAgICAgICAgIG5hbWU6ICQoZWwpLmZpbmQoJChcIi5wZXItaW5mby5sdHIgLnBpLWRldGFpbCBhXCIpKS50ZXh0KCksXG4gICAgICAgICAgY2FzdDogJChlbCkuZmluZCgkKFwiLnBlci1pbmZvLmx0ciAucGktZGV0YWlsIC5waS1jYXN0XCIpKS50ZXh0KClcbiAgICAgICAgfSxcbiAgICAgICAgdm9pY2VBY3Rvcjoge1xuICAgICAgICAgIGlkOiAkKGVsKS5maW5kKCQoXCIucGVyLWluZm8ucnRsIC5waS1hdmF0YXJcIikpLmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIi9cIilbMl0gfHwgXCJcIixcbiAgICAgICAgICBwb3N0ZXI6ICQoZWwpLmZpbmQoJChcIi5wZXItaW5mby5ydGwgLnBpLWF2YXRhciBpbWdcIikpLmF0dHIoXCJkYXRhLXNyY1wiKSB8fCBcIlwiLFxuICAgICAgICAgIG5hbWU6ICQoZWwpLmZpbmQoJChcIi5wZXItaW5mby5ydGwgLnBpLWRldGFpbCBhXCIpKS50ZXh0KCksXG4gICAgICAgICAgY2FzdDogJChlbCkuZmluZCgkKFwiLnBlci1pbmZvLnJ0bCAucGktZGV0YWlsIC5waS1jYXN0XCIpKS50ZXh0KClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgJChgJHtzZWxlY3Rvcn0gLmFuaXNjLWluZm8td3JhcCAuYW5pc2MtaW5mbyAuaXRlbTpub3QoLnctaGlkZSlgKS5lYWNoKFxuICAgICAgKF8sIGVsKSA9PiB7XG4gICAgICAgIGxldCBrZXkgPSAkKGVsKS5maW5kKFwiLml0ZW0taGVhZFwiKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwiOlwiLCBcIlwiKS50cmltKCk7XG4gICAgICAgIGtleSA9IGtleS5pbmNsdWRlcyhcIiBcIikgPyBrZXkucmVwbGFjZShcIiBcIiwgXCJcIikgOiBrZXk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gW1xuICAgICAgICAgIC4uLiQoZWwpLmZpbmQoXCIqOm5vdCguaXRlbS1oZWFkKVwiKS5tYXAoKF8yLCBlbDIpID0+ICQoZWwyKS50ZXh0KCkudHJpbSgpKVxuICAgICAgICBdLm1hcCgoaSkgPT4gYCR7aX1gKS50b1N0cmluZygpLnRyaW0oKTtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJnZW5yZXNcIikge1xuICAgICAgICAgIHJlcy5hbmltZS5tb3JlSW5mb1trZXldID0gdmFsdWUuc3BsaXQoXCIsXCIpLm1hcCgoaSkgPT4gaS50cmltKCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSBcInByb2R1Y2Vyc1wiKSB7XG4gICAgICAgICAgcmVzLmFuaW1lLm1vcmVJbmZvW2tleV0gPSB2YWx1ZS5zcGxpdChcIixcIikubWFwKChpKSA9PiBpLnRyaW0oKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5hbmltZS5tb3JlSW5mb1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBzZWFzb25zU2VsZWN0b3IgPSBcIiNtYWluLWNvbnRlbnQgLm9zLWxpc3QgYS5vcy1pdGVtXCI7XG4gICAgJChzZWFzb25zU2VsZWN0b3IpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICByZXMuc2Vhc29ucy5wdXNoKHtcbiAgICAgICAgaWQ6ICQoZWwpPy5hdHRyKFwiaHJlZlwiKT8uc2xpY2UoMSk/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBuYW1lOiAkKGVsKT8uYXR0cihcInRpdGxlXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgdGl0bGU6ICQoZWwpPy5maW5kKFwiLnRpdGxlXCIpPy50ZXh0KCk/LnRyaW0oKSxcbiAgICAgICAgcG9zdGVyOiAkKGVsKT8uZmluZChcIi5zZWFzb24tcG9zdGVyXCIpPy5hdHRyKFwic3R5bGVcIik/LnNwbGl0KFwiIFwiKT8ucG9wKCk/LnNwbGl0KFwiKFwiKT8ucG9wKCk/LnNwbGl0KFwiKVwiKVswXSB8fCBudWxsLFxuICAgICAgICBpc0N1cnJlbnQ6ICQoZWwpLmhhc0NsYXNzKFwiYWN0aXZlXCIpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBjb25zdCByZWxhdGVkQW5pbWVTZWxlY3RvciA9IFwiI21haW4tc2lkZWJhciAuYmxvY2tfYXJlYS5ibG9ja19hcmVhX3NpZGViYXIuYmxvY2tfYXJlYS1yZWFsdGltZTpudGgtb2YtdHlwZSgxKSAuYW5pZi1ibG9jay11bCB1bCBsaVwiO1xuICAgIHJlcy5yZWxhdGVkQW5pbWVzID0gZXh0cmFjdE1vc3RQb3B1bGFyQW5pbWVzKFxuICAgICAgJCxcbiAgICAgIHJlbGF0ZWRBbmltZVNlbGVjdG9yLFxuICAgICAgZ2V0QW5pbWVBYm91dEluZm8ubmFtZVxuICAgICk7XG4gICAgY29uc3QgbW9zdFBvcHVsYXJTZWxlY3RvciA9IFwiI21haW4tc2lkZWJhciAuYmxvY2tfYXJlYS5ibG9ja19hcmVhX3NpZGViYXIuYmxvY2tfYXJlYS1yZWFsdGltZTpudGgtb2YtdHlwZSgyKSAuYW5pZi1ibG9jay11bCB1bCBsaVwiO1xuICAgIHJlcy5tb3N0UG9wdWxhckFuaW1lcyA9IGV4dHJhY3RNb3N0UG9wdWxhckFuaW1lcyhcbiAgICAgICQsXG4gICAgICBtb3N0UG9wdWxhclNlbGVjdG9yLFxuICAgICAgZ2V0QW5pbWVBYm91dEluZm8ubmFtZVxuICAgICk7XG4gICAgY29uc3QgcmVjb21tZW5kZWRBbmltZVNlbGVjdG9yID0gXCIjbWFpbi1jb250ZW50IC5ibG9ja19hcmVhLmJsb2NrX2FyZWFfY2F0ZWdvcnkgLnRhYi1jb250ZW50IC5mbHctaXRlbVwiO1xuICAgIHJlcy5yZWNvbW1lbmRlZEFuaW1lcyA9IGV4dHJhY3RBbmltZXMoXG4gICAgICAkLFxuICAgICAgcmVjb21tZW5kZWRBbmltZVNlbGVjdG9yLFxuICAgICAgZ2V0QW5pbWVBYm91dEluZm8ubmFtZVxuICAgICk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgSGlBbmltZUVycm9yLndyYXBFcnJvcihlcnIsIGdldEFuaW1lQWJvdXRJbmZvLm5hbWUpO1xuICB9XG59XG5cbi8vIHNyYy9oaWFuaW1lL3NjcmFwZXJzL2FuaW1lU2VhcmNoLnRzXG5pbXBvcnQgeyBsb2FkIGFzIGxvYWQxMCB9IGZyb20gXCJjaGVlcmlvXCI7XG52YXIgc2VhcmNoRmlsdGVycyA9IHtcbiAgZmlsdGVyOiB0cnVlLFxuICB0eXBlOiB0cnVlLFxuICBzdGF0dXM6IHRydWUsXG4gIHJhdGVkOiB0cnVlLFxuICBzY29yZTogdHJ1ZSxcbiAgc2Vhc29uOiB0cnVlLFxuICBsYW5ndWFnZTogdHJ1ZSxcbiAgc3RhcnRfZGF0ZTogdHJ1ZSxcbiAgZW5kX2RhdGU6IHRydWUsXG4gIHNvcnQ6IHRydWUsXG4gIGdlbnJlczogdHJ1ZVxufTtcbmFzeW5jIGZ1bmN0aW9uIF9nZXRBbmltZVNlYXJjaFJlc3VsdHMocSwgcGFnZSA9IDEsIGZpbHRlcnMpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICBhbmltZXM6IFtdLFxuICAgICAgbW9zdFBvcHVsYXJBbmltZXM6IFtdLFxuICAgICAgc2VhcmNoUXVlcnk6IHEsXG4gICAgICBzZWFyY2hGaWx0ZXJzOiBmaWx0ZXJzLFxuICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcbiAgICAgIGN1cnJlbnRQYWdlOiAoTnVtYmVyKHBhZ2UpIHx8IDApIDwgMSA/IDEgOiBOdW1iZXIocGFnZSlcbiAgICB9O1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoU1JDX1NFQVJDSF9VUkwpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwia2V5d29yZFwiLCBxKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInBhZ2VcIiwgYCR7cmVzLmN1cnJlbnRQYWdlfWApO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic29ydFwiLCBcImRlZmF1bHRcIik7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZmlsdGVycykge1xuICAgICAgaWYgKGtleS5pbmNsdWRlcyhcIl9kYXRlXCIpKSB7XG4gICAgICAgIGNvbnN0IGRhdGVzID0gZ2V0U2VhcmNoRGF0ZUZpbHRlclZhbHVlKFxuICAgICAgICAgIGtleSA9PT0gXCJzdGFydF9kYXRlXCIsXG4gICAgICAgICAgZmlsdGVyc1trZXldIHx8IFwiXCJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFkYXRlcykgY29udGludWU7XG4gICAgICAgIGRhdGVzLm1hcCgoZGF0ZVBhcmFtKSA9PiB7XG4gICAgICAgICAgY29uc3QgW2tleTIsIHZhbF0gPSBkYXRlUGFyYW0uc3BsaXQoXCI9XCIpO1xuICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KGtleTIsIHZhbCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZpbHRlclZhbCA9IGdldFNlYXJjaEZpbHRlclZhbHVlKFxuICAgICAgICBrZXksXG4gICAgICAgIGZpbHRlcnNba2V5XSB8fCBcIlwiXG4gICAgICApO1xuICAgICAgZmlsdGVyVmFsICYmIHVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgZmlsdGVyVmFsKTtcbiAgICB9XG4gICAgY29uc3QgbWFpblBhZ2UgPSBhd2FpdCBjbGllbnQuZ2V0KHVybC5ocmVmKTtcbiAgICBjb25zdCAkID0gbG9hZDEwKG1haW5QYWdlLmRhdGEpO1xuICAgIGNvbnN0IHNlbGVjdG9yID0gXCIjbWFpbi1jb250ZW50IC50YWItY29udGVudCAuZmlsbV9saXN0LXdyYXAgLmZsdy1pdGVtXCI7XG4gICAgcmVzLmhhc05leHRQYWdlID0gJChcIi5wYWdpbmF0aW9uID4gbGlcIikubGVuZ3RoID4gMCA/ICQoXCIucGFnaW5hdGlvbiBsaS5hY3RpdmVcIikubGVuZ3RoID4gMCA/ICQoXCIucGFnaW5hdGlvbiA+IGxpXCIpLmxhc3QoKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSA/IGZhbHNlIDogdHJ1ZSA6IGZhbHNlIDogZmFsc2U7XG4gICAgcmVzLnRvdGFsUGFnZXMgPSBOdW1iZXIoXG4gICAgICAkKCcucGFnaW5hdGlvbiA+IC5wYWdlLWl0ZW0gYVt0aXRsZT1cIkxhc3RcIl0nKT8uYXR0cihcImhyZWZcIik/LnNwbGl0KFwiPVwiKS5wb3AoKSA/PyAkKCcucGFnaW5hdGlvbiA+IC5wYWdlLWl0ZW0gYVt0aXRsZT1cIk5leHRcIl0nKT8uYXR0cihcImhyZWZcIik/LnNwbGl0KFwiPVwiKS5wb3AoKSA/PyAkKFwiLnBhZ2luYXRpb24gPiAucGFnZS1pdGVtLmFjdGl2ZSBhXCIpPy50ZXh0KCk/LnRyaW0oKVxuICAgICkgfHwgMTtcbiAgICByZXMuYW5pbWVzID0gZXh0cmFjdEFuaW1lcygkLCBzZWxlY3RvciwgZ2V0QW5pbWVTZWFyY2hSZXN1bHRzLm5hbWUpO1xuICAgIGlmIChyZXMuYW5pbWVzLmxlbmd0aCA9PT0gMCAmJiAhcmVzLmhhc05leHRQYWdlKSB7XG4gICAgICByZXMudG90YWxQYWdlcyA9IDA7XG4gICAgfVxuICAgIGNvbnN0IG1vc3RQb3B1bGFyU2VsZWN0b3IgPSBcIiNtYWluLXNpZGViYXIgLmJsb2NrX2FyZWEuYmxvY2tfYXJlYV9zaWRlYmFyLmJsb2NrX2FyZWEtcmVhbHRpbWUgLmFuaWYtYmxvY2stdWwgdWwgbGlcIjtcbiAgICByZXMubW9zdFBvcHVsYXJBbmltZXMgPSBleHRyYWN0TW9zdFBvcHVsYXJBbmltZXMoXG4gICAgICAkLFxuICAgICAgbW9zdFBvcHVsYXJTZWxlY3RvcixcbiAgICAgIGdldEFuaW1lU2VhcmNoUmVzdWx0cy5uYW1lXG4gICAgKTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0QW5pbWVTZWFyY2hSZXN1bHRzLm5hbWUpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXRBbmltZVNlYXJjaFJlc3VsdHMocSwgcGFnZSwgZmlsdGVycykge1xuICB0cnkge1xuICAgIHEgPSBxLnRyaW0oKSA/IGRlY29kZVVSSUNvbXBvbmVudChxLnRyaW0oKSkgOiBcIlwiO1xuICAgIGlmIChxLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIHNlYXJjaCBxdWVyeVwiLFxuICAgICAgICBnZXRBbmltZVNlYXJjaFJlc3VsdHMubmFtZSxcbiAgICAgICAgNDAwXG4gICAgICApO1xuICAgIH1cbiAgICBwYWdlID0gcGFnZSA8IDEgPyAxIDogcGFnZTtcbiAgICBjb25zdCBwYXJzZWRGaWx0ZXJzID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZmlsdGVycykge1xuICAgICAgaWYgKHNlYXJjaEZpbHRlcnNba2V5XSkge1xuICAgICAgICBwYXJzZWRGaWx0ZXJzW2tleV0gPSBmaWx0ZXJzW2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBfZ2V0QW5pbWVTZWFyY2hSZXN1bHRzKHEsIHBhZ2UsIHBhcnNlZEZpbHRlcnMpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0QW5pbWVTZWFyY2hSZXN1bHRzLm5hbWUpO1xuICB9XG59XG5cbi8vIHNyYy9oaWFuaW1lL3NjcmFwZXJzL2FuaW1lRXBpc29kZVNyY3MudHNcbmltcG9ydCBheGlvczYgZnJvbSBcImF4aW9zXCI7XG5pbXBvcnQgeyBsb2FkIGFzIGxvYWQxMyB9IGZyb20gXCJjaGVlcmlvXCI7XG5cbi8vIHNyYy9leHRyYWN0b3JzL3N0cmVhbXNiLnRzXG5pbXBvcnQgYXhpb3MyIGZyb20gXCJheGlvc1wiO1xudmFyIFN0cmVhbVNCID0gY2xhc3Mge1xuICAvLyBwcml2YXRlIHNlcnZlck5hbWUgPSBcInN0cmVhbVNCXCI7XG4gIHNvdXJjZXMgPSBbXTtcbiAgaG9zdCA9IFwiaHR0cHM6Ly93YXRjaHNiLmNvbS9zb3VyY2VzNTBcIjtcbiAgaG9zdDIgPSBcImh0dHBzOi8vc3RyZWFtc3NzLm5ldC9zb3VyY2VzMTZcIjtcbiAgUEFZTE9BRChoZXgpIHtcbiAgICByZXR1cm4gYDU2NmQzMzc2Nzg1NjZmNzQzNjc0NDk0YTdjN2Mke2hleH03YzdjMzQ2YjY3Njc1ODZkNjkzNDc3NDg1NTUzN2M3YzczNzQ3MjY1NjE2ZDczNjIvNjU2NTQxNzI2ODc1NTMzOTc3MzQ2MTQ0N2M3YzM0NjEzMzM4MzQzODMzMzQzNjMxMzMzNTM3NjEzNjMyMzMzNzM3MzQzMzM4MzYzNDM3NjMzNzYzMzQ2NTM2NjUzNDM5MzMzODM3MzEzNjY0MzczMjM3MzczNjM0MzczNTM3MzIzNzYxMzc2MzM3NjMzNDM2MzczMzM1MzczNzMwMzUzMzM2NjIzNjMzMzQ2MzM1MzMzMzM2MzUzNDM2NjEzNzYzMzc2MzM3MzMzNzM0MzczMjM2MzUzNjMxMzY2NDM3MzMzNjMyN2M3YzZiNTg2YzMxNjM2MTQ0Njg2NDVhNDc2MTdjN2M3Mzc0NzI2NTYxNmQ3MzYyYDtcbiAgfVxuICBhc3luYyBleHRyYWN0KHZpZGVvVXJsLCBpc0FsdCA9IGZhbHNlKSB7XG4gICAgbGV0IGhlYWRlcnMgPSB7XG4gICAgICB3YXRjaHNiOiBcInNic3RyZWFtXCIsXG4gICAgICBSZWZlcmVyOiB2aWRlb1VybC5ocmVmLFxuICAgICAgXCJVc2VyLUFnZW50XCI6IFVTRVJfQUdFTlRfSEVBREVSXG4gICAgfTtcbiAgICBsZXQgaWQgPSB2aWRlb1VybC5ocmVmLnNwbGl0KFwiL2UvXCIpLnBvcCgpO1xuICAgIGlmIChpZD8uaW5jbHVkZXMoXCJodG1sXCIpKSB7XG4gICAgICBpZCA9IGlkLnNwbGl0KFwiLmh0bWxcIilbMF07XG4gICAgfVxuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlkKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvczIuZ2V0KFxuICAgICAgYCR7aXNBbHQgPyB0aGlzLmhvc3QyIDogdGhpcy5ob3N0fS8ke3RoaXMuUEFZTE9BRChcbiAgICAgICAgQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKFwiaGV4XCIpXG4gICAgICApfWAsXG4gICAgICB7IGhlYWRlcnMgfVxuICAgICkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgaWYgKCFyZXM/LmRhdGEuc3RyZWFtX2RhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHNvdXJjZSBmb3VuZC4gVHJ5IGEgZGlmZmVyZW50IHNlcnZlclwiKTtcbiAgICB9XG4gICAgaGVhZGVycyA9IHtcbiAgICAgIFwiVXNlci1BZ2VudFwiOiBVU0VSX0FHRU5UX0hFQURFUixcbiAgICAgIFJlZmVyZXI6IHZpZGVvVXJsLmhyZWYuc3BsaXQoXCJlL1wiKVswXVxuICAgIH07XG4gICAgY29uc3QgbTN1OF91cmxzID0gYXdhaXQgYXhpb3MyLmdldChyZXMuZGF0YS5zdHJlYW1fZGF0YS5maWxlLCB7XG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgY29uc3QgdmlkZW9MaXN0ID0gbTN1OF91cmxzPy5kYXRhPy5zcGxpdChcIiNFWFQtWC1TVFJFQU0tSU5GOlwiKSA/PyBbXTtcbiAgICBmb3IgKGNvbnN0IHZpZGVvIG9mIHZpZGVvTGlzdCkge1xuICAgICAgaWYgKCF2aWRlby5pbmNsdWRlcyhcIm0zdThcIikpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgdXJsID0gdmlkZW8uc3BsaXQoXCJcXG5cIilbMV07XG4gICAgICBjb25zdCBxdWFsaXR5ID0gdmlkZW8uc3BsaXQoXCJSRVNPTFVUSU9OPVwiKVsxXS5zcGxpdChcIixcIilbMF0uc3BsaXQoXCJ4XCIpWzFdO1xuICAgICAgdGhpcy5zb3VyY2VzLnB1c2goe1xuICAgICAgICB1cmwsXG4gICAgICAgIHF1YWxpdHk6IGAke3F1YWxpdHl9cGAsXG4gICAgICAgIGlzTTNVODogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc291cmNlcy5wdXNoKHtcbiAgICAgIHVybDogcmVzLmRhdGEuc3RyZWFtX2RhdGEuZmlsZSxcbiAgICAgIHF1YWxpdHk6IFwiYXV0b1wiLFxuICAgICAgaXNNM1U4OiByZXMuZGF0YS5zdHJlYW1fZGF0YS5maWxlLmluY2x1ZGVzKFwiLm0zdThcIilcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzO1xuICB9XG4gIC8vIHByaXZhdGUgYWRkU291cmNlcyhzb3VyY2U6IGFueSk6IHZvaWQge1xuICAvLyAgIHRoaXMuc291cmNlcy5wdXNoKHtcbiAgLy8gICAgIHVybDogc291cmNlLmZpbGUsXG4gIC8vICAgICBpc00zVTg6IHNvdXJjZS5maWxlLmluY2x1ZGVzKFwiLm0zdThcIiksXG4gIC8vICAgfSk7XG4gIC8vIH1cbn07XG52YXIgc3RyZWFtc2JfZGVmYXVsdCA9IFN0cmVhbVNCO1xuXG4vLyBzcmMvZXh0cmFjdG9ycy9zdHJlYW10YXBlLnRzXG5pbXBvcnQgYXhpb3MzIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHsgbG9hZCBhcyBsb2FkMTEgfSBmcm9tIFwiY2hlZXJpb1wiO1xudmFyIFN0cmVhbVRhcGUgPSBjbGFzcyB7XG4gIC8vIHByaXZhdGUgc2VydmVyTmFtZSA9IFwiU3RyZWFtVGFwZVwiO1xuICBzb3VyY2VzID0gW107XG4gIGFzeW5jIGV4dHJhY3QodmlkZW9VcmwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvczMuZ2V0KHZpZGVvVXJsLmhyZWYpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gbm90IGZvdW5kXCIpO1xuICAgICAgfSk7XG4gICAgICBjb25zdCAkID0gbG9hZDExKGRhdGEpO1xuICAgICAgbGV0IFtmaCwgc2hdID0gJC5odG1sKCk/Lm1hdGNoKC9yb2JvdGxpbmsnXFwpLmlubmVySFRNTCA9ICguKiknLylbMV0uc3BsaXQoXCIrICgnXCIpO1xuICAgICAgc2ggPSBzaC5zdWJzdHJpbmcoMyk7XG4gICAgICBmaCA9IGZoLnJlcGxhY2UoL1xcJy9nLCBcIlwiKTtcbiAgICAgIGNvbnN0IHVybCA9IGBodHRwczoke2ZofSR7c2h9YDtcbiAgICAgIHRoaXMuc291cmNlcy5wdXNoKHtcbiAgICAgICAgdXJsLFxuICAgICAgICBpc00zVTg6IHVybC5pbmNsdWRlcyhcIi5tM3U4XCIpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZXM7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxufTtcbnZhciBzdHJlYW10YXBlX2RlZmF1bHQgPSBTdHJlYW1UYXBlO1xuXG4vLyBzcmMvZXh0cmFjdG9ycy9yYXBpZGNsb3VkLnRzXG5pbXBvcnQgYXhpb3M0IGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IENyeXB0b0pTIGZyb20gXCJjcnlwdG8tanNcIjtcbnZhciBSYXBpZENsb3VkID0gY2xhc3Mge1xuICAvLyBwcml2YXRlIHNlcnZlck5hbWUgPSBcIlJhcGlkQ2xvdWRcIjtcbiAgc291cmNlcyA9IFtdO1xuICAvLyBodHRwczovL3JhcGlkLWNsb3VkLmNvL2VtYmVkLTYvZVZaUERYd1ZmclkzP3Zhc3Q9MVxuICBmYWxsYmFja0tleSA9IFwiYzFkMTcwOTZmMmNhMTFiN1wiO1xuICBob3N0ID0gXCJodHRwczovL3JhcGlkLWNsb3VkLmNvXCI7XG4gIGFzeW5jIGV4dHJhY3QodmlkZW9VcmwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBzb3VyY2VzOiBbXSxcbiAgICAgIHN1YnRpdGxlczogW11cbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpZCA9IHZpZGVvVXJsLmhyZWYuc3BsaXQoXCIvXCIpLnBvcCgpPy5zcGxpdChcIj9cIilbMF07XG4gICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJYLVJlcXVlc3RlZC1XaXRoXCI6IFwiWE1MSHR0cFJlcXVlc3RcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbGV0IHJlcyA9IG51bGw7XG4gICAgICByZXMgPSBhd2FpdCBheGlvczQuZ2V0KFxuICAgICAgICBgaHR0cHM6Ly8ke3ZpZGVvVXJsLmhvc3RuYW1lfS9lbWJlZC0yL2FqYXgvZS0xL2dldFNvdXJjZXM/aWQ9JHtpZH1gLFxuICAgICAgICBvcHRpb25zXG4gICAgICApO1xuICAgICAgbGV0IHtcbiAgICAgICAgZGF0YTogeyBzb3VyY2VzLCB0cmFja3MsIGludHJvLCBvdXRybywgZW5jcnlwdGVkIH1cbiAgICAgIH0gPSByZXM7XG4gICAgICBsZXQgZGVjcnlwdEtleSA9IGF3YWl0IChhd2FpdCBheGlvczQuZ2V0KFxuICAgICAgICBcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9jaW5lbWF4aHEva2V5cy9lMS9rZXlcIlxuICAgICAgKSkuZGF0YTtcbiAgICAgIGRlY3J5cHRLZXkgPSBzdWJzdHJpbmdCZWZvcmUoXG4gICAgICAgIHN1YnN0cmluZ0FmdGVyKFxuICAgICAgICAgIGRlY3J5cHRLZXksXG4gICAgICAgICAgJ1wiYmxvYi1jb2RlIGJsb2ItY29kZS1pbm5lciBqcy1maWxlLWxpbmVcIj4nXG4gICAgICAgICksXG4gICAgICAgIFwiPC90ZD5cIlxuICAgICAgKTtcbiAgICAgIGlmICghZGVjcnlwdEtleSkge1xuICAgICAgICBkZWNyeXB0S2V5ID0gYXdhaXQgKGF3YWl0IGF4aW9zNC5nZXQoXG4gICAgICAgICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY2luZW1heGhxL2tleXMvZTEva2V5XCJcbiAgICAgICAgKSkuZGF0YTtcbiAgICAgIH1cbiAgICAgIGlmICghZGVjcnlwdEtleSkgZGVjcnlwdEtleSA9IHRoaXMuZmFsbGJhY2tLZXk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoZW5jcnlwdGVkKSB7XG4gICAgICAgICAgY29uc3Qgc291cmNlc0FycmF5ID0gc291cmNlcy5zcGxpdChcIlwiKTtcbiAgICAgICAgICBsZXQgZXh0cmFjdGVkS2V5ID0gXCJcIjtcbiAgICAgICAgICBsZXQgY3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGRlY3J5cHRLZXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gaW5kZXhbMF0gKyBjdXJyZW50SW5kZXg7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIGluZGV4WzFdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgICAgICAgZXh0cmFjdGVkS2V5ICs9IHJlcy5kYXRhLnNvdXJjZXNbaV07XG4gICAgICAgICAgICAgIHNvdXJjZXNBcnJheVtpXSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50SW5kZXggKz0gaW5kZXhbMV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlY3J5cHRLZXkgPSBleHRyYWN0ZWRLZXk7XG4gICAgICAgICAgc291cmNlcyA9IHNvdXJjZXNBcnJheS5qb2luKFwiXCIpO1xuICAgICAgICAgIGNvbnN0IGRlY3J5cHQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdChzb3VyY2VzLCBkZWNyeXB0S2V5KTtcbiAgICAgICAgICBzb3VyY2VzID0gSlNPTi5wYXJzZShkZWNyeXB0LnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2cuaW5mbyhlcnIubWVzc2FnZSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkNhbm5vdCBkZWNyeXB0IHNvdXJjZXMuIFBlcmhhcHMgdGhlIGtleSBpcyBpbnZhbGlkLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzPy5tYXAoKHMpID0+ICh7XG4gICAgICAgIHVybDogcy5maWxlLFxuICAgICAgICBpc00zVTg6IHMuZmlsZS5pbmNsdWRlcyhcIi5tM3U4XCIpXG4gICAgICB9KSk7XG4gICAgICByZXN1bHQuc291cmNlcy5wdXNoKC4uLnRoaXMuc291cmNlcyk7XG4gICAgICBpZiAodmlkZW9VcmwuaHJlZi5pbmNsdWRlcyhuZXcgVVJMKHRoaXMuaG9zdCkuaG9zdCkpIHtcbiAgICAgICAgcmVzdWx0LnNvdXJjZXMgPSBbXTtcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc291cmNlIG9mIHNvdXJjZXMpIHtcbiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zNC5nZXQoc291cmNlLmZpbGUsIG9wdGlvbnMpO1xuICAgICAgICAgIGNvbnN0IG0zdThkYXRhID0gZGF0YS5zcGxpdChcIlxcblwiKS5maWx0ZXIoXG4gICAgICAgICAgICAobGluZSkgPT4gbGluZS5pbmNsdWRlcyhcIi5tM3U4XCIpICYmIGxpbmUuaW5jbHVkZXMoXCJSRVNPTFVUSU9OPVwiKVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3Qgc2Vjb25kSGFsZiA9IG0zdThkYXRhLm1hcChcbiAgICAgICAgICAgIChsaW5lKSA9PiBsaW5lLm1hdGNoKC9SRVNPTFVUSU9OPS4qLChDKXxVUkk9LiovZyk/Lm1hcCgocykgPT4gcy5zcGxpdChcIj1cIilbMV0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBUZEFycmF5ID0gc2Vjb25kSGFsZi5tYXAoKHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGYxID0gc1swXS5zcGxpdChcIixDXCIpWzBdO1xuICAgICAgICAgICAgY29uc3QgZjIgPSBzWzFdLnJlcGxhY2UoL1wiL2csIFwiXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFtmMSwgZjJdO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZvciAoY29uc3QgW2YxLCBmMl0gb2YgVGRBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgICB1cmw6IGAke3NvdXJjZS5maWxlPy5zcGxpdChcIm1hc3Rlci5tM3U4XCIpWzBdfSR7ZjIucmVwbGFjZShcbiAgICAgICAgICAgICAgICBcImlmcmFtZXNcIixcbiAgICAgICAgICAgICAgICBcImluZGV4XCJcbiAgICAgICAgICAgICAgKX1gLFxuICAgICAgICAgICAgICBxdWFsaXR5OiBmMS5zcGxpdChcInhcIilbMV0gKyBcInBcIixcbiAgICAgICAgICAgICAgaXNNM1U4OiBmMi5pbmNsdWRlcyhcIi5tM3U4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdWx0LnNvdXJjZXMucHVzaCguLi50aGlzLnNvdXJjZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXN1bHQuaW50cm8gPSBpbnRybz8uZW5kID4gMSA/IHsgc3RhcnQ6IGludHJvLnN0YXJ0LCBlbmQ6IGludHJvLmVuZCB9IDogdm9pZCAwO1xuICAgICAgcmVzdWx0Lm91dHJvID0gb3V0cm8/LmVuZCA+IDEgPyB7IHN0YXJ0OiBvdXRyby5zdGFydCwgZW5kOiBvdXRyby5lbmQgfSA6IHZvaWQgMDtcbiAgICAgIHJlc3VsdC5zb3VyY2VzLnB1c2goe1xuICAgICAgICB1cmw6IHNvdXJjZXNbMF0uZmlsZSxcbiAgICAgICAgaXNNM1U4OiBzb3VyY2VzWzBdLmZpbGUuaW5jbHVkZXMoXCIubTN1OFwiKSxcbiAgICAgICAgcXVhbGl0eTogXCJhdXRvXCJcbiAgICAgIH0pO1xuICAgICAgcmVzdWx0LnN1YnRpdGxlcyA9IHRyYWNrcy5tYXAoXG4gICAgICAgIChzKSA9PiBzLmZpbGUgPyB7XG4gICAgICAgICAgdXJsOiBzLmZpbGUsXG4gICAgICAgICAgbGFuZzogcy5sYWJlbCA/IHMubGFiZWwgOiBcIlRodW1ibmFpbHNcIlxuICAgICAgICB9IDogbnVsbFxuICAgICAgKS5maWx0ZXIoKHMpID0+IHMpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZy5pbmZvKGVyci5tZXNzYWdlKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cbn07XG52YXIgcmFwaWRjbG91ZF9kZWZhdWx0ID0gUmFwaWRDbG91ZDtcblxuLy8gc3JjL2V4dHJhY3RvcnMvbWVnYWNsb3VkLnRzXG5pbXBvcnQgYXhpb3M1IGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgQ3J5cHRvSlMyIGZyb20gXCJjcnlwdG8tanNcIjtcbmltcG9ydCAqIGFzIGNoZWVyaW8gZnJvbSBcImNoZWVyaW9cIjtcbnZhciBtZWdhY2xvdWQgPSB7XG4gIHNjcmlwdDogXCJodHRwczovL21lZ2FjbG91ZC50di9qcy9wbGF5ZXIvYS9wcm9kL2UxLXBsYXllci5taW4uanM/dj1cIixcbiAgc291cmNlczogXCJodHRwczovL21lZ2FjbG91ZC50di9lbWJlZC0yL2FqYXgvZS0xL2dldFNvdXJjZXM/aWQ9XCJcbn07XG52YXIgTWVnYUNsb3VkID0gY2xhc3Mge1xuICAvLyBwcml2YXRlIHNlcnZlck5hbWUgPSBcIm1lZ2FjbG91ZFwiO1xuICBhc3luYyBleHRyYWN0KHZpZGVvVXJsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4dHJhY3RlZERhdGEgPSB7XG4gICAgICAgIHRyYWNrczogW10sXG4gICAgICAgIGludHJvOiB7XG4gICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgZW5kOiAwXG4gICAgICAgIH0sXG4gICAgICAgIG91dHJvOiB7XG4gICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgZW5kOiAwXG4gICAgICAgIH0sXG4gICAgICAgIHNvdXJjZXM6IFtdXG4gICAgICB9O1xuICAgICAgY29uc3QgdmlkZW9JZCA9IHZpZGVvVXJsPy5ocmVmPy5zcGxpdChcIi9cIik/LnBvcCgpPy5zcGxpdChcIj9cIilbMF07XG4gICAgICBjb25zdCB7IGRhdGE6IHNyY3NEYXRhIH0gPSBhd2FpdCBheGlvczUuZ2V0KFxuICAgICAgICBtZWdhY2xvdWQuc291cmNlcy5jb25jYXQodmlkZW9JZCB8fCBcIlwiKSxcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEFjY2VwdDogXCIqLypcIixcbiAgICAgICAgICAgIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCIsXG4gICAgICAgICAgICBcIlVzZXItQWdlbnRcIjogXCJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzZcIixcbiAgICAgICAgICAgIFJlZmVyZXI6IHZpZGVvVXJsLmhyZWZcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoIXNyY3NEYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBIaUFuaW1lRXJyb3IoXG4gICAgICAgICAgXCJVcmwgbWF5IGhhdmUgYW4gaW52YWxpZCB2aWRlbyBpZFwiLFxuICAgICAgICAgIFwiZ2V0QW5pbWVFcGlzb2RlU291cmNlc1wiLFxuICAgICAgICAgIDQwMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgZW5jcnlwdGVkU3RyaW5nID0gc3Jjc0RhdGEuc291cmNlcztcbiAgICAgIGlmICghc3Jjc0RhdGEuZW5jcnlwdGVkICYmIEFycmF5LmlzQXJyYXkoZW5jcnlwdGVkU3RyaW5nKSkge1xuICAgICAgICBleHRyYWN0ZWREYXRhLmludHJvID0gc3Jjc0RhdGEuaW50cm87XG4gICAgICAgIGV4dHJhY3RlZERhdGEub3V0cm8gPSBzcmNzRGF0YS5vdXRybztcbiAgICAgICAgZXh0cmFjdGVkRGF0YS50cmFja3MgPSBzcmNzRGF0YS50cmFja3M7XG4gICAgICAgIGV4dHJhY3RlZERhdGEuc291cmNlcyA9IGVuY3J5cHRlZFN0cmluZy5tYXAoKHMpID0+ICh7XG4gICAgICAgICAgdXJsOiBzLmZpbGUsXG4gICAgICAgICAgdHlwZTogcy50eXBlXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIGV4dHJhY3RlZERhdGE7XG4gICAgICB9XG4gICAgICBsZXQgdGV4dDtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3M1LmdldChcbiAgICAgICAgbWVnYWNsb3VkLnNjcmlwdC5jb25jYXQoRGF0ZS5ub3coKS50b1N0cmluZygpKVxuICAgICAgKTtcbiAgICAgIHRleHQgPSBkYXRhO1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBIaUFuaW1lRXJyb3IoXG4gICAgICAgICAgXCJDb3VsZG4ndCBmZXRjaCBzY3JpcHQgdG8gZGVjcnlwdCByZXNvdXJjZVwiLFxuICAgICAgICAgIFwiZ2V0QW5pbWVFcGlzb2RlU291cmNlc1wiLFxuICAgICAgICAgIDUwMFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFycyA9IHRoaXMuZXh0cmFjdFZhcmlhYmxlcyh0ZXh0KTtcbiAgICAgIGlmICghdmFycy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiQ2FuJ3QgZmluZCB2YXJpYWJsZXMuIFBlcmhhcHMgdGhlIGV4dHJhY3RvciBpcyBvdXRkYXRlZC5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBzZWNyZXQsIGVuY3J5cHRlZFNvdXJjZSB9ID0gdGhpcy5nZXRTZWNyZXQoXG4gICAgICAgIGVuY3J5cHRlZFN0cmluZyxcbiAgICAgICAgdmFyc1xuICAgICAgKTtcbiAgICAgIGNvbnN0IGRlY3J5cHRlZCA9IHRoaXMuZGVjcnlwdChlbmNyeXB0ZWRTb3VyY2UsIHNlY3JldCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb3VyY2VzID0gSlNPTi5wYXJzZShkZWNyeXB0ZWQpO1xuICAgICAgICBleHRyYWN0ZWREYXRhLmludHJvID0gc3Jjc0RhdGEuaW50cm87XG4gICAgICAgIGV4dHJhY3RlZERhdGEub3V0cm8gPSBzcmNzRGF0YS5vdXRybztcbiAgICAgICAgZXh0cmFjdGVkRGF0YS50cmFja3MgPSBzcmNzRGF0YS50cmFja3M7XG4gICAgICAgIGV4dHJhY3RlZERhdGEuc291cmNlcyA9IHNvdXJjZXMubWFwKChzKSA9PiAoe1xuICAgICAgICAgIHVybDogcy5maWxlLFxuICAgICAgICAgIHR5cGU6IHMudHlwZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBleHRyYWN0ZWREYXRhO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgICBcIkZhaWxlZCB0byBkZWNyeXB0IHJlc291cmNlXCIsXG4gICAgICAgICAgXCJnZXRBbmltZUVwaXNvZGVTb3VyY2VzXCIsXG4gICAgICAgICAgNTAwXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG4gIGV4dHJhY3RWYXJpYWJsZXModGV4dCkge1xuICAgIGNvbnN0IHJlZ2V4ID0gL2Nhc2VcXHMqMHhbMC05YS1mXSs6KD8hW147XSo9cGFydEtleSlcXHMqXFx3K1xccyo9XFxzKihcXHcrKVxccyosXFxzKlxcdytcXHMqPVxccyooXFx3Kyk7L2c7XG4gICAgY29uc3QgbWF0Y2hlcyA9IHRleHQubWF0Y2hBbGwocmVnZXgpO1xuICAgIGNvbnN0IHZhcnMgPSBBcnJheS5mcm9tKG1hdGNoZXMsIChtYXRjaCkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hLZXkxID0gdGhpcy5tYXRjaGluZ0tleShtYXRjaFsxXSwgdGV4dCk7XG4gICAgICBjb25zdCBtYXRjaEtleTIgPSB0aGlzLm1hdGNoaW5nS2V5KG1hdGNoWzJdLCB0ZXh0KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbcGFyc2VJbnQobWF0Y2hLZXkxLCAxNiksIHBhcnNlSW50KG1hdGNoS2V5MiwgMTYpXTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH0pLmZpbHRlcigocGFpcikgPT4gcGFpci5sZW5ndGggPiAwKTtcbiAgICByZXR1cm4gdmFycztcbiAgfVxuICBnZXRTZWNyZXQoZW5jcnlwdGVkU3RyaW5nLCB2YWx1ZXMpIHtcbiAgICBsZXQgc2VjcmV0ID0gXCJcIiwgZW5jcnlwdGVkU291cmNlID0gXCJcIiwgZW5jcnlwdGVkU291cmNlQXJyYXkgPSBlbmNyeXB0ZWRTdHJpbmcuc3BsaXQoXCJcIiksIGN1cnJlbnRJbmRleCA9IDA7XG4gICAgZm9yIChjb25zdCBpbmRleCBvZiB2YWx1ZXMpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gaW5kZXhbMF0gKyBjdXJyZW50SW5kZXg7XG4gICAgICBjb25zdCBlbmQgPSBzdGFydCArIGluZGV4WzFdO1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgc2VjcmV0ICs9IGVuY3J5cHRlZFN0cmluZ1tpXTtcbiAgICAgICAgZW5jcnlwdGVkU291cmNlQXJyYXlbaV0gPSBcIlwiO1xuICAgICAgfVxuICAgICAgY3VycmVudEluZGV4ICs9IGluZGV4WzFdO1xuICAgIH1cbiAgICBlbmNyeXB0ZWRTb3VyY2UgPSBlbmNyeXB0ZWRTb3VyY2VBcnJheS5qb2luKFwiXCIpO1xuICAgIHJldHVybiB7IHNlY3JldCwgZW5jcnlwdGVkU291cmNlIH07XG4gIH1cbiAgZGVjcnlwdChlbmNyeXB0ZWQsIGtleU9yU2VjcmV0LCBtYXliZV9pdikge1xuICAgIGxldCBrZXk7XG4gICAgbGV0IGl2O1xuICAgIGxldCBjb250ZW50cztcbiAgICBpZiAobWF5YmVfaXYpIHtcbiAgICAgIGtleSA9IGtleU9yU2VjcmV0O1xuICAgICAgaXYgPSBtYXliZV9pdjtcbiAgICAgIGNvbnRlbnRzID0gZW5jcnlwdGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjeXBoZXIgPSBCdWZmZXIuZnJvbShlbmNyeXB0ZWQsIFwiYmFzZTY0XCIpO1xuICAgICAgY29uc3Qgc2FsdCA9IGN5cGhlci5zdWJhcnJheSg4LCAxNik7XG4gICAgICBjb25zdCBwYXNzd29yZCA9IEJ1ZmZlci5jb25jYXQoW1xuICAgICAgICBCdWZmZXIuZnJvbShrZXlPclNlY3JldCwgXCJiaW5hcnlcIiksXG4gICAgICAgIHNhbHRcbiAgICAgIF0pO1xuICAgICAgY29uc3QgbWQ1SGFzaGVzID0gW107XG4gICAgICBsZXQgZGlnZXN0ID0gcGFzc3dvcmQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBtZDVIYXNoZXNbaV0gPSBjcnlwdG8uY3JlYXRlSGFzaChcIm1kNVwiKS51cGRhdGUoZGlnZXN0KS5kaWdlc3QoKTtcbiAgICAgICAgZGlnZXN0ID0gQnVmZmVyLmNvbmNhdChbbWQ1SGFzaGVzW2ldLCBwYXNzd29yZF0pO1xuICAgICAgfVxuICAgICAga2V5ID0gQnVmZmVyLmNvbmNhdChbbWQ1SGFzaGVzWzBdLCBtZDVIYXNoZXNbMV1dKTtcbiAgICAgIGl2ID0gbWQ1SGFzaGVzWzJdO1xuICAgICAgY29udGVudHMgPSBjeXBoZXIuc3ViYXJyYXkoMTYpO1xuICAgIH1cbiAgICBjb25zdCBkZWNpcGhlciA9IGNyeXB0by5jcmVhdGVEZWNpcGhlcml2KFwiYWVzLTI1Ni1jYmNcIiwga2V5LCBpdik7XG4gICAgY29uc3QgZGVjcnlwdGVkID0gZGVjaXBoZXIudXBkYXRlKFxuICAgICAgY29udGVudHMsXG4gICAgICB0eXBlb2YgY29udGVudHMgPT09IFwic3RyaW5nXCIgPyBcImJhc2U2NFwiIDogdm9pZCAwLFxuICAgICAgXCJ1dGY4XCJcbiAgICApICsgZGVjaXBoZXIuZmluYWwoKTtcbiAgICByZXR1cm4gZGVjcnlwdGVkO1xuICB9XG4gIC8vIGZ1bmN0aW9uIGNvcGllZCBmcm9tIGdpdGh1YiBpc3N1ZSAjMzAgJ2h0dHBzOi8vZ2l0aHViLmNvbS9naG9zaFJpdGVzaDEyL2FuaXdhdGNoLWFwaS9pc3N1ZXMvMzAnXG4gIG1hdGNoaW5nS2V5KHZhbHVlLCBzY3JpcHQpIHtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYCwke3ZhbHVlfT0oKD86MHgpPyhbMC05YS1mQS1GXSspKWApO1xuICAgIGNvbnN0IG1hdGNoID0gc2NyaXB0Lm1hdGNoKHJlZ2V4KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXS5yZXBsYWNlKC9eMHgvLCBcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIG1hdGNoIHRoZSBrZXlcIik7XG4gICAgfVxuICB9XG4gIC8vIGh0dHBzOi8vbWVnYWNsb3VkLnR2L2VtYmVkLTIvZS0xLzFoblhxN1Z6WDBFeD9rPTFcbiAgLy8gYXN5bmMgZXh0cmFjdDIoZW1iZWRJZnJhbWVVUkw6IFVSTCk6IFByb21pc2U8RXh0cmFjdGVkRGF0YT4ge1xuICAvLyAgICAgdHJ5IHtcbiAgLy8gICAgICAgICBjb25zdCBleHRyYWN0ZWREYXRhOiBFeHRyYWN0ZWREYXRhID0ge1xuICAvLyAgICAgICAgICAgICB0cmFja3M6IFtdLFxuICAvLyAgICAgICAgICAgICBpbnRybzoge1xuICAvLyAgICAgICAgICAgICAgICAgc3RhcnQ6IDAsXG4gIC8vICAgICAgICAgICAgICAgICBlbmQ6IDAsXG4gIC8vICAgICAgICAgICAgIH0sXG4gIC8vICAgICAgICAgICAgIG91dHJvOiB7XG4gIC8vICAgICAgICAgICAgICAgICBzdGFydDogMCxcbiAgLy8gICAgICAgICAgICAgICAgIGVuZDogMCxcbiAgLy8gICAgICAgICAgICAgfSxcbiAgLy8gICAgICAgICAgICAgc291cmNlczogW10sXG4gIC8vICAgICAgICAgfTtcbiAgLy8gICAgICAgICBjb25zdCB4cmF4ID0gZW1iZWRJZnJhbWVVUkwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiXCI7XG4gIC8vICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGdldFNvdXJjZXMoeHJheCk7XG4gIC8vICAgICAgICAgaWYgKCFyZXNwKSByZXR1cm4gZXh0cmFjdGVkRGF0YTtcbiAgLy8gICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwLnNvdXJjZXMpKSB7XG4gIC8vICAgICAgICAgICAgIGV4dHJhY3RlZERhdGEuc291cmNlcyA9IHJlc3Auc291cmNlcy5tYXAoKHMpID0+ICh7XG4gIC8vICAgICAgICAgICAgICAgICB1cmw6IHMuZmlsZSxcbiAgLy8gICAgICAgICAgICAgICAgIHR5cGU6IHMudHlwZSxcbiAgLy8gICAgICAgICAgICAgfSkpO1xuICAvLyAgICAgICAgIH1cbiAgLy8gICAgICAgICBleHRyYWN0ZWREYXRhLmludHJvID0gcmVzcC5pbnRybyA/IHJlc3AuaW50cm8gOiBleHRyYWN0ZWREYXRhLmludHJvO1xuICAvLyAgICAgICAgIGV4dHJhY3RlZERhdGEub3V0cm8gPSByZXNwLm91dHJvID8gcmVzcC5vdXRybyA6IGV4dHJhY3RlZERhdGEub3V0cm87XG4gIC8vICAgICAgICAgZXh0cmFjdGVkRGF0YS50cmFja3MgPSByZXNwLnRyYWNrcztcbiAgLy8gICAgICAgICByZXR1cm4gZXh0cmFjdGVkRGF0YTtcbiAgLy8gICAgIH0gY2F0Y2ggKGVycikge1xuICAvLyAgICAgICAgIHRocm93IGVycjtcbiAgLy8gICAgIH1cbiAgLy8gfVxuICAvL2NyZWRpdCB0byBodHRwczovL2dpdGh1Yi5jb20vaXR6enptZS9tZWdhY2xvdWQta2V5cyBmb3IgYXV0b2dlbmVyYXRlZCBrZXlzXG4gIGFzeW5jIGV4dHJhY3QzKGVtYmVkSWZyYW1lVVJMKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3M1LmdldChcbiAgICAgICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vaXR6enptZS9tZWdhY2xvdWQta2V5cy9yZWZzL2hlYWRzL21haW4va2V5LnR4dFwiXG4gICAgICApO1xuICAgICAgY29uc3Qga2V5ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIGNvbnN0IGV4dHJhY3RlZERhdGEgPSB7XG4gICAgICAgIHRyYWNrczogW10sXG4gICAgICAgIGludHJvOiB7XG4gICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgZW5kOiAwXG4gICAgICAgIH0sXG4gICAgICAgIG91dHJvOiB7XG4gICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgZW5kOiAwXG4gICAgICAgIH0sXG4gICAgICAgIHNvdXJjZXM6IFtdXG4gICAgICB9O1xuICAgICAgY29uc3QgbWF0Y2ggPSAvXFwvKFteXFwvXFw/XSspXFw/Ly5leGVjKGVtYmVkSWZyYW1lVVJMLmhyZWYpO1xuICAgICAgY29uc3Qgc291cmNlSWQgPSBtYXRjaD8uWzFdO1xuICAgICAgaWYgKCFzb3VyY2VJZClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGV4dHJhY3Qgc291cmNlSWQgZnJvbSBlbWJlZCBVUkxcIik7XG4gICAgICBjb25zdCBtZWdhY2xvdWRVcmwgPSBgaHR0cHM6Ly9tZWdhY2xvdWQuYmxvZy9lbWJlZC0yL3YyL2UtMS9nZXRTb3VyY2VzP2lkPSR7c291cmNlSWR9YDtcbiAgICAgIGNvbnN0IHsgZGF0YTogcmF3U291cmNlRGF0YSB9ID0gYXdhaXQgYXhpb3M1LmdldChtZWdhY2xvdWRVcmwpO1xuICAgICAgY29uc3QgZW5jcnlwdGVkID0gcmF3U291cmNlRGF0YT8uc291cmNlcztcbiAgICAgIGlmICghZW5jcnlwdGVkKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbmNyeXB0ZWQgc291cmNlIG1pc3NpbmcgaW4gcmVzcG9uc2VcIik7XG4gICAgICBjb25zdCBkZWNyeXB0ZWQgPSBDcnlwdG9KUzIuQUVTLmRlY3J5cHQoZW5jcnlwdGVkLCBrZXkpLnRvU3RyaW5nKFxuICAgICAgICBDcnlwdG9KUzIuZW5jLlV0ZjhcbiAgICAgICk7XG4gICAgICBsZXQgZGVjcnlwdGVkU291cmNlcztcbiAgICAgIHRyeSB7XG4gICAgICAgIGRlY3J5cHRlZFNvdXJjZXMgPSBKU09OLnBhcnNlKGRlY3J5cHRlZCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlY3J5cHRlZCBkYXRhIGlzIG5vdCB2YWxpZCBKU09OXCIpO1xuICAgICAgfVxuICAgICAgZXh0cmFjdGVkRGF0YS5pbnRybyA9IHJhd1NvdXJjZURhdGEuaW50cm8gPyByYXdTb3VyY2VEYXRhLmludHJvIDogZXh0cmFjdGVkRGF0YS5pbnRybztcbiAgICAgIGV4dHJhY3RlZERhdGEub3V0cm8gPSByYXdTb3VyY2VEYXRhLm91dHJvID8gcmF3U291cmNlRGF0YS5vdXRybyA6IGV4dHJhY3RlZERhdGEub3V0cm87XG4gICAgICBleHRyYWN0ZWREYXRhLnRyYWNrcyA9IHJhd1NvdXJjZURhdGEudHJhY2tzPy5tYXAoKHRyYWNrKSA9PiAoe1xuICAgICAgICB1cmw6IHRyYWNrLmZpbGUsXG4gICAgICAgIGxhbmc6IHRyYWNrLmxhYmVsID8gdHJhY2subGFiZWwgOiB0cmFjay5raW5kXG4gICAgICB9KSkgfHwgW107XG4gICAgICBleHRyYWN0ZWREYXRhLnNvdXJjZXMgPSBkZWNyeXB0ZWRTb3VyY2VzLm1hcCgocykgPT4gKHtcbiAgICAgICAgdXJsOiBzLmZpbGUsXG4gICAgICAgIGlzTTNVODogcy50eXBlID09PSBcImhsc1wiLFxuICAgICAgICB0eXBlOiBzLnR5cGVcbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBleHRyYWN0ZWREYXRhO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuICBhc3luYyBleHRyYWN0NChlbWJlZElmcmFtZVVSTCwgY2F0ZWdvcnkpIHtcbiAgICBjb25zdCBleHRyYWN0ZWREYXRhID0ge1xuICAgICAgdHJhY2tzOiBbXSxcbiAgICAgIGludHJvOiB7XG4gICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICBlbmQ6IDBcbiAgICAgIH0sXG4gICAgICBvdXRybzoge1xuICAgICAgICBzdGFydDogMCxcbiAgICAgICAgZW5kOiAwXG4gICAgICB9LFxuICAgICAgc291cmNlczogW11cbiAgICB9O1xuICAgIGNvbnN0IGVwSWQgPSBlbWJlZElmcmFtZVVSTC5zcGxpdChcIj9lcD1cIilbMV07XG4gICAgY29uc3QgaWZyYW1lID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9tZWdhcGxheS5idXp6L3N0cmVhbS9zLTIvJHtlcElkfS8ke2NhdGVnb3J5fWAsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBIb3N0OiBcIm1lZ2FwbGF5LmJ1enpcIixcbiAgICAgICAgICBcIlVzZXItQWdlbnRcIjogXCJNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQ7IHJ2OjE0MC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzE0MC4wXCIsXG4gICAgICAgICAgQWNjZXB0OiBcInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LCovKjtxPTAuOFwiLFxuICAgICAgICAgIFwiQWNjZXB0LUxhbmd1YWdlXCI6IFwiZW4tVVMsZW47cT0wLjVcIixcbiAgICAgICAgICBETlQ6IFwiMVwiLFxuICAgICAgICAgIFwiU2VjLUdQQ1wiOiBcIjFcIixcbiAgICAgICAgICBDb25uZWN0aW9uOiBcImtlZXAtYWxpdmVcIixcbiAgICAgICAgICBSZWZlcmVyOiBcImh0dHBzOi8vbWVnYXBsYXkuYnV6ei9hcGlcIixcbiAgICAgICAgICBcIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHNcIjogXCIxXCIsXG4gICAgICAgICAgXCJTZWMtRmV0Y2gtRGVzdFwiOiBcImlmcmFtZVwiLFxuICAgICAgICAgIFwiU2VjLUZldGNoLU1vZGVcIjogXCJuYXZpZ2F0ZVwiLFxuICAgICAgICAgIFwiU2VjLUZldGNoLVNpdGVcIjogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgICAgIFwiU2VjLUZldGNoLVVzZXJcIjogXCI/MVwiLFxuICAgICAgICAgIFByaW9yaXR5OiBcInU9NFwiLFxuICAgICAgICAgIFRFOiBcInRyYWlsZXJzXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgaWYgKCFpZnJhbWUub2spIHRocm93IG5ldyBFcnJvcihcIkVwaXNvZGUgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICBjb25zdCBpZnJhbWVCb2R5ID0gYXdhaXQgaWZyYW1lLnRleHQoKTtcbiAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKGlmcmFtZUJvZHkpO1xuICAgIGNvbnN0IGlkID0gJChcIiNtZWdhcGxheS1wbGF5ZXJcIikuYXR0cihcImRhdGEtaWRcIik7XG4gICAgY29uc3Qgc291cmNlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vbWVnYXBsYXkuYnV6ei9zdHJlYW0vZ2V0U291cmNlcz9pZD0ke2lkfSZpZD0ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBIb3N0OiBcIm1lZ2FwbGF5LmJ1enpcIixcbiAgICAgICAgICBcIlVzZXItQWdlbnRcIjogXCJNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQ7IHJ2OjE0MC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzE0MC4wXCIsXG4gICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDFcIixcbiAgICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuLVVTLGVuO3E9MC41XCIsXG4gICAgICAgICAgXCJBY2NlcHQtRW5jb2RpbmdcIjogXCJnemlwLCBkZWZsYXRlLCBiciwgenN0ZFwiLFxuICAgICAgICAgIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCIsXG4gICAgICAgICAgRE5UOiBcIjFcIixcbiAgICAgICAgICBcIlNlYy1HUENcIjogXCIxXCIsXG4gICAgICAgICAgQ29ubmVjdGlvbjogXCJrZWVwLWFsaXZlXCIsXG4gICAgICAgICAgUmVmZXJlcjogXCJodHRwczovL21lZ2FwbGF5LmJ1enovc3RyZWFtL3MtMi8xNDE2Nzkvc3ViXCIsXG4gICAgICAgICAgXCJTZWMtRmV0Y2gtRGVzdFwiOiBcImVtcHR5XCIsXG4gICAgICAgICAgXCJTZWMtRmV0Y2gtTW9kZVwiOiBcImNvcnNcIixcbiAgICAgICAgICBcIlNlYy1GZXRjaC1TaXRlXCI6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgICAgICBURTogXCJ0cmFpbGVyc1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHNvdXJjZXNKc29uID0gYXdhaXQgc291cmNlcy5qc29uKCk7XG4gICAgZXh0cmFjdGVkRGF0YS5pbnRybyA9IHNvdXJjZXNKc29uLmludHJvO1xuICAgIGV4dHJhY3RlZERhdGEub3V0cm8gPSBzb3VyY2VzSnNvbi5vdXRybztcbiAgICBleHRyYWN0ZWREYXRhLnRyYWNrcyA9IHNvdXJjZXNKc29uLnRyYWNrcz8ubWFwKCh0cmFjaykgPT4gKHtcbiAgICAgIHVybDogdHJhY2suZmlsZSxcbiAgICAgIGxhbmc6IHRyYWNrLmxhYmVsID8gdHJhY2subGFiZWwgOiB0cmFjay5raW5kXG4gICAgfSkpIHx8IFtdO1xuICAgIGV4dHJhY3RlZERhdGEuc291cmNlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgdXJsOiBzb3VyY2VzSnNvbi5zb3VyY2VzLmZpbGUsXG4gICAgICAgIHR5cGU6IFwiaGxzXCJcbiAgICAgIH1cbiAgICBdO1xuICAgIHJldHVybiBleHRyYWN0ZWREYXRhO1xuICB9XG4gIGFzeW5jIGV4dHJhY3Q1KGVtYmVkSWZyYW1lVVJMKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3M1LmdldChcbiAgICAgICAgXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20veW9nZXNoLWhhY2tlci9NZWdhY2xvdWRLZXlzL3JlZnMvaGVhZHMvbWFpbi9rZXlzLmpzb25cIlxuICAgICAgKTtcbiAgICAgIGNvbnN0IGtleSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICBjb25zdCBtZWdhY2xvdWRLZXkgPSBrZXlbXCJtZWdhXCJdO1xuICAgICAgY29uc3QgZXh0cmFjdGVkRGF0YSA9IHtcbiAgICAgICAgdHJhY2tzOiBbXSxcbiAgICAgICAgaW50cm86IHtcbiAgICAgICAgICBzdGFydDogMCxcbiAgICAgICAgICBlbmQ6IDBcbiAgICAgICAgfSxcbiAgICAgICAgb3V0cm86IHtcbiAgICAgICAgICBzdGFydDogMCxcbiAgICAgICAgICBlbmQ6IDBcbiAgICAgICAgfSxcbiAgICAgICAgc291cmNlczogW11cbiAgICAgIH07XG4gICAgICBjb25zdCBtYXRjaCA9IC9cXC8oW15cXC9cXD9dKylcXD8vLmV4ZWMoZW1iZWRJZnJhbWVVUkwuaHJlZik7XG4gICAgICBjb25zdCBzb3VyY2VJZCA9IG1hdGNoPy5bMV07XG4gICAgICBpZiAoIXNvdXJjZUlkKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZXh0cmFjdCBzb3VyY2VJZCBmcm9tIGVtYmVkIFVSTFwiKTtcbiAgICAgIGNvbnN0IGNsaWVudEtleSA9IGF3YWl0IGdldE1lZ2FDbG91ZENsaWVudEtleShzb3VyY2VJZCk7XG4gICAgICBpZiAoIWNsaWVudEtleSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGV4dHJhY3QgY2xpZW50IGtleSBmcm9tIGlmcmFtZVwiKTtcbiAgICAgIGNvbnN0IG1lZ2FjbG91ZFVybCA9IGBodHRwczovL21lZ2FjbG91ZC5ibG9nL2VtYmVkLTIvdjMvZS0xL2dldFNvdXJjZXM/aWQ9JHtzb3VyY2VJZH0mX2s9JHtjbGllbnRLZXl9YDtcbiAgICAgIGNvbnN0IHsgZGF0YTogcmF3U291cmNlRGF0YSB9ID0gYXdhaXQgYXhpb3M1LmdldChtZWdhY2xvdWRVcmwpO1xuICAgICAgbGV0IGRlY3J5cHRlZFNvdXJjZXM7XG4gICAgICBpZiAoIXJhd1NvdXJjZURhdGE/LmVuY3J5cHRlZCkge1xuICAgICAgICBkZWNyeXB0ZWRTb3VyY2VzID0gcmF3U291cmNlRGF0YT8uc291cmNlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZCA9IHJhd1NvdXJjZURhdGE/LnNvdXJjZXM7XG4gICAgICAgIGlmICghZW5jcnlwdGVkKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRlZCBzb3VyY2UgbWlzc2luZyBpbiByZXNwb25zZVwiKTtcbiAgICAgICAgY29uc29sZS5sb2coY2xpZW50S2V5LCBtZWdhY2xvdWRLZXksIGVuY3J5cHRlZCk7XG4gICAgICAgIGNvbnN0IGRlY3J5cHRlZCA9IGRlY3J5cHRTcmMyKGVuY3J5cHRlZCwgY2xpZW50S2V5LCBtZWdhY2xvdWRLZXkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGRlY3J5cHRlZFNvdXJjZXMgPSBKU09OLnBhcnNlKGRlY3J5cHRlZCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWNyeXB0ZWQgZGF0YSBpcyBub3QgdmFsaWQgSlNPTlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZXh0cmFjdGVkRGF0YS50cmFja3MgPSByYXdTb3VyY2VEYXRhLnRyYWNrcztcbiAgICAgIGV4dHJhY3RlZERhdGEuaW50cm8gPSByYXdTb3VyY2VEYXRhLmludHJvO1xuICAgICAgZXh0cmFjdGVkRGF0YS5vdXRybyA9IHJhd1NvdXJjZURhdGEub3V0cm87XG4gICAgICBleHRyYWN0ZWREYXRhLmludHJvID0gcmF3U291cmNlRGF0YS5pbnRybyA/IHJhd1NvdXJjZURhdGEuaW50cm8gOiBleHRyYWN0ZWREYXRhLmludHJvO1xuICAgICAgZXh0cmFjdGVkRGF0YS5vdXRybyA9IHJhd1NvdXJjZURhdGEub3V0cm8gPyByYXdTb3VyY2VEYXRhLm91dHJvIDogZXh0cmFjdGVkRGF0YS5vdXRybztcbiAgICAgIGV4dHJhY3RlZERhdGEudHJhY2tzID0gcmF3U291cmNlRGF0YS50cmFja3M/Lm1hcCgodHJhY2spID0+ICh7XG4gICAgICAgIHVybDogdHJhY2suZmlsZSxcbiAgICAgICAgbGFuZzogdHJhY2subGFiZWwgPyB0cmFjay5sYWJlbCA6IHRyYWNrLmtpbmRcbiAgICAgIH0pKSB8fCBbXTtcbiAgICAgIGV4dHJhY3RlZERhdGEuc291cmNlcyA9IGRlY3J5cHRlZFNvdXJjZXMubWFwKChzKSA9PiAoe1xuICAgICAgICB1cmw6IHMuZmlsZSxcbiAgICAgICAgaXNNM1U4OiBzLnR5cGUgPT09IFwiaGxzXCIsXG4gICAgICAgIHR5cGU6IHMudHlwZVxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGV4dHJhY3RlZERhdGE7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG59O1xudmFyIG1lZ2FjbG91ZF9kZWZhdWx0ID0gTWVnYUNsb3VkO1xuXG4vLyBzcmMvaGlhbmltZS90eXBlcy9hbmltZS50c1xudmFyIFNlcnZlcnMgPSAvKiBAX19QVVJFX18gKi8gKChTZXJ2ZXJzMikgPT4ge1xuICBTZXJ2ZXJzMltcIlZpZFN0cmVhbWluZ1wiXSA9IFwiaGQtMVwiO1xuICBTZXJ2ZXJzMltcIk1lZ2FDbG91ZFwiXSA9IFwibWVnYWNsb3VkXCI7XG4gIFNlcnZlcnMyW1wiU3RyZWFtU0JcIl0gPSBcInN0cmVhbXNiXCI7XG4gIFNlcnZlcnMyW1wiU3RyZWFtVGFwZVwiXSA9IFwic3RyZWFtdGFwZVwiO1xuICBTZXJ2ZXJzMltcIlZpZENsb3VkXCJdID0gXCJoZC0yXCI7XG4gIFNlcnZlcnMyW1wiQXNpYW5Mb2FkXCJdID0gXCJhc2lhbmxvYWRcIjtcbiAgU2VydmVyczJbXCJHb2dvQ0ROXCJdID0gXCJnb2dvY2RuXCI7XG4gIFNlcnZlcnMyW1wiTWl4RHJvcFwiXSA9IFwibWl4ZHJvcFwiO1xuICBTZXJ2ZXJzMltcIlVwQ2xvdWRcIl0gPSBcInVwY2xvdWRcIjtcbiAgU2VydmVyczJbXCJWaXpDbG91ZFwiXSA9IFwidml6Y2xvdWRcIjtcbiAgU2VydmVyczJbXCJNeUNsb3VkXCJdID0gXCJteWNsb3VkXCI7XG4gIFNlcnZlcnMyW1wiRmlsZW1vb25cIl0gPSBcImZpbGVtb29uXCI7XG4gIHJldHVybiBTZXJ2ZXJzMjtcbn0pKFNlcnZlcnMgfHwge30pO1xuXG4vLyBzcmMvaGlhbmltZS9zY3JhcGVycy9hbmltZUVwaXNvZGVTcmNzLnRzXG5hc3luYyBmdW5jdGlvbiBfZ2V0QW5pbWVFcGlzb2RlU291cmNlcyhlcGlzb2RlSWQsIHNlcnZlciA9IFwiaGQtMVwiIC8qIFZpZFN0cmVhbWluZyAqLywgY2F0ZWdvcnkgPSBcInN1YlwiKSB7XG4gIGlmIChlcGlzb2RlSWQuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICBjb25zdCBzZXJ2ZXJVcmwgPSBuZXcgVVJMKGVwaXNvZGVJZCk7XG4gICAgc3dpdGNoIChzZXJ2ZXIpIHtcbiAgICAgIGNhc2UgXCJoZC0xXCIgLyogVmlkU3RyZWFtaW5nICovOlxuICAgICAgY2FzZSBcImhkLTJcIiAvKiBWaWRDbG91ZCAqLzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBoZWFkZXJzOiB7IFJlZmVyZXI6IGAke3NlcnZlclVybC5vcmlnaW59L2AgfSxcbiAgICAgICAgICAvLyBkaXNhYmxlZCBmb3IgdGhlIHRpbWViZWluZ1xuICAgICAgICAgIC8vIC4uLihhd2FpdCBuZXcgTWVnYUNsb3VkKCkuZXh0cmFjdChzZXJ2ZXJVcmwpKSxcbiAgICAgICAgICAvLyBkaXNhYmxlZCBhZ2FpbiBmb3IgdGhlIHRpbWViZWluZ1xuICAgICAgICAgIC8vIC4uLihhd2FpdCBuZXcgTWVnYUNsb3VkKCkuZXh0cmFjdDIoc2VydmVyVXJsKSksXG4gICAgICAgICAgLy8gZGlzYWJsZWQgZHVlIHRvIGl0IGJlaW5nIG91dGRhdGVkXG4gICAgICAgICAgLy8gLi4uKGF3YWl0IG5ldyBNZWdhQ2xvdWQoKS5leHRyYWN0MyhzZXJ2ZXJVcmwpKSxcbiAgICAgICAgICAvLyBjdXJyZW50IG1lZ2FjbG91ZCB2MyBkZWNyeXB0aW9uXG4gICAgICAgICAgLi4uYXdhaXQgbmV3IG1lZ2FjbG91ZF9kZWZhdWx0KCkuZXh0cmFjdDUoc2VydmVyVXJsKVxuICAgICAgICB9O1xuICAgICAgY2FzZSBcInN0cmVhbXNiXCIgLyogU3RyZWFtU0IgKi86XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgUmVmZXJlcjogc2VydmVyVXJsLmhyZWYsXG4gICAgICAgICAgICB3YXRjaHNiOiBcInN0cmVhbXNiXCIsXG4gICAgICAgICAgICBcIlVzZXItQWdlbnRcIjogVVNFUl9BR0VOVF9IRUFERVJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNvdXJjZXM6IGF3YWl0IG5ldyBzdHJlYW1zYl9kZWZhdWx0KCkuZXh0cmFjdChzZXJ2ZXJVcmwsIHRydWUpXG4gICAgICAgIH07XG4gICAgICBjYXNlIFwic3RyZWFtdGFwZVwiIC8qIFN0cmVhbVRhcGUgKi86XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgUmVmZXJlcjogc2VydmVyVXJsLmhyZWYsXG4gICAgICAgICAgICBcIlVzZXItQWdlbnRcIjogVVNFUl9BR0VOVF9IRUFERVJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNvdXJjZXM6IGF3YWl0IG5ldyBzdHJlYW10YXBlX2RlZmF1bHQoKS5leHRyYWN0KHNlcnZlclVybClcbiAgICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGVhZGVyczogeyBSZWZlcmVyOiBzZXJ2ZXJVcmwuaHJlZiB9LFxuICAgICAgICAgIC4uLmF3YWl0IG5ldyByYXBpZGNsb3VkX2RlZmF1bHQoKS5leHRyYWN0KHNlcnZlclVybClcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cbiAgY29uc3QgZXBJZCA9IG5ldyBVUkwoYC93YXRjaC8ke2VwaXNvZGVJZH1gLCBTUkNfQkFTRV9VUkwpLmhyZWY7XG4gIGxvZy5pbmZvKGBFUElTT0RFX0lEOiAke2VwSWR9YCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcCA9IGF3YWl0IGNsaWVudC5nZXQoXG4gICAgICBgJHtTUkNfQUpBWF9VUkx9L3YyL2VwaXNvZGUvc2VydmVycz9lcGlzb2RlSWQ9JHtlcElkLnNwbGl0KFwiP2VwPVwiKVsxXX1gLFxuICAgICAge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgUmVmZXJlcjogZXBJZCxcbiAgICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0ICQgPSBsb2FkMTMocmVzcC5kYXRhLmh0bWwpO1xuICAgIGxldCBzZXJ2ZXJJZCA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGxvZy5pbmZvKGBUSEUgU0VSVkVSOiAke0pTT04uc3RyaW5naWZ5KHNlcnZlcil9YCk7XG4gICAgICBzd2l0Y2ggKHNlcnZlcikge1xuICAgICAgICBjYXNlIFwiaGQtMVwiIC8qIFZpZFN0cmVhbWluZyAqLzoge1xuICAgICAgICAgIHNlcnZlcklkID0gcmV0cmlldmVTZXJ2ZXJJZCgkLCA0LCBjYXRlZ29yeSk7XG4gICAgICAgICAgbG9nLmluZm8oYFNFUlZFUl9JRDogJHtzZXJ2ZXJJZH1gKTtcbiAgICAgICAgICBpZiAoIXNlcnZlcklkKSB0aHJvdyBuZXcgRXJyb3IoXCJWaWRTdHJlYW1pbmcgbm90IGZvdW5kXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJoZC0yXCIgLyogVmlkQ2xvdWQgKi86IHtcbiAgICAgICAgICBzZXJ2ZXJJZCA9IHJldHJpZXZlU2VydmVySWQoJCwgMSwgY2F0ZWdvcnkpO1xuICAgICAgICAgIGlmICghc2VydmVySWQpIHRocm93IG5ldyBFcnJvcihcIlJhcGlkQ2xvdWQgbm90IGZvdW5kXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzdHJlYW1zYlwiIC8qIFN0cmVhbVNCICovOiB7XG4gICAgICAgICAgc2VydmVySWQgPSByZXRyaWV2ZVNlcnZlcklkKCQsIDUsIGNhdGVnb3J5KTtcbiAgICAgICAgICBpZiAoIXNlcnZlcklkKSB0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYW1TQiBub3QgZm91bmRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInN0cmVhbXRhcGVcIiAvKiBTdHJlYW1UYXBlICovOiB7XG4gICAgICAgICAgc2VydmVySWQgPSByZXRyaWV2ZVNlcnZlcklkKCQsIDMsIGNhdGVnb3J5KTtcbiAgICAgICAgICBpZiAoIXNlcnZlcklkKSB0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYW1UYXBlIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJDb3VsZG4ndCBmaW5kIHNlcnZlci4gVHJ5IGFub3RoZXIgc2VydmVyXCIsXG4gICAgICAgIGdldEFuaW1lRXBpc29kZVNvdXJjZXMubmFtZSxcbiAgICAgICAgNTAwXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB7XG4gICAgICBkYXRhOiB7IGxpbmsgfVxuICAgIH0gPSBhd2FpdCBjbGllbnQuZ2V0KFxuICAgICAgYCR7U1JDX0FKQVhfVVJMfS92Mi9lcGlzb2RlL3NvdXJjZXM/aWQ9JHtzZXJ2ZXJJZH1gXG4gICAgKTtcbiAgICBsb2cuaW5mbyhgVEhFIExJTks6ICR7bGlua31gKTtcbiAgICByZXR1cm4gYXdhaXQgX2dldEFuaW1lRXBpc29kZVNvdXJjZXMobGluaywgc2VydmVyKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgSGlBbmltZUVycm9yLndyYXBFcnJvcihlcnIsIGdldEFuaW1lRXBpc29kZVNvdXJjZXMubmFtZSk7XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldEFuaW1lRXBpc29kZVNvdXJjZXMoZXBpc29kZUlkLCBzZXJ2ZXIsIGNhdGVnb3J5KSB7XG4gIHRyeSB7XG4gICAgaWYgKGVwaXNvZGVJZCA9PT0gXCJcIiB8fCBlcGlzb2RlSWQuaW5kZXhPZihcIj9lcD1cIikgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgSGlBbmltZUVycm9yKFxuICAgICAgICBcImludmFsaWQgYW5pbWUgZXBpc29kZSBpZFwiLFxuICAgICAgICBnZXRBbmltZUVwaXNvZGVTb3VyY2VzLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGNhdGVnb3J5LnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIGFuaW1lIGVwaXNvZGUgY2F0ZWdvcnlcIixcbiAgICAgICAgZ2V0QW5pbWVFcGlzb2RlU291cmNlcy5uYW1lLFxuICAgICAgICA0MDBcbiAgICAgICk7XG4gICAgfVxuICAgIGxldCBtYWxJRDtcbiAgICBsZXQgYW5pbGlzdElEO1xuICAgIGNvbnN0IGFuaW1lVVJMID0gbmV3IFVSTChlcGlzb2RlSWQ/LnNwbGl0KFwiP2VwPVwiKVswXSwgU1JDX0JBU0VfVVJMKT8uaHJlZjtcbiAgICBjb25zdCBbZXBpc29kZVNyY0RhdGEsIGFuaW1lU3JjXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIF9nZXRBbmltZUVwaXNvZGVTb3VyY2VzKGVwaXNvZGVJZCwgc2VydmVyLCBjYXRlZ29yeSksXG4gICAgICBheGlvczYuZ2V0KGFuaW1lVVJMLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBSZWZlcmVyOiBTUkNfQkFTRV9VUkwsXG4gICAgICAgICAgXCJVc2VyLUFnZW50XCI6IFVTRVJfQUdFTlRfSEVBREVSLFxuICAgICAgICAgIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICBdKTtcbiAgICBsb2cuaW5mbyhgRVBJU09ERV9TUkNfREFUQTogJHtKU09OLnN0cmluZ2lmeShlcGlzb2RlU3JjRGF0YSl9YCk7XG4gICAgY29uc3QgJCA9IGxvYWQxMyhhbmltZVNyYz8uZGF0YSk7XG4gICAgdHJ5IHtcbiAgICAgIGFuaWxpc3RJRCA9IE51bWJlcihcbiAgICAgICAgSlNPTi5wYXJzZSgkKFwiYm9keVwiKT8uZmluZChcIiNzeW5jRGF0YVwiKT8udGV4dCgpKT8uYW5pbGlzdF9pZFxuICAgICAgKTtcbiAgICAgIG1hbElEID0gTnVtYmVyKFxuICAgICAgICBKU09OLnBhcnNlKCQoXCJib2R5XCIpPy5maW5kKFwiI3N5bmNEYXRhXCIpPy50ZXh0KCkpPy5tYWxfaWRcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBhbmlsaXN0SUQgPSBudWxsO1xuICAgICAgbWFsSUQgPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZXBpc29kZVNyY0RhdGEsXG4gICAgICBhbmlsaXN0SUQsXG4gICAgICBtYWxJRFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IEhpQW5pbWVFcnJvci53cmFwRXJyb3IoZXJyLCBnZXRBbmltZUVwaXNvZGVTb3VyY2VzLm5hbWUpO1xuICB9XG59XG5cbi8vIHNyYy9oaWFuaW1lL3NjcmFwZXJzL2FuaW1lU2VhcmNoU3VnZ2VzdGlvbi50c1xuaW1wb3J0IHsgbG9hZCBhcyBsb2FkMTQgfSBmcm9tIFwiY2hlZXJpb1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0QW5pbWVTZWFyY2hTdWdnZXN0aW9uKHEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICBzdWdnZXN0aW9uczogW11cbiAgICB9O1xuICAgIHEgPSBxLnRyaW0oKSA/IGRlY29kZVVSSUNvbXBvbmVudChxLnRyaW0oKSkgOiBcIlwiO1xuICAgIGlmIChxLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIHNlYXJjaCBxdWVyeVwiLFxuICAgICAgICBnZXRBbmltZVNlYXJjaFN1Z2dlc3Rpb24ubmFtZSxcbiAgICAgICAgNDAwXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNsaWVudC5nZXQoXG4gICAgICBgJHtTUkNfQUpBWF9VUkx9L3NlYXJjaC9zdWdnZXN0P2tleXdvcmQ9JHtlbmNvZGVVUklDb21wb25lbnQocSl9YCxcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEFjY2VwdDogXCIqLypcIixcbiAgICAgICAgICBQcmFnbWE6IFwibm8tY2FjaGVcIixcbiAgICAgICAgICBSZWZlcmVyOiBTUkNfSE9NRV9VUkwsXG4gICAgICAgICAgXCJYLVJlcXVlc3RlZC1XaXRoXCI6IFwiWE1MSHR0cFJlcXVlc3RcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCAkID0gbG9hZDE0KGRhdGEuaHRtbCk7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBcIi5uYXYtaXRlbTpoYXMoLmZpbG0tcG9zdGVyKVwiO1xuICAgIGlmICgkKHNlbGVjdG9yKS5sZW5ndGggPCAxKSByZXR1cm4gcmVzO1xuICAgICQoc2VsZWN0b3IpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBjb25zdCBpZCA9ICQoZWwpLmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIj9cIilbMF0uaW5jbHVkZXMoXCJqYXZhc2NyaXB0XCIpID8gbnVsbCA6ICQoZWwpLmF0dHIoXCJocmVmXCIpPy5zcGxpdChcIj9cIilbMF0/LnNsaWNlKDEpIHx8IG51bGw7XG4gICAgICByZXMuc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICAgIGlkLFxuICAgICAgICBuYW1lOiAkKGVsKS5maW5kKFwiLnNycC1kZXRhaWwgLmZpbG0tbmFtZVwiKT8udGV4dCgpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgam5hbWU6ICQoZWwpLmZpbmQoXCIuc3JwLWRldGFpbCAuZmlsbS1uYW1lXCIpPy5hdHRyKFwiZGF0YS1qbmFtZVwiKT8udHJpbSgpIHx8ICQoZWwpLmZpbmQoXCIuc3JwLWRldGFpbCAuYWxpYXMtbmFtZVwiKT8udGV4dCgpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgcG9zdGVyOiAkKGVsKS5maW5kKFwiLmZpbG0tcG9zdGVyIC5maWxtLXBvc3Rlci1pbWdcIik/LmF0dHIoXCJkYXRhLXNyY1wiKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIG1vcmVJbmZvOiBbXG4gICAgICAgICAgLi4uJChlbCkuZmluZChcIi5maWxtLWluZm9yXCIpLmNvbnRlbnRzKCkubWFwKChfMiwgZWwyKSA9PiAkKGVsMikudGV4dCgpLnRyaW0oKSlcbiAgICAgICAgXS5maWx0ZXIoKGkpID0+IGkpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0QW5pbWVTZWFyY2hTdWdnZXN0aW9uLm5hbWUpO1xuICB9XG59XG5cbi8vIHNyYy9oaWFuaW1lL3NjcmFwZXJzL2VzdGltYXRlZFNjaGVkdWxlLnRzXG5pbXBvcnQgeyBsb2FkIGFzIGxvYWQxNSB9IGZyb20gXCJjaGVlcmlvXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRTY2hlZHVsZShkYXRlLCB0ek9mZnNldCA9IC0zMzApIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIHNjaGVkdWxlZEFuaW1lczogW11cbiAgfTtcbiAgdHJ5IHtcbiAgICBkYXRlID0gZGF0ZT8udHJpbSgpO1xuICAgIGlmIChkYXRlID09PSBcIlwiIHx8IC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KGRhdGUpID09PSBmYWxzZSkge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIGRhdGUgZm9ybWF0XCIsXG4gICAgICAgIGdldEVzdGltYXRlZFNjaGVkdWxlLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHR6T2Zmc2V0ICYmICh0eXBlb2YgdHpPZmZzZXQgIT09IFwibnVtYmVyXCIgfHwgaXNOYU4odHpPZmZzZXQpKSkge1xuICAgICAgdGhyb3cgbmV3IEhpQW5pbWVFcnJvcihcbiAgICAgICAgXCJpbnZhbGlkIHRpbWV6b25lIG9mZnNldFwiLFxuICAgICAgICBnZXRFc3RpbWF0ZWRTY2hlZHVsZS5uYW1lLFxuICAgICAgICA0MDBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGVzdFNjaGVkdWxlVVJMID0gYCR7U1JDX0FKQVhfVVJMfS9zY2hlZHVsZS9saXN0P3R6T2Zmc2V0PSR7dHpPZmZzZXR9JmRhdGU9JHtkYXRlfWA7XG4gICAgY29uc3QgbWFpblBhZ2UgPSBhd2FpdCBjbGllbnQuZ2V0KGVzdFNjaGVkdWxlVVJMLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEFjY2VwdDogXCIqLypcIixcbiAgICAgICAgUmVmZXJlcjogU1JDX0hPTUVfVVJMLFxuICAgICAgICBcIlgtUmVxdWVzdGVkLVdpdGhcIjogXCJYTUxIdHRwUmVxdWVzdFwiXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgJCA9IGxvYWQxNShtYWluUGFnZT8uZGF0YT8uaHRtbCk7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBcImxpXCI7XG4gICAgaWYgKCQoc2VsZWN0b3IpPy50ZXh0KCk/LnRyaW0oKT8uaW5jbHVkZXMoXCJObyBkYXRhIHRvIGRpc3BsYXlcIikpIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgICQoc2VsZWN0b3IpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBjb25zdCBhaXJpbmdUaW1lc3RhbXAgPSAoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKFxuICAgICAgICBgJHtkYXRlfVQkeyQoZWwpPy5maW5kKFwiYSAudGltZVwiKT8udGV4dCgpPy50cmltKCl9OjAwYFxuICAgICAgKSkuZ2V0VGltZSgpO1xuICAgICAgcmVzLnNjaGVkdWxlZEFuaW1lcy5wdXNoKHtcbiAgICAgICAgaWQ6ICQoZWwpPy5maW5kKFwiYVwiKT8uYXR0cihcImhyZWZcIik/LnNsaWNlKDEpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgdGltZTogJChlbCk/LmZpbmQoXCJhIC50aW1lXCIpPy50ZXh0KCk/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBuYW1lOiAkKGVsKT8uZmluZChcImEgLmZpbG0tbmFtZS5keW5hbWljLW5hbWVcIik/LnRleHQoKT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGpuYW1lOiAkKGVsKT8uZmluZChcImEgLmZpbG0tbmFtZS5keW5hbWljLW5hbWVcIik/LmF0dHIoXCJkYXRhLWpuYW1lXCIpPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgYWlyaW5nVGltZXN0YW1wLFxuICAgICAgICBzZWNvbmRzVW50aWxBaXJpbmc6IE1hdGguZmxvb3IoXG4gICAgICAgICAgKGFpcmluZ1RpbWVzdGFtcCAtIERhdGUubm93KCkpIC8gMWUzXG4gICAgICAgICksXG4gICAgICAgIGVwaXNvZGU6IE51bWJlcihcbiAgICAgICAgICAkKGVsKS5maW5kKFwiYSAuZmQtcGxheSBidXR0b25cIikudGV4dCgpLnRyaW0oKS5zcGxpdChcIiBcIilbMV1cbiAgICAgICAgKVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgSGlBbmltZUVycm9yLndyYXBFcnJvcihlcnIsIGdldEVzdGltYXRlZFNjaGVkdWxlLm5hbWUpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBnZXROZXh0RXBpc29kZVNjaGVkdWxlKGFuaW1lSWQpIHtcbiAgY29uc3QgcmVzID0ge1xuICAgIGFpcmluZ0lTT1RpbWVzdGFtcDogbnVsbCxcbiAgICBhaXJpbmdUaW1lc3RhbXA6IG51bGwsXG4gICAgc2Vjb25kc1VudGlsQWlyaW5nOiBudWxsXG4gIH07XG4gIHRyeSB7XG4gICAgYW5pbWVJZCA9IGFuaW1lSWQ/LnRyaW0oKTtcbiAgICBpZiAoIWFuaW1lSWQgfHwgYW5pbWVJZC5pbmRleE9mKFwiLVwiKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBIaUFuaW1lRXJyb3IoXG4gICAgICAgIFwiaW52YWxpZCBhbmltZSBpZFwiLFxuICAgICAgICBnZXROZXh0RXBpc29kZVNjaGVkdWxlLm5hbWUsXG4gICAgICAgIDQwMFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgYW5pbWVVcmwgPSBgJHtTUkNfQkFTRV9VUkx9L3dhdGNoLyR7YW5pbWVJZH1gO1xuICAgIGNvbnN0IG1haW5QYWdlID0gYXdhaXQgY2xpZW50LmdldChhbmltZVVybCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBY2NlcHQ6IFwiKi8qXCIsXG4gICAgICAgIFJlZmVyZXI6IFNSQ19IT01FX1VSTFxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0ICQgPSBsb2FkMTUobWFpblBhZ2UuZGF0YSk7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBcIi5zY2hlZHVsZS1hbGVydCA+IC5hbGVydC5zbWFsbCA+IHNwYW46bGFzdFwiO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IFN0cmluZyhcbiAgICAgICQoc2VsZWN0b3IpLmF0dHIoXCJkYXRhLXZhbHVlXCIpPy50cmltKCkgfHwgbnVsbFxuICAgICk7XG4gICAgY29uc3Qgc2NoZWR1bGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgIGlmIChpc05hTihzY2hlZHVsZS5nZXRUaW1lKCkpKSByZXR1cm4gcmVzO1xuICAgIHJlcy5haXJpbmdJU09UaW1lc3RhbXAgPSBzY2hlZHVsZS50b0lTT1N0cmluZygpO1xuICAgIHJlcy5haXJpbmdUaW1lc3RhbXAgPSBzY2hlZHVsZS5nZXRUaW1lKCk7XG4gICAgcmVzLnNlY29uZHNVbnRpbEFpcmluZyA9IE1hdGguZmxvb3IoXG4gICAgICAocmVzLmFpcmluZ1RpbWVzdGFtcCAtIERhdGUubm93KCkpIC8gMWUzXG4gICAgKTtcbiAgICByZXR1cm4gcmVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBIaUFuaW1lRXJyb3Iud3JhcEVycm9yKGVyciwgZ2V0TmV4dEVwaXNvZGVTY2hlZHVsZS5uYW1lKTtcbiAgfVxufVxuXG4vLyBzcmMvaGlhbmltZS9oaWFuaW1lLnRzXG52YXIgU2NyYXBlciA9IGNsYXNzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbmltZUlkIC0gdW5pcXVlIGFuaW1lIGlkXG4gICAqIEB0aHJvd3Mge0hpQW5pbWVFcnJvcn1cbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IHsgSGlBbmltZSB9IGZyb20gXCJhbml3YXRjaFwiO1xuICAgKlxuICAgKiBjb25zdCBoaWFuaW1lID0gbmV3IEhpQW5pbWUuU2NyYXBlcigpXG4gICAqXG4gICAqIGhpYW5pbWUuZ2V0SW5mbyhcInN0ZWluc2dhdGUtM1wiKVxuICAgKiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgKiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBnZXRJbmZvKGFuaW1lSWQpIHtcbiAgICByZXR1cm4gZ2V0QW5pbWVBYm91dEluZm8oYW5pbWVJZCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjYXRlZ29yeSAtIGFuaW1lIGNhdGVnb3J5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlIC0gcGFnZSBudW1iZXIsIGRlZmF1bHRzIHRvIGAxYFxuICAgKiBAdGhyb3dzIHtIaUFuaW1lRXJyb3J9XG4gICAqIEBleGFtcGxlXG4gICAqIGltcG9ydCB7IEhpQW5pbWUgfSBmcm9tIFwiYW5pd2F0Y2hcIjtcbiAgICpcbiAgICogY29uc3QgaGlhbmltZSA9IG5ldyBIaUFuaW1lLlNjcmFwZXIoKVxuICAgKlxuICAgKiBoaWFuaW1lLmdldENhdGVnb3J5QW5pbWUoXCJzdWJiZWQtYW5pbWVcIilcbiAgICogIC50aGVuKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcbiAgICogIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgKlxuICAgKi9cbiAgYXN5bmMgZ2V0Q2F0ZWdvcnlBbmltZShjYXRlZ29yeSwgcGFnZSA9IDEpIHtcbiAgICByZXR1cm4gZ2V0QW5pbWVDYXRlZ29yeShjYXRlZ29yeSwgcGFnZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbmltZUlkIC0gdW5pcXVlIGFuaW1lIGlkXG4gICAqIEB0aHJvd3Mge0hpQW5pbWVFcnJvcn1cbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IHsgSGlBbmltZSB9IGZyb20gXCJhbml3YXRjaFwiO1xuICAgKlxuICAgKiBjb25zdCBoaWFuaW1lID0gbmV3IEhpQW5pbWUuU2NyYXBlcigpXG4gICAqXG4gICAqIGhpYW5pbWUuZ2V0RXBpc29kZXMoXCJzdGVpbnNnYXRlLTNcIilcbiAgICogIC50aGVuKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcbiAgICogIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgKlxuICAgKi9cbiAgYXN5bmMgZ2V0RXBpc29kZXMoYW5pbWVJZCkge1xuICAgIHJldHVybiBnZXRBbmltZUVwaXNvZGVzKGFuaW1lSWQpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXBpc29kZUlkIC0gdW5pcXVlIGVwaXNvZGUgaWRcbiAgICogQHRocm93cyB7SGlBbmltZUVycm9yfVxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBIaUFuaW1lIH0gZnJvbSBcImFuaXdhdGNoXCI7XG4gICAqXG4gICAqIGNvbnN0IGhpYW5pbWUgPSBuZXcgSGlBbmltZS5TY3JhcGVyKClcbiAgICpcbiAgICogaGlhbmltZS5nZXRFcGlzb2RlU291cmNlcyhcInN0ZWluc2dhdGUtMz9lcD0yMzBcIiwgXCJoZC0xXCIsIFwic3ViXCIpXG4gICAqICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSkpXG4gICAqICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICpcbiAgICovXG4gIGFzeW5jIGdldEVwaXNvZGVTb3VyY2VzKGVwaXNvZGVJZCwgc2VydmVyID0gXCJoZC0xXCIgLyogVmlkU3RyZWFtaW5nICovLCBjYXRlZ29yeSA9IFwic3ViXCIpIHtcbiAgICByZXR1cm4gZ2V0QW5pbWVFcGlzb2RlU291cmNlcyhlcGlzb2RlSWQsIHNlcnZlciwgY2F0ZWdvcnkpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZ2VucmVOYW1lIC0gYW5pbWUgZ2VucmUgbmFtZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIHBhZ2UgbnVtYmVyLCBkZWZhdWx0cyB0byBgMWBcbiAgICogQHRocm93cyB7SGlBbmltZUVycm9yfVxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBIaUFuaW1lIH0gZnJvbSBcImFuaXdhdGNoXCI7XG4gICAqXG4gICAqIGNvbnN0IGhpYW5pbWUgPSBuZXcgSGlBbmltZS5TY3JhcGVyKClcbiAgICpcbiAgICogaGlhbmltZS5nZXRHZW5yZUFuaW1lKFwic2hvdW5lblwiLCAyKVxuICAgKiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgKiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBnZXRHZW5yZUFuaW1lKGdlbnJlTmFtZSwgcGFnZSA9IDEpIHtcbiAgICByZXR1cm4gZ2V0R2VucmVBbmltZShnZW5yZU5hbWUsIHBhZ2UpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvZHVjZXJOYW1lIC0gYW5pbWUgcHJvZHVjZXIgbmFtZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFnZSAtIHBhZ2UgbnVtYmVyLCBkZWZhdWx0cyB0byBgMWBcbiAgICogQHRocm93cyB7SGlBbmltZUVycm9yfVxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBIaUFuaW1lIH0gZnJvbSBcImFuaXdhdGNoXCI7XG4gICAqXG4gICAqIGNvbnN0IGhpYW5pbWUgPSBuZXcgSGlBbmltZS5TY3JhcGVyKClcbiAgICpcbiAgICogaGlhbmltZS5nZXRQcm9kdWNlckFuaW1lcyhcInRvZWktYW5pbWF0aW9uXCIsIDIpXG4gICAqICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSkpXG4gICAqICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICpcbiAgICovXG4gIGFzeW5jIGdldFByb2R1Y2VyQW5pbWVzKHByb2R1Y2VyTmFtZSwgcGFnZSA9IDEpIHtcbiAgICByZXR1cm4gZ2V0UHJvZHVjZXJBbmltZXMocHJvZHVjZXJOYW1lLCBwYWdlKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHEgLSBzZWFyY2ggcXVlcnlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2UgLSBwYWdlIG51bWJlciwgZGVmYXVsdHMgdG8gYDFgXG4gICAqIEBwYXJhbSB7U2VhcmNoRmlsdGVyc30gZmlsdGVycyAtIG9wdGlvbmFsIGFkdmFuY2Ugc2VhcmNoIGZpbHRlcnNcbiAgICogQHRocm93cyB7SGlBbmltZUVycm9yfVxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBIaUFuaW1lIH0gZnJvbSBcImFuaXdhdGNoXCI7XG4gICAqXG4gICAqIGNvbnN0IGhpYW5pbWUgPSBuZXcgSGlBbmltZS5TY3JhcGVyKCk7XG4gICAqXG4gICAqIGhpYW5pbWVcbiAgICogICAuc2VhcmNoKFwibW9uc3RlclwiLCAxLCB7XG4gICAqICAgICBnZW5yZXM6IFwic2VpbmVuLHBzeWNob2xvZ2ljYWxcIixcbiAgICogICB9KVxuICAgKiAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAqICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICogICB9KVxuICAgKiAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAqICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAqICAgfSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBzZWFyY2gocSwgcGFnZSA9IDEsIGZpbHRlcnMgPSB7fSkge1xuICAgIHJldHVybiBnZXRBbmltZVNlYXJjaFJlc3VsdHMocSwgcGFnZSwgZmlsdGVycyk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBxIC0gc2VhcmNoIHF1ZXJ5XG4gICAqIEB0aHJvd3Mge0hpQW5pbWVFcnJvcn1cbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IHsgSGlBbmltZSB9IGZyb20gXCJhbml3YXRjaFwiO1xuICAgKlxuICAgKiBjb25zdCBoaWFuaW1lID0gbmV3IEhpQW5pbWUuU2NyYXBlcigpXG4gICAqXG4gICAqIGhpYW5pbWUuc2VhcmNoU3VnZ2VzdGlvbnMoXCJvbmUgcGllY2VcIilcbiAgICogIC50aGVuKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcbiAgICogIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgKlxuICAgKi9cbiAgYXN5bmMgc2VhcmNoU3VnZ2VzdGlvbnMocSkge1xuICAgIHJldHVybiBnZXRBbmltZVNlYXJjaFN1Z2dlc3Rpb24ocSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbmltZUVwaXNvZGVJZCAtIHVuaXF1ZSBhbmltZSBlcGlzb2RlIGlkXG4gICAqIEB0aHJvd3Mge0hpQW5pbWVFcnJvcn1cbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IHsgSGlBbmltZSB9IGZyb20gXCJhbml3YXRjaFwiO1xuICAgKlxuICAgKiBjb25zdCBoaWFuaW1lID0gbmV3IEhpQW5pbWUuU2NyYXBlcigpXG4gICAqXG4gICAqIGhpYW5pbWUuZ2V0RXBpc29kZVNlcnZlcnMoXCJzdGVpbnNnYXRlLTAtOTI/ZXA9MjA1NVwiKVxuICAgKiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgKiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBnZXRFcGlzb2RlU2VydmVycyhhbmltZUVwaXNvZGVJZCkge1xuICAgIHJldHVybiBnZXRFcGlzb2RlU2VydmVycyhhbmltZUVwaXNvZGVJZCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlIC0gZGF0ZSBpbiBgWVlZWS1NTS1ERGAgZm9ybWF0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0ek9mZnNldCAtIHRpbWV6b25lIG9mZnNldCBpbiBtaW51dGVzLCBkZWZhdWx0cyB0byBgLTMzMGAgKElTVClcbiAgICogQHRocm93cyB7SGlBbmltZUVycm9yfVxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBIaUFuaW1lIH0gZnJvbSBcImFuaXdhdGNoXCI7XG4gICAqXG4gICAqIGNvbnN0IGhpYW5pbWUgPSBuZXcgSGlBbmltZS5TY3JhcGVyKClcbiAgICogY29uc3QgdGltZXpvbmVPZmZzZXQgPSAtMzMwOyAvLyBJU1Qgb2Zmc2V0IGluIG1pbnV0ZXNcbiAgICpcbiAgICogaGlhbmltZS5nZXRFc3RpbWF0ZWRTY2hlZHVsZShcIjIwMjUtMDYtMDlcIiwgdGltZXpvbmVPZmZzZXQpXG4gICAqICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coZGF0YSkpXG4gICAqICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICpcbiAgICovXG4gIGFzeW5jIGdldEVzdGltYXRlZFNjaGVkdWxlKGRhdGUsIHR6T2Zmc2V0ID0gLTMzMCkge1xuICAgIHJldHVybiBnZXRFc3RpbWF0ZWRTY2hlZHVsZShkYXRlLCB0ek9mZnNldCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbmltZUlkIC0gdW5pcXVlIGFuaW1lIGlkXG4gICAqIEB0aHJvd3Mge0hpQW5pbWVFcnJvcn1cbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IHsgSGlBbmltZSB9IGZyb20gXCJhbml3YXRjaFwiO1xuICAgKlxuICAgKiBjb25zdCBoaWFuaW1lID0gbmV3IEhpQW5pbWUuU2NyYXBlcigpXG4gICAqXG4gICAqIGhpYW5pbWUuZ2V0TmV4dEVwaXNvZGVTY2hlZHVsZShcIm9uZS1waWVjZS0xMDBcIilcbiAgICogIC50aGVuKChkYXRhKSA9PiBjb25zb2xlLmxvZyhkYXRhKSlcbiAgICogIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgKlxuICAgKi9cbiAgYXN5bmMgZ2V0TmV4dEVwaXNvZGVTY2hlZHVsZShhbmltZUlkKSB7XG4gICAgcmV0dXJuIGdldE5leHRFcGlzb2RlU2NoZWR1bGUoYW5pbWVJZCk7XG4gIH1cbiAgLyoqXG4gICAqIEB0aHJvd3Mge0hpQW5pbWVFcnJvcn1cbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IHsgSGlBbmltZSB9IGZyb20gXCJhbml3YXRjaFwiO1xuICAgKlxuICAgKiBjb25zdCBoaWFuaW1lID0gbmV3IEhpQW5pbWUuU2NyYXBlcigpXG4gICAqXG4gICAqIGhpYW5pbWUuZ2V0SG9tZVBhZ2UoKVxuICAgKiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgKiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBnZXRIb21lUGFnZSgpIHtcbiAgICByZXR1cm4gZ2V0SG9tZVBhZ2UoKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtBWkxpc3RTb3J0T3B0aW9uc30gc29ydE9wdGlvbiBhei1saXN0IHNvcnQgb3B0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlIC0gcGFnZSBudW1iZXIsIGRlZmF1bHRzIHRvIGAxYFxuICAgKiBAdGhyb3dzIHtIaUFuaW1lRXJyb3J9XG4gICAqIEBleGFtcGxlXG4gICAqIGltcG9ydCB7IEhpQW5pbWUgfSBmcm9tIFwiYW5pd2F0Y2hcIjtcbiAgICpcbiAgICogY29uc3QgaGlhbmltZSA9IG5ldyBIaUFuaW1lLlNjcmFwZXIoKVxuICAgKlxuICAgKiBoaWFuaW1lLmdldEFaTGlzdChcIjAtOVwiLCAxKVxuICAgKiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgKiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBnZXRBWkxpc3Qoc29ydE9wdGlvbiwgcGFnZSA9IDEpIHtcbiAgICByZXR1cm4gZ2V0QVpMaXN0KHNvcnRPcHRpb24sIHBhZ2UpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYW5pbWVJZCAtIHVuaXF1ZSBhbmltZSBpZFxuICAgKiBAdGhyb3dzIHtIaUFuaW1lRXJyb3J9XG4gICAqIEBleGFtcGxlXG4gICAqIGltcG9ydCB7IEhpQW5pbWUgfSBmcm9tIFwiYW5pd2F0Y2hcIjtcbiAgICpcbiAgICogY29uc3QgaGlhbmltZSA9IG5ldyBIaUFuaW1lLlNjcmFwZXIoKVxuICAgKlxuICAgKiBoaWFuaW1lLmdldFF0aXBJbmZvKFwib25lLXBpZWNlLTEwMFwiKVxuICAgKiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKGRhdGEpKVxuICAgKiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAqXG4gICAqL1xuICBhc3luYyBnZXRRdGlwSW5mbyhhbmltZUlkKSB7XG4gICAgcmV0dXJuIGdldEFuaW1lUXRpcEluZm8oYW5pbWVJZCk7XG4gIH1cbn07XG5leHBvcnQge1xuICBoaWFuaW1lX2V4cG9ydHMgYXMgSGlBbmltZSxcbiAgSGlBbmltZUVycm9yXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/aniwatch/dist/index.js\n");

/***/ })

};
;